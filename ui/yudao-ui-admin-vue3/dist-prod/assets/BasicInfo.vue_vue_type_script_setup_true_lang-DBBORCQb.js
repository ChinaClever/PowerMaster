import{_ as q}from"./XButton-zTH-RG3W.js";import{_ as j}from"./Form-5oiF4EUX.js";import{d as B,b as F,f as d,e as U,h as A,o as C,c as N,k as l,w as i,l as g,t as b,a,j as R,F as z,x as E,az as M,aA as S}from"./index-mcOGIq4g.js";import{u as W,g as $}from"./profile-CKYUJvZd.js";import{u as D}from"./useMessage-CGTQbR_M.js";const G={style:{"text-align":"center"}},H=B({name:"BasicInfo",__name:"BasicInfo",setup(J){const{t:e}=E(),k=D(),_=F(),y=d({nickname:[{required:!0,message:e("profile.rules.nickname"),trigger:"blur"}],email:[{required:!0,message:e("profile.rules.mail"),trigger:"blur"},{type:"email",message:e("profile.rules.truemail"),trigger:["blur","change"]}],mobile:[{required:!0,message:e("profile.rules.phone"),trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:e("profile.rules.truephone"),trigger:"blur"}]}),x=d([{field:"nickname",label:e("profile.user.nickname"),component:"Input"},{field:"mobile",label:e("profile.user.mobile"),component:"Input"},{field:"email",label:e("profile.user.email"),component:"Input"},{field:"sex",label:e("profile.user.sex"),component:"InputNumber",value:0}]),r=U(),n=async()=>{var s;const m=await $();return(s=a(r))==null||s.setValues(m),m};return A(async()=>{await n()}),(m,s)=>{const u=M,h=S,w=j,c=q;return C(),N(z,null,[l(w,{ref_key:"formRef",ref:r,labelWidth:200,rules:a(y),schema:a(x)},{sex:i(t=>[l(h,{modelValue:t.sex,"onUpdate:modelValue":o=>t.sex=o},{default:i(()=>[l(u,{label:1},{default:i(()=>[g(b(a(e)("profile.user.man")),1)]),_:1}),l(u,{label:2},{default:i(()=>[g(b(a(e)("profile.user.woman")),1)]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["rules","schema"]),R("div",G,[l(c,{title:a(e)("common.save"),type:"primary",onClick:s[0]||(s[0]=t=>(()=>{var p;const o=(p=a(r))==null?void 0:p.getElFormRef();o&&o.validate(async I=>{var f;if(I){const V=(f=a(r))==null?void 0:f.formModel;await W(V),k.success(e("common.updateSuccess"));const v=await n();_.setUserNicknameAction(v.nickname)}})})())},null,8,["title"]),l(c,{title:a(e)("common.reset"),type:"danger",onClick:s[1]||(s[1]=t=>n())},null,8,["title"])])],64)}}});export{H as _};
