import{d as k,e as x,h as B,f,o as i,c,k as l,w as m,j as h,F as E,p as v,t as p,a as R,ax as S,ao as $,E as C,z as j}from"./index-mcOGIq4g.js";import{n as w}from"./jsplumb.browser-ui.es-D8lVyB7K.js";import{d as K}from"./vuedraggable.umd-DnsY9z5D.js";import{_ as P}from"./_plugin-vue_export-helper-BCo6x5W8.js";const W={class:"portLeft"},z=["id"],D=["id"],F={class:"portRight"},T=["id"],q=P(k({__name:"TopologyEdit",setup(A){const u=x();let t=null;const _=n=>{},L=n=>{if(n.oldIndex==n.newIndex)return!1;const d=t==null?void 0:t.connections;let o=[];d==null||d.forEach(a=>{o.push({sourceId:a.sourceId,targetId:a.targetId})}),t==null||t.deleteEveryConnection(),$(()=>{o.forEach((a,e)=>{t==null||t.connect({source:document.getElementById(a.sourceId),target:document.getElementById(a.targetId),anchor:["Right","Left"]})})})};B(()=>{(()=>{t=w({container:u.value});const n={source:!0,target:!0,endpoint:"Rectangle"},d={strokeWidth:2,stroke:r.length>5?"rgba(0, 0, 0, 0)":"#000",outlineWidth:13,outlineStroke:"rgba(0, 0, 0, 0)"},o={...d,stroke:"#000"};t.bind("beforeDrop",a=>a.sourceId.slice(0,5)!=a.targetId.slice(0,5)),r.forEach(a=>{const e=document.getElementById(`frame${a.id}`);t==null||t.addEndpoint(e,{...n,anchor:"Left"}),t==null||t.addEndpoint(e,{...n,anchor:"Right"})}),I.forEach(a=>{const e=document.getElementById(`portLeft${a.id}`);t==null||t.addEndpoint(e,{...n,anchor:"Right"});const g=document.getElementById(`frame${a.targetId}`),s=t==null?void 0:t.connect({source:e,target:g,endpoint:"Rectangle",anchors:["Right","Left"],paintStyle:d});s&&r.length>5&&(s.hoverPaintStyle=o)}),y.forEach(a=>{const e=document.getElementById(`portRight${a.id}`);t==null||t.addEndpoint(e,{...n,anchor:"Left"});const g=document.getElementById(`frame${a.targetId}`),s=t==null?void 0:t.connect({source:g,target:e,endpoint:"Rectangle",anchors:["Right","Left"],paintStyle:d});s&&r.length>5&&(s.hoverPaintStyle=o)})})()});const I=f([{id:101,name:"\u7AEF\u53E31",targetId:201},{id:102,name:"\u7AEF\u53E32",targetId:202},{id:103,name:"\u7AEF\u53E33",targetId:203},{id:104,name:"\u7AEF\u53E34",targetId:204}]),y=f([{id:301,name:"\u7AEF\u53E31",targetId:201},{id:302,name:"\u7AEF\u53E32",targetId:202},{id:303,name:"\u7AEF\u53E33",targetId:203},{id:304,name:"\u7AEF\u53E34",targetId:204}]);let r=f([{id:201,name:"\u670D\u52A1\u56681"},{id:202,name:"\u670D\u52A1\u56682"},{id:203,name:"\u670D\u52A1\u56683"},{id:204,name:"\u670D\u52A1\u56684"}]);return(n,d)=>{const o=C,a=j;return i(),c("div",{ref_key:"frameContainer",ref:u,class:"frameContainer",style:{position:"relative"}},[l(a,{gutter:20},{default:m(()=>[l(o,{span:4,xs:24},{default:m(()=>[h("div",W,[(i(!0),c(E,null,v(I,e=>(i(),c("div",{class:"port",key:e.id,id:"portLeft"+e.id},p(e.name),9,z))),128))])]),_:1}),l(o,{span:16,xs:24},{default:m(()=>[l(R(K),{class:"frameList",list:R(r),itemKey:e=>e.id,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"100",onStart:_,onEnd:S(L,["prevent"])},{item:m(({element:e})=>[h("div",{class:"frame",id:"frame"+e.id},p(e.name),9,D)]),_:1},8,["list","itemKey"])]),_:1}),l(o,{span:4,xs:24},{default:m(()=>[h("div",F,[(i(!0),c(E,null,v(y,e=>(i(),c("div",{class:"port",key:e.id,id:"portRight"+e.id},p(e.name),9,T))),128))])]),_:1})]),_:1})],512)}}}),[["__scopeId","data-v-85246b06"]]);export{q as default};
