import{d as S,e as m,f as C,o as h,c as P,k as e,w as i,j as B,a as n,l as r,s as V,n as j,t as b,ax as Z,F as A,b8 as D,aZ as F,Z as G,O as I,_ as L,A as E,Q as M,D as O,G as Q,R as q}from"./index-mcOGIq4g.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-DcNux-x9.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BHQCcaX3.js";import{m as _}from"./index-bbtkn_W1.js";import{C as K}from"./index-JEsRnusb.js";import{u as W}from"./useMessage-CGTQbR_M.js";import"./index-BFNvSS9e.js";import"./el-card-FPJq94NZ.js";const X={class:"flex justify-between"},Y=S({__name:"record",setup($){const y=W(),d=m(!1),g=m([]),v=m([]),t=C({ip:"",pageNo:1,pageSize:24,pageTotal:0}),x=["\u672A\u5F00\u59CB","\u5DF2\u901A\u77E5","\u4E0B\u8F7D\u4E2D","\u4E0B\u8F7D\u5B8C\u6210","\u8D85\u65F6\u672A\u4E0B\u8F7D","\u4E0B\u8F7D\u5931\u8D25","\u65E0\u9700\u5347\u7EA7","\u5347\u7EA7\u5B8C\u6210"],s=async(p=!1)=>{d.value=!0,p&&(t.pageNo=1);try{const a=await _.getUpgradeRecordPage({pageNo:t.pageNo,pageSize:t.pageSize,ips:t.ip});a.list&&(g.value=a.list,t.pageTotal=a.total)}finally{d.value=!1}};return(async()=>{const p=await K.getRoomList({});v.value=p||[]})(),s(),(p,a)=>{const N=G,c=I,T=L,u=E,z=M,f=J,o=O,R=Q,U=H,k=q;return h(),P(A,null,[e(f,null,{default:i(()=>[B("div",X,[e(z,{class:"-mb-15px",model:n(t),inline:!0,"label-width":"68px"},{default:i(()=>[e(c,{label:"ip\uFF1A"},{default:i(()=>[e(N,{modelValue:n(t).ip,"onUpdate:modelValue":a[0]||(a[0]=l=>n(t).ip=l),placeholder:"\u8BF7\u8F93\u5165ip",clearable:"",class:"!w-160px",height:"35"},null,8,["modelValue"])]),_:1}),e(c,null,{default:i(()=>[e(u,{style:{"margin-left":"12px"},onClick:a[1]||(a[1]=l=>s(!0))},{default:i(()=>[e(T,{icon:"ep:search"}),r("\u641C\u7D22")]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),e(f,null,{default:i(()=>[V((h(),j(R,{style:{width:"100%"},height:"600",data:n(g)},{default:i(()=>[e(o,{label:"ip","min-width":"110",align:"center",prop:"devIp"}),e(o,{label:"\u4F4D\u7F6E","min-width":"110",align:"center",prop:"devposition"}),e(o,{label:"\u5347\u7EA7\u6587\u4EF6","min-width":"110",align:"center",prop:"fileNames"}),e(o,{label:"\u5347\u7EA7\u72B6\u6001","min-width":"110",align:"center",prop:"status"},{default:i(l=>[r(b(x[l.row.status]),1)]),_:1}),e(o,{label:"\u4E0B\u8F7D\u8FDB\u5EA6","min-width":"110",align:"center",prop:"downloadProgress"},{default:i(l=>[r(b(l.row.downloadProgress)+"% ",1)]),_:1}),e(o,{label:"\u5347\u7EA7\u7ED3\u679C","min-width":"110",align:"center",prop:"result"}),e(o,{label:"\u7ED3\u675F\u539F\u56E0","min-width":"110",align:"center",prop:"finishReason"}),e(o,{label:"\u5F00\u59CB\u65F6\u95F4","min-width":"110",align:"center",prop:"startTime"}),e(o,{label:"\u7ED3\u675F\u65F6\u95F4","min-width":"110",align:"center",prop:"endTime"}),e(o,{fixed:"right",label:"\u64CD\u4F5C",width:"120"},{default:i(l=>[e(u,{link:"",type:"primary",size:"small",onClick:Z(ee=>{return w=l.row.id,void D.confirm("\u786E\u5B9A\u5220\u9664\u8FD9\u6B21\u8BB0\u5F55\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{await _.deleteUpgradeRecord(w)&&y.success("\u5220\u9664\u6210\u529F"),s(!0)}).catch(()=>{F({type:"info",message:"\u53D6\u6D88\u4E86"})});var w},["prevent"])},{default:i(()=>[r(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,n(d)]]),e(U,{total:n(t).pageTotal,page:n(t).pageNo,"onUpdate:page":a[2]||(a[2]=l=>n(t).pageNo=l),limit:n(t).pageSize,"onUpdate:limit":a[3]||(a[3]=l=>n(t).pageSize=l),onPagination:a[4]||(a[4]=l=>s(!1))},null,8,["total","page","limit"])]),_:1})],64)}}});export{Y as default};
