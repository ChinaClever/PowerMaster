import{r as y,d as S,x as $,e as m,f as j,o as _,n as x,w as d,k as n,a as r,l as s,s as A,m as D,j as F,Z as M,O as Q,Q as Z,A as z,R as B}from"./index-mcOGIq4g.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-BHwm1lq5.js";import{u as I}from"./useMessage-CGTQbR_M.js";const J=async()=>await y.get({url:"/bus/box-harmonic-color/get"}),K=async v=>await y.post({url:"/bus/box-harmonic-color/create",data:v}),L=async v=>await y.put({url:"/bus/box-harmonic-color/update",data:v}),N=F("div",{style:{"background-color":"#3bbb00","margin-right":"20px"}},"\u7EFF\u8272\u7684\u8303\u56F4",-1),P=F("div",{style:{"background-color":"#ffc402","margin-right":"20px"}},"\u9EC4\u8272\u7684\u8303\u56F4",-1),W=F("div",{style:{"background-color":"#fa3333","margin-right":"20px"}},"\u7EA2\u8272\u7684\u8303\u56F4",-1),X=S({name:"HarmonicColorForm",__name:"HarmonicColorForm",emits:["success"],setup(v,{expose:O,emit:k}){const{t:w}=$(),T=I(),g=m(!1),V=m(""),c=m(!1),b=m(""),e=m({id:void 0,rangeOne:void 0,rangeTwo:void 0,rangeThree:void 0,rangeFour:void 0}),p=(l,a,t)=>{if(e.value.rangeOne&&e.value.rangeTwo&&e.value.rangeThree&&e.value.rangeFour){const i=[parseFloat(e.value.rangeOne),parseFloat(e.value.rangeTwo),parseFloat(e.value.rangeThree),parseFloat(e.value.rangeFour)],f=["\u7B2C\u4E00\u7A7A","\u7B2C\u4E8C\u7A7A","\u7B2C\u4E09\u7A7A","\u7B2C\u56DB\u7A7A"];for(let u=0;u<i.length-1;u++)if(i[u]>=i[u+1])return t(new Error(`${f[u]} \u5FC5\u987B\u5C0F\u4E8E ${f[u+1]}`));t()}else t(new Error("\u8BF7\u586B\u5199\u6240\u6709\u8303\u56F4"))},U=j({rangeOne:[{validator:p,required:!0,trigger:"blur"}],rangeTwo:[{validator:p,required:!0,trigger:"blur"}],rangeThree:[{validator:p,required:!0,trigger:"blur"}],rangeFour:[{validator:p,required:!0,trigger:"blur"}]}),h=m();O({open:async l=>{g.value=!0,V.value=w("action."+l),b.value=l,E(),c.value=!0;try{var a=await J();a!=null&&(e.value=a,b.value="update"),e.value}finally{c.value=!1}}});const q=k,C=async()=>{await h.value.validate(),c.value=!0;try{const l=e.value;b.value==="create"?(await K(l),T.success(w("common.createSuccess"))):(await L(l),T.success(w("common.updateSuccess"))),g.value=!1,q("success")}finally{c.value=!1}},E=()=>{var l;e.value={id:void 0,rangeOne:void 0,rangeTwo:void 0,rangeThree:void 0,rangeFour:void 0},(l=h.value)==null||l.resetFields()};return(l,a)=>{const t=M,i=Q,f=Z,u=z,H=G,R=B;return _(),x(H,{title:r(V),modelValue:r(g),"onUpdate:modelValue":a[5]||(a[5]=o=>D(g)?g.value=o:null)},{footer:d(()=>[n(u,{onClick:C,type:"primary",disabled:r(c)},{default:d(()=>[s("\u786E \u5B9A")]),_:1},8,["disabled"]),n(u,{onClick:a[4]||(a[4]=o=>g.value=!1)},{default:d(()=>[s("\u53D6 \u6D88")]),_:1})]),default:d(()=>[A((_(),x(f,{ref_key:"formRef",ref:h,model:r(e),rules:r(U),"label-width":"100px"},{default:d(()=>[n(i,{prop:"rangeOne"},{default:d(()=>[N,s(" \u5C0F\u4E8E"),n(t,{style:{width:"11.3%"},type:"number",modelValue:r(e).rangeOne,"onUpdate:modelValue":a[0]||(a[0]=o=>r(e).rangeOne=o),placeholder:"\u8BF7\u8F93\u5165\u7B2C\u4E00\u4E2A\u5C0F\u4E8E\u7684\u8303\u56F4"},null,8,["modelValue"]),s("% ")]),_:1}),n(i,{prop:"rangeTwo"},{default:d(()=>[P,n(t,{style:{width:"11.3%"},type:"number",modelValue:r(e).rangeTwo,"onUpdate:modelValue":a[1]||(a[1]=o=>r(e).rangeTwo=o),placeholder:"\u8BF7\u8F93\u5165\u7B2C\u4E8C\u4E2A\u8303\u56F4\u7684\u6700\u5C0F\u503C"},null,8,["modelValue"]),s("%- "),n(t,{style:{width:"11.3%"},type:"number",modelValue:r(e).rangeThree,"onUpdate:modelValue":a[2]||(a[2]=o=>r(e).rangeThree=o),placeholder:"\u8BF7\u8F93\u5165\u7B2C\u4E8C\u4E2A\u8303\u56F4\u7684\u6700\u5927\u503C"},null,8,["modelValue"]),s("% ")]),_:1}),n(i,{prop:"rangeFour"},{default:d(()=>[W,s(" \u5927\u4E8E"),n(t,{style:{width:"11.3%"},type:"number",modelValue:r(e).rangeFour,"onUpdate:modelValue":a[3]||(a[3]=o=>r(e).rangeFour=o),placeholder:"\u8BF7\u8F93\u5165\u7B2C\u4E09\u4E2A\u5927\u4E8E\u7684\u8303\u56F4"},null,8,["modelValue"]),s("% ")]),_:1})]),_:1},8,["model","rules"])),[[R,r(c)]])]),_:1},8,["title","modelValue"])}}});export{X as _};
