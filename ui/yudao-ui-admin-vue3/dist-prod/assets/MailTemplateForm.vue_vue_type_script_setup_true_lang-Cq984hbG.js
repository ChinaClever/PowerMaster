import{f as k,d as A,x as V,e as r,o as Y,n as H,w as u,k as p,a as i,l as T,s as R,m as j,A as E,R as I,__tla as O}from"./index-mcOGIq4g.js";import{_ as U}from"./Dialog.vue_vue_type_style_index_0_lang-BHwm1lq5.js";import{_ as N}from"./Form-5oiF4EUX.js";import{g as q,c as z,u as B}from"./index-Dos6fkW3.js";import{d as G}from"./formatTime-f-_athMZ.js";import{e as J,u as K}from"./useCrudSchemas-BEKbr6_C.js";import{r as a}from"./formRules-CpfMmool.js";import{D as L}from"./dict-Cu4dALpk.js";import{u as Q}from"./useMessage-CGTQbR_M.js";let D,h,W=Promise.all([(()=>{try{return O}catch{}})()]).then(async()=>{let c,v,b;c=await J(),v=k({name:[a],code:[a],accountId:[a],label:[a],content:[a],params:[a],status:[a]}),b=k([{label:"\u6A21\u677F\u7F16\u7801",field:"code",isSearch:!0},{label:"\u6A21\u677F\u540D\u79F0",field:"name",isSearch:!0},{label:"\u6A21\u677F\u6807\u9898",field:"title"},{label:"\u6A21\u677F\u5185\u5BB9",field:"content",form:{component:"Editor",componentProps:{valueHtml:"",height:200}}},{label:"\u90AE\u7BB1\u8D26\u53F7",field:"accountId",width:"200px",formatter:(M,_,d)=>{var l;return(l=c.find(n=>n.id===d))==null?void 0:l.mail},search:{show:!0,component:"Select",api:()=>c,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}},form:{component:"Select",api:()=>c,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}}},{label:"\u53D1\u9001\u4EBA\u540D\u79F0",field:"nickname"},{label:"\u5F00\u542F\u72B6\u6001",field:"status",isSearch:!0,dictType:L.COMMON_STATUS,dictClass:"number"},{label:"\u5907\u6CE8",field:"remark",isTable:!1},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,formatter:G,search:{show:!0,component:"DatePicker",componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss",type:"daterange",defaultTime:[new Date("1 00:00:00"),new Date("1 23:59:59")]}}},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:h}=K(b),D=A({name:"SystemMailTemplateForm",__name:"MailTemplateForm",emits:["success"],setup(M,{expose:_,emit:d}){const{t:l}=V(),n=Q(),t=r(!1),y=r(""),s=r(!1),w=r(""),m=r();_({open:async(o,e)=>{if(t.value=!0,y.value=l("action."+o),w.value=o,e){s.value=!0;try{const f=await q(e);m.value.setValues(f)}finally{s.value=!1}}}});const g=d,P=async()=>{if(m&&await m.value.getElFormRef().validate()){s.value=!0;try{const o=m.value.formModel;w.value==="create"?(await z(o),n.success(l("common.createSuccess"))):(await B(o),n.success(l("common.updateSuccess"))),t.value=!1,g("success")}finally{s.value=!1}}};return(o,e)=>{const f=N,S=E,x=U,C=I;return Y(),H(x,{modelValue:i(t),"onUpdate:modelValue":e[1]||(e[1]=F=>j(t)?t.value=F:null),"max-height":500,scroll:!0,title:i(y),width:800},{footer:u(()=>[p(S,{disabled:i(s),type:"primary",onClick:P},{default:u(()=>[T("\u786E \u5B9A")]),_:1},8,["disabled"]),p(S,{onClick:e[0]||(e[0]=F=>t.value=!1)},{default:u(()=>[T("\u53D6 \u6D88")]),_:1})]),default:u(()=>[R(p(f,{ref_key:"formRef",ref:m,rules:i(v),schema:i(h).formSchema},null,8,["rules","schema"]),[[C,i(s)]])]),_:1},8,["modelValue","title"])}}})});export{D as _,W as __tla,h as a};
