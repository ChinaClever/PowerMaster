import{bB as U,c as Nt,aC as we,K as Ze,bC as be,P as ce,h as Zt,k as ve,bD as bn,bE as Sn,aD as Me,bd as te,bF as Su,l as ut,bG as ne,bH as mr,bI as In,bJ as xr,bK as Io,bL as wo,bM as Mo,bN as Do,ac as Te,bO as _r,bP as Iu,bQ as wu,J as Lo,ap as Se,bR as nt,bS as wn,bT as br,bU as Ve,aq as R,ao as pe,bV as Sr,ar as J,az as Q,bW as _e,av as $,bX as rt,bY as Ir,aH as Ee,aw as xe,ay as ue,at as ze,M as dt,bZ as je,b_ as Co,b$ as Pt,c0 as Mu,c1 as De,c2 as Re,c3 as To,c4 as Du,U as jt,Z as Ue,d as Ye,c5 as Mn,c6 as Ae,c7 as Lu,c8 as kt,am as le,c9 as Dn,ca as Cu,cb as Ao,cc as No,cd as Po,ce as Ln,cf as ko,cg as ht,ch as qe,ci as Tu,cj as qt,X as it,ck as Vo,cl as wr,cm as Eo,cn as Ke,as as Xe,o as zo,co as ot,cp as Kt,cq as ct,cr as Qt,cs as Au,ct as Nu,cu as Vt,cv as Ro,cw as Pu,cx as Ne,cy as Mr,w as Cn,S as Tn,a6 as pt,cz as Dr,G as ku,cA as Lr,cB as Cr,cC as An,cD as Nn,cE as Pn,cF as Vu,cG as Oo,cH as Eu,m as bt,cI as Bo,cJ as Tr,cK as Ar,cL as zu,V as kn,cM as Et,cN as ft,cO as Ru,cP as Ou,cQ as Bu,cR as Go,cS as Gu,cT as Nr,y as Fu,cU as Wu,bp as Fo,T as Hu,cV as Pr,cW as kr,cX as Uu,cY as Yu,p as Vn,B as Vr,cZ as Wo,c_ as de,c$ as Er,ax as $t,d0 as zr,d1 as Rr,d2 as Xu,d3 as Le,d4 as Zu,d5 as Jt,d6 as ju,d7 as Ho,d8 as qu,d9 as Uo,da as Yo,db as En,Q as en,dc as Ku,dd as Xo,de as Zo,df as jo,dg as zn,dh as Qu,_ as Or,v as $u,di as Ju,dj as W,aB as ed,dk as tn,dl as td,dm as qo,dn as nn,dp as Ko,dq as Qo,dr as nd,ds as rd,a8 as id,a4 as $o,dt as od,du as ad,dv as sd,dw as Jo,dx as ld,a9 as ud,dy as dd,aE as zt,A as hd,aG as ea,b as cd,n as pd,dz as fd,dA as gd,dB as yd,dC as vd,dD as md,dE as xd,aF as Rt,dF as ta,dG as _d,dH as bd,dI as Sd,dJ as na,dK as Id,dL as ra,z as wd,dM as Md,aA as rn,dN as Dd,dO as Ld,dP as Cd,dQ as on,dR as Rn,an as St,dS as Td,dT as Ad,dU as Nd,dV as Pd,dW as kd,dX as Vd,dY as Ed,dZ as zd,d_ as Rd,d$ as Od,e0 as Br,e1 as Bd,j as Gr,e2 as Gd,e3 as Fd,e4 as Wd,e5 as Hd,e6 as Ud,a1 as Yd,aQ as Xd,a as Zd,s as jd,e7 as On,e8 as qd,e9 as Kd,ea as Fr,g as Qd,eb as ia,ec as $d,ed as Jd,ee as eh,ef as th,eg as gt,eh as an,ei as nh,ej as oa,af as rh,N as ih,ek as oh,el as ah,em as aa,en as sa,eo as la,ep as sh,eq as lh,er as uh,es as dh,et as hh,eu as Bn,ev as ch,ew as ph,ex as fh,ey as gh,ez as yh,eA as vh,eB as mh,eC as xh,eD as _h,eE as ua,eF as Wr,eG as bh,eH as Sh,eI as Ih,eJ as wh,eK as da,eL as Mh,eM as Gn,eN as Hr,eO as Dh,eP as Lh,eQ as Ur,eR as Ch,bv as Th,bs as Ah,br as Nh,bt as Ph,bx as kh,bu as Vh,by as Eh,bw as zh,bm as Rh,bn as Oh,eS as Bh,bl as Gh,bk as Fh,bj as Wh,bi as Hh,bq as Uh,eT as Yh,eU as Xh,bo as Zh,bz as jh,bA as qh}from"./installCanvasRenderer-WHaFMoQ9.js";import{i as Kh,a as Qh,b as $h}from"./install-DiAPpr4Z.js";var Jh=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return U(t,r),t.prototype.getInitialData=function(e,n){return Nt(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,n,i){return i.point(n.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(we),ec=function(){},tc=function(r){function t(e){var n=r.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return U(t,r),t.prototype.getDefaultShape=function(){return new ec},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,n){var i,o=n.points,a=n.size,s=this.symbolProxy,l=s.shape,u=e.getContext?e.getContext():e,d=u&&a[0]<4,h=this.softClipShape;if(d)this._ctx=u;else{for(this._ctx=null,i=this._off;i<o.length;){var c=o[i++],g=o[i++];isNaN(c)||isNaN(g)||h&&!h.contain(c,g)||(l.x=c-a[0]/2,l.y=g-a[1]/2,l.width=a[0],l.height=a[1],s.buildPath(e,l,!0))}this.incremental&&(this._off=i,this.notClear=!0)}},t.prototype.afterBrush=function(){var e,n=this.shape,i=n.points,o=n.size,a=this._ctx,s=this.softClipShape;if(a){for(e=this._off;e<i.length;){var l=i[e++],u=i[e++];isNaN(l)||isNaN(u)||s&&!s.contain(l,u)||a.fillRect(l-o[0]/2,u-o[1]/2,o[0],o[1])}this.incremental&&(this._off=e,this.notClear=!0)}},t.prototype.findDataIndex=function(e,n){for(var i=this.shape,o=i.points,a=i.size,s=Math.max(a[0],4),l=Math.max(a[1],4),u=o.length/2-1;u>=0;u--){var d=2*u,h=o[d]-s/2,c=o[d+1]-l/2;if(e>=h&&n>=c&&e<=h+s&&n<=c+l)return u}return-1},t.prototype.contain=function(e,n){var i=this.transformCoordToLocal(e,n),o=this.getBoundingRect();return e=i[0],n=i[1],o.contain(e,n)?(this.hoverDataIdx=this.findDataIndex(e,n))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,i=n.points,o=n.size,a=o[0],s=o[1],l=1/0,u=1/0,d=-1/0,h=-1/0,c=0;c<i.length;){var g=i[c++],f=i[c++];l=Math.min(g,l),d=Math.max(g,d),u=Math.min(f,u),h=Math.max(f,h)}e=this._rect=new Ze(l-a/2,u-s/2,d-l+a,h-u+s)}return e},t}(be),nc=function(){function r(){this.group=new ce}return r.prototype.updateData=function(t,e){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,e)},r.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=2*(n.endIndex-n.startIndex),o=4*n.startIndex*2;e=new Float32Array(e.buffer,o,i)}n.setShape("points",e),n.reset()})},r.prototype.incrementalPrepareUpdate=function(t){this._clear()},r.prototype.incrementalUpdate=function(t,e,n){var i=this._newAdded[0],o=e.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,e,n)}},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new tc({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},r.prototype._setCommon=function(t,e,n){var i=e.hostModel;n=n||{};var o=e.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Zt(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<4;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ve(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(d){u.dataIndex=null;var h=t.hoverDataIdx;h>=0&&(u.dataIndex=h+(t.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),rc=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.render=function(e,n,i){var o=e.getData();this._updateSymbolDraw(o,e).updateData(o,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,n,i){var o=e.getData();this._updateSymbolDraw(o,e).incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(e,n,i){this._symbolDraw.incrementalUpdate(e,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=e.end===n.getData().count()},t.prototype.updateTransform=function(e,n,i){var o=e.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=bn("").reset(e,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var n=e.coordinateSystem;return n&&n.getArea&&n.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,n){var i=this._symbolDraw,o=n.pipelineContext.large;return i&&o===this._isLargeDraw||(i&&i.remove(),i=this._symbolDraw=o?new nc:new Sn,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Me);function ic(r,t){var e=r.isExpand?r.children:[],n=r.parentNode.children,i=r.hierNode.i?n[r.hierNode.i-1]:null;if(e.length){(function(a){for(var s=a.children,l=s.length,u=0,d=0;--l>=0;){var h=s[l];h.hierNode.prelim+=u,h.hierNode.modifier+=u,d+=h.hierNode.change,u+=h.hierNode.shift+d}})(r);var o=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;i?(r.hierNode.prelim=i.hierNode.prelim+t(r,i),r.hierNode.modifier=r.hierNode.prelim-o):r.hierNode.prelim=o}else i&&(r.hierNode.prelim=i.hierNode.prelim+t(r,i));r.parentNode.hierNode.defaultAncestor=function(a,s,l,u){if(s){for(var d=a,h=a,c=h.parentNode.children[0],g=s,f=d.hierNode.modifier,p=h.hierNode.modifier,y=c.hierNode.modifier,_=g.hierNode.modifier;g=Yr(g),h=Xr(h),g&&h;){d=Yr(d),c=Xr(c),d.hierNode.ancestor=a;var S=g.hierNode.prelim+_-h.hierNode.prelim-p+u(g,h);S>0&&(sc(ac(g,a,l),a,S),p+=S,f+=S),_+=g.hierNode.modifier,p+=h.hierNode.modifier,f+=d.hierNode.modifier,y+=c.hierNode.modifier}g&&!Yr(d)&&(d.hierNode.thread=g,d.hierNode.modifier+=_-f),h&&!Xr(c)&&(c.hierNode.thread=h,c.hierNode.modifier+=p-y,l=a)}return l}(r,i,r.parentNode.hierNode.defaultAncestor||n[0],t)}function oc(r){var t=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:t},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function ha(r){return arguments.length?r:lc}function sn(r,t){return r-=Math.PI/2,{x:t*Math.cos(r),y:t*Math.sin(r)}}function Yr(r){var t=r.children;return t.length&&r.isExpand?t[t.length-1]:r.hierNode.thread}function Xr(r){var t=r.children;return t.length&&r.isExpand?t[0]:r.hierNode.thread}function ac(r,t,e){return r.hierNode.ancestor.parentNode===t.parentNode?r.hierNode.ancestor:e}function sc(r,t,e){var n=e/(t.hierNode.i-r.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,r.hierNode.change+=n}function lc(r,t){return r.parentNode===t.parentNode?1:2}var uc=function(){return function(){this.parentPoint=[],this.childPoints=[]}}(),dc=function(r){function t(e){return r.call(this,e)||this}return U(t,r),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new uc},t.prototype.buildPath=function(e,n){var i=n.childPoints,o=i.length,a=n.parentPoint,s=i[0],l=i[o-1];if(o===1)return e.moveTo(a[0],a[1]),void e.lineTo(s[0],s[1]);var u=n.orient,d=u==="TB"||u==="BT"?0:1,h=1-d,c=ne(n.forkPosition,1),g=[];g[d]=a[d],g[h]=a[h]+(l[h]-a[h])*c,e.moveTo(a[0],a[1]),e.lineTo(g[0],g[1]),e.moveTo(s[0],s[1]),g[d]=s[d],e.lineTo(g[0],g[1]),g[d]=l[d],e.lineTo(g[0],g[1]),e.lineTo(l[0],l[1]);for(var f=1;f<o-1;f++){var p=i[f];e.moveTo(p[0],p[1]),g[d]=p[d],e.lineTo(g[0],g[1])}},t}(be),hc=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new ce,e}return U(t,r),t.prototype.init=function(e,n){this._controller=new mr(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,n,i){var o=e.getData(),a=e.layoutInfo,s=this._mainGroup;e.get("layout")==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(e,i),this._updateController(e,n,i);var l=this._data;o.diff(l).add(function(u){ca(o,u)&&pa(o,u,null,s,e)}).update(function(u,d){var h=l.getItemGraphicEl(d);ca(o,u)?pa(o,u,h,s,e):h&&ya(l,d,h,s,e)}).remove(function(u){var d=l.getItemGraphicEl(u);d&&ya(l,u,d,s,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(u,d){u.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:d})})}),this._data=o},t.prototype._updateViewCoordSys=function(e,n){var i=e.getData(),o=[];i.each(function(h){var c=i.getItemLayout(h);!c||isNaN(c.x)||isNaN(c.y)||o.push([+c.x,+c.y])});var a=[],s=[];In(o,a,s);var l=this._min,u=this._max;s[0]-a[0]==0&&(a[0]=l?l[0]:a[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-a[1]==0&&(a[1]=l?l[1]:a[1]-1,s[1]=u?u[1]:s[1]+1);var d=e.coordinateSystem=new xr;d.zoomLimit=e.get("scaleLimit"),d.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),d.setCenter(e.get("center"),n),d.setZoom(e.get("zoom")),this.group.attr({x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(e,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,d,h){var c=l.getBoundingRect();return c.applyTransform(l.transform),c.contain(d,h)&&!Io(u,i,e)}),a.enable(e.get("roam")),s.zoomLimit=e.get("scaleLimit"),s.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){wo(s,u.dx,u.dy),i.dispatchAction({seriesId:e.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Mo(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(e),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var n=e.getData(),i=this._getNodeGlobalScale(e);n.eachItemGraphicEl(function(o,a){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(e){var n=e.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1;return((n.getZoom()-1)*i+1)/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Me);function ca(r,t){var e=r.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function pa(r,t,e,n,i){var o=!e,a=r.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=a.isExpand===!1&&a.children.length!==0?l:"#fff",d=r.tree.root,h=a.parentNode===d?a:a.parentNode||a,c=r.getItemGraphicEl(h.dataIndex),g=h.getLayout(),f=c?{x:c.__oldX,y:c.__oldY,rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:g,p=a.getLayout();o?((e=new Do(r,t,null,{symbolInnerColor:u,useNameLabel:!0})).x=f.x,e.y=f.y):e.updateData(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=p.rawX,e.__radialRawY=p.rawY,n.add(e),r.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,Te(e,{x:p.x,y:p.y},i);var y=e.getSymbolPath();if(i.get("layout")==="radial"){var _=d.children[0],S=_.getLayout(),m=_.children.length,v=void 0,b=void 0;if(p.x===S.x&&a.isExpand===!0&&_.children.length){var x={x:(_.children[0].getLayout().x+_.children[m-1].getLayout().x)/2,y:(_.children[0].getLayout().y+_.children[m-1].getLayout().y)/2};(v=Math.atan2(x.y-S.y,x.x-S.x))<0&&(v=2*Math.PI+v),(b=x.x<S.x)&&(v-=Math.PI)}else(v=Math.atan2(p.y-S.y,p.x-S.x))<0&&(v=2*Math.PI+v),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(b=p.x<S.x)&&(v-=Math.PI):(b=p.x>S.x)||(v-=Math.PI);var I=b?"left":"right",w=s.getModel("label"),M=w.get("rotate"),D=M*(Math.PI/180),C=y.getTextContent();C&&(y.setTextConfig({position:w.get("position")||I,rotation:M==null?-v:D,origin:"center"}),C.setStyle("verticalAlign","middle"))}var L=s.get(["emphasis","focus"]),T=L==="relative"?_r(a.getAncestorsIndices(),a.getDescendantIndices()):L==="ancestor"?a.getAncestorsIndices():L==="descendant"?a.getDescendantIndices():null;T&&(ve(e).focus=T),function(A,k,N,V,P,z,E,B){var G=k.getModel(),Z=A.get("edgeShape"),O=A.get("layout"),F=A.getOrient(),Y=A.get(["lineStyle","curveness"]),H=A.get("edgeForkPosition"),j=G.getModel("lineStyle").getLineStyle(),q=V.__edge;if(Z==="curve")k.parentNode&&k.parentNode!==N&&(q||(q=V.__edge=new Lo({shape:Zr(O,F,Y,P,P)})),Te(q,{shape:Zr(O,F,Y,z,E)},A));else if(Z==="polyline"&&O==="orthogonal"&&k!==N&&k.children&&k.children.length!==0&&k.isExpand===!0){for(var X=k.children,K=[],re=0;re<X.length;re++){var Ie=X[re].getLayout();K.push([Ie.x,Ie.y])}q||(q=V.__edge=new dc({shape:{parentPoint:[E.x,E.y],childPoints:[[E.x,E.y]],orient:F,forkPosition:H}})),Te(q,{shape:{parentPoint:[E.x,E.y],childPoints:K}},A)}q&&(Z!=="polyline"||k.isExpand)&&(q.useStyle(Se({strokeNoScale:!0,fill:null},j)),nt(q,G,"lineStyle"),wn(q),B.add(q))}(i,a,d,e,f,g,p,n),e.__edge&&(e.onHoverStateChange=function(A){if(A!=="blur"){var k=a.parentNode&&r.getItemGraphicEl(a.parentNode.dataIndex);k&&k.hoverState===Iu||wu(e.__edge,A)}})}function fa(r,t,e,n,i){var o=ga(t.tree.root,r),a=o.source,s=o.sourceLayout,l=t.getItemGraphicEl(r.dataIndex);if(l){var u=t.getItemGraphicEl(a.dataIndex).__edge,d=l.__edge||(a.isExpand===!1||a.children.length===1?u:void 0),h=n.get("edgeShape"),c=n.get("layout"),g=n.get("orient"),f=n.get(["lineStyle","curveness"]);d&&(h==="curve"?br(d,{shape:Zr(c,g,f,s,s),style:{opacity:0}},n,{cb:function(){e.remove(d)},removeOpt:i}):h==="polyline"&&n.get("layout")==="orthogonal"&&br(d,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},n,{cb:function(){e.remove(d)},removeOpt:i}))}}function ga(r,t){for(var e,n=t.parentNode===r?t:t.parentNode||t;(e=n.getLayout())==null;)n=n.parentNode===r?n:n.parentNode||n;return{source:n,sourceLayout:e}}function ya(r,t,e,n,i){var o=r.tree.getNodeByDataIndex(t),a=ga(r.tree.root,o).sourceLayout,s={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};br(e,{x:a.x+1,y:a.y+1},i,{cb:function(){n.remove(e),r.setItemGraphicEl(t,null)},removeOpt:s}),e.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:s}),o.children.forEach(function(l){fa(l,r,n,i,s)}),fa(o,r,n,i,s)}function Zr(r,t,e,n,i){var o,a,s,l,u,d,h,c;if(r==="radial"){u=n.rawX,h=n.rawY,d=i.rawX,c=i.rawY;var g=sn(u,h),f=sn(u,h+(c-h)*e),p=sn(d,c+(h-c)*e),y=sn(d,c);return{x1:g.x||0,y1:g.y||0,x2:y.x||0,y2:y.y||0,cpx1:f.x||0,cpy1:f.y||0,cpx2:p.x||0,cpy2:p.y||0}}return u=n.x,h=n.y,d=i.x,c=i.y,t!=="LR"&&t!=="RL"||(o=u+(d-u)*e,a=h,s=d+(u-d)*e,l=c),t!=="TB"&&t!=="BT"||(o=u,a=h+(c-h)*e,s=d,l=c+(h-c)*e),{x1:u,y1:h,x2:d,y2:c,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}var Oe=Ve();function va(r){var t=r.mainData,e=r.datas;e||(e={main:t},r.datasAttr={main:"data"}),r.datas=r.mainData=null,ma(t,e,r),R(e,function(n){R(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,pe(cc,r))})}),t.wrapMethod("cloneShallow",pe(fc,r)),R(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,pe(pc,r))}),Sr(e[t.dataType]===t)}function cc(r,t){if(Oe(n=this).mainData===n){var e=J({},Oe(this).datas);e[this.dataType]=t,ma(t,e,r)}else jr(t,this.dataType,Oe(this).mainData,r);var n;return t}function pc(r,t){return r.struct&&r.struct.update(),t}function fc(r,t){return R(Oe(t).datas,function(e,n){e!==t&&jr(e.cloneShallow(),n,t,r)}),t}function gc(r){var t=Oe(this).mainData;return r==null||t==null?t:Oe(t).datas[r]}function yc(){var r=Oe(this).mainData;return r==null?[{data:r}]:Q(_e(Oe(r).datas),function(t){return{type:t,data:Oe(r).datas[t]}})}function ma(r,t,e){Oe(r).datas={},R(t,function(n,i){jr(n,i,r,e)})}function jr(r,t,e,n){Oe(e).datas[t]=r,Oe(r).mainData=e,r.dataType=t,n.struct&&(r[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=r),r.getLinkedData=gc,r.getLinkedDataAll=yc}var vc=function(){function r(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(t,e,n){xe(t)&&(n=e,e=t,t=null),ue(t=t||{})&&(t={order:t});var i,o=t.order||"preorder",a=this[t.attr||"children"];o==="preorder"&&(i=e.call(n,this));for(var s=0;!i&&s<a.length;s++)a[s].eachNode(t,e,n);o==="postorder"&&e.call(n,this)},r.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},r.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var o=n[e].getNodeById(t);if(o)return o}},r.prototype.contains=function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var o=n[e].contains(t);if(o)return o}},r.prototype.getAncestors=function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},r.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},r.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},r.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},r.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},r.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},r.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},r.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},r}(),qr=function(){function r(t){this.type="tree",this._nodes=[],this.hostModel=t}return r.prototype.eachNode=function(t,e,n){this.root.eachNode(t,e,n)},r.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},r.prototype.getNodeById=function(t){return this.root.getNodeById(t)},r.prototype.update=function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(t,e,n){var i=new r(e),o=[],a=1;(function u(d,h){var c=d.value;a=Math.max(a,$(c)?c.length:1),o.push(d);var g=new vc(rt(d.name,""),i);h?function(y,_){var S=_.children;y.parentNode!==_&&(S.push(y),y.parentNode=_)}(g,h):i.root=g,i._nodes.push(g);var f=d.children;if(f)for(var p=0;p<f.length;p++)u(f[p],g)})(t),i.root.updateDepthAndHeight(0);var s=Ir(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,l=new Ee(s,e);return l.initData(o),n&&n(l),va({mainData:l,struct:i,structAttr:"tree"}),i.update(),i},r}();function ln(r,t,e){if(r&&ze(t,r.type)>=0){var n=e.getData().tree.root,i=r.targetNode;if(ue(i)&&(i=n.getNodeById(i)),i&&n.contains(i))return{node:i};var o=r.targetNodeId;if(o!=null&&(i=n.getNodeById(o)))return{node:i}}}function xa(r){for(var t=[];r;)(r=r.parentNode)&&t.push(r);return t.reverse()}function Kr(r,t){var e=xa(r);return ze(e,t)>=0}function Fn(r,t){for(var e=[];r;){var n=r.dataIndex;e.push({name:r.name,dataIndex:n,value:t.getRawValue(n)}),r=r.parentNode}return e.reverse(),e}var mc=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return U(t,r),t.prototype.getInitialData=function(e){var n={name:e.name,children:e.data},i=e.leaves||{},o=new dt(i,this,this.ecModel),a=qr.createTree(n,this,function(u){u.wrapMethod("getItemModel",function(d,h){var c=a.getNodeByDataIndex(h);return c&&c.children.length&&c.isExpand||(d.parentModel=o),d})}),s=0;a.eachNode("preorder",function(u){u.depth>s&&(s=u.depth)});var l=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:s;return a.root.eachNode("preorder",function(u){var d=u.hostTree.data.getRawDataItem(u.dataIndex);u.isExpand=d&&d.collapsed!=null?!d.collapsed:u.depth<=l}),a.data},t.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,n,i){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(e),l=s.getValue(),u=s.name;s&&s!==a;)u=s.parentNode.name+"."+u,s=s.parentNode;return je("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(e){var n=r.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=Fn(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(we);function un(r,t){for(var e,n=[r];e=n.pop();)if(t(e),e.isExpand){var i=e.children;if(i.length)for(var o=i.length-1;o>=0;o--)n.push(i[o])}}function xc(r,t){r.eachSeriesByType("tree",function(e){(function(n,i){var o=function(x,I){return ut(x.getBoxLayoutParams(),{width:I.getWidth(),height:I.getHeight()})}(n,i);n.layoutInfo=o;var a=n.get("layout"),s=0,l=0,u=null;a==="radial"?(s=2*Math.PI,l=Math.min(o.height,o.width)/2,u=ha(function(x,I){return(x.parentNode===I.parentNode?1:2)/x.depth})):(s=o.width,l=o.height,u=ha());var d=n.getData().tree.root,h=d.children[0];if(h){(function(x){var I=x;I.hierNode={defaultAncestor:null,ancestor:I,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var w,M,D=[I];w=D.pop();)if(M=w.children,w.isExpand&&M.length)for(var C=M.length-1;C>=0;C--){var L=M[C];L.hierNode={defaultAncestor:null,ancestor:L,prelim:0,modifier:0,change:0,shift:0,i:C,thread:null},D.push(L)}})(d),function(x,I,w){for(var M,D=[x],C=[];M=D.pop();)if(C.push(M),M.isExpand){var L=M.children;if(L.length)for(var T=0;T<L.length;T++)D.push(L[T])}for(;M=C.pop();)I(M,w)}(h,ic,u),d.hierNode.modifier=-h.hierNode.prelim,un(h,oc);var c=h,g=h,f=h;un(h,function(x){var I=x.getLayout().x;I<c.getLayout().x&&(c=x),I>g.getLayout().x&&(g=x),x.depth>f.depth&&(f=x)});var p=c===g?1:u(c,g)/2,y=p-c.getLayout().x,_=0,S=0,m=0,v=0;if(a==="radial")_=s/(g.getLayout().x+p+y),S=l/(f.depth-1||1),un(h,function(x){m=(x.getLayout().x+y)*_,v=(x.depth-1)*S;var I=sn(m,v);x.setLayout({x:I.x,y:I.y,rawX:m,rawY:v},!0)});else{var b=n.getOrient();b==="RL"||b==="LR"?(S=l/(g.getLayout().x+p+y),_=s/(f.depth-1||1),un(h,function(x){v=(x.getLayout().x+y)*S,m=b==="LR"?(x.depth-1)*_:s-(x.depth-1)*_,x.setLayout({x:m,y:v},!0)})):b!=="TB"&&b!=="BT"||(_=s/(g.getLayout().x+p+y),S=l/(f.depth-1||1),un(h,function(x){m=(x.getLayout().x+y)*_,v=b==="TB"?(x.depth-1)*S:l-(x.depth-1)*S,x.setLayout({x:m,y:v},!0)}))}}})(e,t)})}function _c(r){r.eachSeriesByType("tree",function(t){var e=t.getData();e.tree.eachNode(function(n){var i=n.getModel().getModel("itemStyle").getItemStyle(),o=e.ensureUniqueItemVisual(n.dataIndex,"style");J(o,i)})})}var _a=["treemapZoomToNode","treemapRender","treemapMove"];function ba(r){var t=r.getData().tree,e={};t.eachNode(function(n){for(var i=n;i&&i.depth>1;)i=i.parentNode;var o=Mu(r.ecModel,i.name||i.dataIndex+"",e);n.setVisual("decal",o)})}var bc=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return U(t,r),t.prototype.getInitialData=function(e,n){var i={name:e.name,children:e.data};Sa(i);var o=e.levels||[],a=this.designatedVisualItemStyle={},s=new dt({itemStyle:a},this,n);o=e.levels=function(d,h){var c,g,f=Re(h.get("color")),p=Re(h.get(["aria","decal","decals"]));if(f){d=d||[],R(d,function(_){var S=new dt(_),m=S.get("color"),v=S.get("decal");(S.get(["itemStyle","color"])||m&&m!=="none")&&(c=!0),(S.get(["itemStyle","decal"])||v&&v!=="none")&&(g=!0)});var y=d[0]||(d[0]={});return c||(y.color=f.slice()),!g&&p&&(y.decal=p.slice()),d}}(o,n);var l=Q(o||[],function(d){return new dt(d,s,n)},this),u=qr.createTree(i,this,function(d){d.wrapMethod("getItemModel",function(h,c){var g=u.getNodeByDataIndex(c),f=g?l[g.depth]:null;return h.parentModel=f||s,h})});return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,n,i){var o=this.getData(),a=this.getRawValue(e),s=o.getName(e);return je("nameValue",{name:s,value:a})},t.prototype.getDataParams=function(e){var n=r.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=Fn(i,this),n.treePathInfo=n.treeAncestors,n},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},J(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var n=this._idIndexMap;n||(n=this._idIndexMap=De(),this._idIndexMapCount=0);var i=n.get(e);return i==null&&n.set(e,i=this._idIndexMapCount++),i},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;e&&(e===n||n.contains(e))||(this._viewRoot=n)},t.prototype.enableAriaDecal=function(){ba(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(we);function Sa(r){var t=0;R(r.children,function(n){Sa(n);var i=n.value;$(i)&&(i=i[0]),t+=i});var e=r.value;$(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),$(r.value)?r.value[0]=e:r.value=e}var Sc=function(){function r(t){this.group=new ce,t.add(this.group)}return r.prototype.render=function(t,e,n,i){var o=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),o.get("show")&&n){var s=o.getModel("itemStyle"),l=o.getModel("emphasis"),u=s.getModel("textStyle"),d=l.getModel(["itemStyle","textStyle"]),h={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,h,u),this._renderContent(t,h,s,l,u,d,i),To(a,h.pos,h.box)}},r.prototype._prepare=function(t,e,n){for(var i=t;i;i=i.parentNode){var o=rt(i.getModel().get("name"),""),a=n.getTextRect(o),s=Math.max(a.width+16,e.emptyItemWidth);e.totalWidth+=s+8,e.renderList.push({node:i,text:o,width:s})}},r.prototype._renderContent=function(t,e,n,i,o,a,s){for(var l=0,u=e.emptyItemWidth,d=t.get(["breadcrumb","height"]),h=Du(e.pos,e.box),c=e.totalWidth,g=e.renderList,f=i.getModel("itemStyle").getItemStyle(),p=g.length-1;p>=0;p--){var y=g[p],_=y.node,S=y.width,m=y.text;c>h.width&&(c-=S-u,S=u,m=null);var v=new jt({shape:{points:Ic(l,0,S,d,p===g.length-1,p===0)},style:Se(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Ue({style:Ye(o,{text:m})}),textConfig:{position:"inside"},z2:1e4*Mn,onclick:pe(s,_)});v.disableLabelAnimation=!0,v.getTextContent().ensureState("emphasis").style=Ye(a,{text:m}),v.ensureState("emphasis").style=f,Ae(v,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(v),wc(v,t,_),l+=S+8}},r.prototype.remove=function(){this.group.removeAll()},r}();function Ic(r,t,e,n,i,o){var a=[[i?r:r-5,t],[r+e,t],[r+e,t+n],[i?r:r-5,t+n]];return!o&&a.splice(2,0,[r+e+5,t+n/2]),!i&&a.push([r,t+n/2]),a}function wc(r,t,e){ve(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&Fn(e,t)}}var Mc=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(t,e,n,i,o){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:n,delay:i,easing:o}),!0)},r.prototype.finished=function(t){return this._finishedCallback=t,this},r.prototype.start=function(){for(var t=this,e=this._storage.length,n=function(){--e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},i=0,o=this._storage.length;i<o;i++){var a=this._storage[i];a.el.animateTo(a.target,{duration:a.duration,delay:a.delay,easing:a.easing,setToFinal:!0,done:n,aborted:n})}return this},r}(),Qr=ce,Ia=it,wa="label",Ma="upperLabel",Dc=10*Mn,Lc=2*Mn,Cc=3*Mn,It=Lu([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Da=function(r){var t=It(r);return t.stroke=t.fill=t.lineWidth=null,t},Wn=Ve(),Tc=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage={nodeGroup:[],background:[],content:[]},e}return U(t,r),t.prototype.render=function(e,n,i,o){var a=n.findComponents({mainType:"series",subType:"treemap",query:o});if(!(ze(a,e)<0)){this.seriesModel=e,this.api=i,this.ecModel=n;var s=ln(o,["treemapZoomToNode","treemapRootToNode"],e),l=o&&o.type,u=e.layoutInfo,d=!this._oldTree,h=this._storage,c=l==="treemapRootToNode"&&s&&h?{rootNodeGroup:h.nodeGroup[s.node.getRawIndex()],direction:o.direction}:null,g=this._giveContainerGroup(u),f=e.get("animation"),p=this._doRender(g,e,c);!f||d||l&&l!=="treemapZoomToNode"&&l!=="treemapRootToNode"?p.renderFinally():this._doAnimation(g,p,e,c),this._resetController(i),this._renderBreadcrumb(e,i,s)}},t.prototype._giveContainerGroup=function(e){var n=this._containerGroup;return n||(n=this._containerGroup=new Qr,this._initEvents(n),this.group.add(n)),n.x=e.x,n.y=e.y,n},t.prototype._doRender=function(e,n,i){var o=n.getData().tree,a=this._oldTree,s={nodeGroup:[],background:[],content:[]},l={nodeGroup:[],background:[],content:[]},u=this._storage,d=[];function h(p,y,_,S){return function(m,v,b,x,I,w,M,D,C,L){if(!M)return;var T=M.getLayout(),A=m.getData(),k=M.getModel();if(A.setItemGraphicEl(M.dataIndex,null),!T||!T.isInView)return;var N=T.width,V=T.height,P=T.borderWidth,z=T.invisible,E=M.getRawIndex(),B=D&&D.getRawIndex(),G=M.viewChildren,Z=T.upperHeight,O=G&&G.length,F=k.getModel("itemStyle"),Y=k.getModel(["emphasis","itemStyle"]),H=k.getModel(["blur","itemStyle"]),j=k.getModel(["select","itemStyle"]),q=F.get("borderRadius")||0,X=vr("nodeGroup",Qr);if(!X)return;if(C.add(X),X.x=T.x||0,X.y=T.y||0,X.markRedraw(),Wn(X).nodeWidth=N,Wn(X).nodeHeight=V,T.isAboveViewRoot)return X;var K=vr("background",Ia,L,Lc);K&&fe(X,K,O&&T.upperLabelHeight);var re=k.getModel("emphasis"),Ie=re.get("focus"),Fe=re.get("blurScope"),Pe=re.get("disabled"),ae=Ie==="ancestor"?M.getAncestorsIndices():Ie==="descendant"?M.getDescendantIndices():Ie;if(O)Po(X)&&Ln(X,!1),K&&(Ln(K,!Pe),A.setItemGraphicEl(M.dataIndex,K),ko(K,ae,Fe));else{var ie=vr("content",Ia,L,Cc);ie&&We(X,ie),K.disableMorphing=!0,K&&Po(K)&&Ln(K,!1),Ln(X,!Pe),A.setItemGraphicEl(M.dataIndex,X),ko(X,ae,Fe)}return X;function fe(oe,ee,ge){var se=ve(ee);if(se.dataIndex=M.dataIndex,se.seriesIndex=m.seriesIndex,ee.setShape({x:0,y:0,width:N,height:V,r:q}),z)et(ee);else{ee.invisible=!1;var ye=M.getVisual("style"),Ce=ye.stroke,ke=Da(F);ke.fill=Ce;var he=It(Y);he.fill=Y.get("borderColor");var He=It(H);He.fill=H.get("borderColor");var tt=It(j);if(tt.fill=j.get("borderColor"),ge){var At=N-2*P;xo(ee,Ce,ye.opacity,{x:P,y:0,width:At,height:Z})}else ee.removeTextContent();ee.setStyle(ke),ee.ensureState("emphasis").style=he,ee.ensureState("blur").style=He,ee.ensureState("select").style=tt,wn(ee)}oe.add(ee)}function We(oe,ee){var ge=ve(ee);ge.dataIndex=M.dataIndex,ge.seriesIndex=m.seriesIndex;var se=Math.max(N-2*P,0),ye=Math.max(V-2*P,0);if(ee.culling=!0,ee.setShape({x:P,y:P,width:se,height:ye,r:q}),z)et(ee);else{ee.invisible=!1;var Ce=M.getVisual("style"),ke=Ce.fill,he=Da(F);he.fill=ke,he.decal=Ce.decal;var He=It(Y),tt=It(H),At=It(j);xo(ee,ke,Ce.opacity,null),ee.setStyle(he),ee.ensureState("emphasis").style=He,ee.ensureState("blur").style=tt,ee.ensureState("select").style=At,wn(ee)}oe.add(ee)}function et(oe){!oe.invisible&&w.push(oe)}function xo(oe,ee,ge,se){var ye=k.getModel(se?Ma:wa),Ce=rt(k.get("name"),null),ke=ye.getShallow("show");ht(oe,qe(k,se?Ma:wa),{defaultText:ke?Ce:null,inheritColor:ee,defaultOpacity:ge,labelFetcher:m,labelDataIndex:M.dataIndex});var he=oe.getTextContent();if(he){var He=he.style,tt=Tu(He.padding||0);se&&(oe.setTextConfig({layoutRect:se}),he.disableLabelLayout=!0),he.beforeUpdate=function(){var bo=Math.max((se?se.width:oe.shape.width)-tt[1]-tt[3],0),So=Math.max((se?se.height:oe.shape.height)-tt[0]-tt[2],0);He.width===bo&&He.height===So||he.setStyle({width:bo,height:So})},He.truncateMinChar=2,He.lineOverflow="truncate",_o(He,se,T);var At=he.getState("emphasis");_o(At?At.style:null,se,T)}}function _o(oe,ee,ge){var se=oe?oe.text:null;if(!ee&&ge.isLeafRoot&&se!=null){var ye=m.get("drillDownIcon",!0);oe.text=ye?ye+" "+se:se}}function vr(oe,ee,ge,se){var ye=B!=null&&b[oe][B],Ce=I[oe];return ye?(b[oe][B]=null,_u(Ce,ye)):z||((ye=new ee)instanceof qt&&(ye.z2=function(ke,he){return ke*Dc+he}(ge,se)),bu(Ce,ye)),v[oe][E]=ye}function _u(oe,ee){var ge=oe[E]={};ee instanceof Qr?(ge.oldX=ee.x,ge.oldY=ee.y):ge.oldShape=J({},ee.shape)}function bu(oe,ee){var ge=oe[E]={},se=M.parentNode,ye=ee instanceof ce;if(se&&(!x||x.direction==="drillDown")){var Ce=0,ke=0,he=I.background[se.getRawIndex()];!x&&he&&he.oldShape&&(Ce=he.oldShape.width,ke=he.oldShape.height),ye?(ge.oldX=0,ge.oldY=ke):ge.oldShape={x:Ce,y:ke,width:0,height:0}}ge.fadein=!ye}}(n,l,u,i,s,d,p,y,_,S)}(function p(y,_,S,m,v){m?(_=y,R(y,function(I,w){!I.isRemoved()&&x(w,w)})):new kt(_,y,b,b).add(x).update(x).remove(pe(x,null)).execute();function b(I){return I.getId()}function x(I,w){var M=I!=null?y[I]:null,D=w!=null?_[w]:null,C=h(M,D,S,v);C&&p(M&&M.viewChildren||[],D&&D.viewChildren||[],C,m,v+1)}})(o.root?[o.root]:[],a&&a.root?[a.root]:[],e,o===a||!a,0);var c=function(p){var y={nodeGroup:[],background:[],content:[]};return p&&R(p,function(_,S){var m=y[S];R(_,function(v){v&&(m.push(v),Wn(v).willDelete=!0)})}),y}(u);if(this._oldTree=o,this._storage=l,this._controllerHost){var g=this.seriesModel.layoutInfo,f=o.root.getLayout();f.width===g.width&&f.height===g.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:c,renderFinally:function(){R(c,function(p){R(p,function(y){y.parent&&y.parent.remove(y)})}),R(d,function(p){p.invisible=!0,p.dirty()})}}},t.prototype._doAnimation=function(e,n,i,o){var a=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(xe(a)?0:a)||0,u=(xe(s)?null:s)||"cubicOut",d=new Mc;R(n.willDeleteEls,function(h,c){R(h,function(g,f){if(!g.invisible){var p,y=g.parent,_=Wn(y);if(o&&o.direction==="drillDown")p=y===o.rootNodeGroup?{shape:{x:0,y:0,width:_.nodeWidth,height:_.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var S=0,m=0;_.willDelete||(S=_.nodeWidth/2,m=_.nodeHeight/2),p=c==="nodeGroup"?{x:S,y:m,style:{opacity:0}}:{shape:{x:S,y:m,width:0,height:0},style:{opacity:0}}}p&&d.add(g,p,l,0,u)}})}),R(this._storage,function(h,c){R(h,function(g,f){var p=n.lastsForAnimation[c][f],y={};p&&(g instanceof ce?p.oldX!=null&&(y.x=g.x,y.y=g.y,g.x=p.oldX,g.y=p.oldY):(p.oldShape&&(y.shape=J({},g.shape),g.setShape(p.oldShape)),p.fadein?(g.setStyle("opacity",0),y.style={opacity:1}):g.style.opacity!==1&&(y.style={opacity:1})),d.add(g,y,l,0,u))})},this),this._state="animating",d.finished(le(function(){this._state="ready",n.renderFinally()},this)).start()},t.prototype._resetController=function(e){var n=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),n||((n=this._controller=new mr(e.getZr())).enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),n.on("pan",le(this._onPan,this)),n.on("zoom",le(this._onZoom,this)));var o=new Ze(0,0,e.getWidth(),e.getHeight());n.setPointerChecker(function(a,s,l){return o.contain(s,l)})},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var n=this.seriesModel.getData().tree.root;if(!n)return;var i=n.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+e.dx,y:i.y+e.dy,width:i.width,height:i.height}})}},t.prototype._onZoom=function(e){var n=e.originX,i=e.originY,o=e.scale;if(this._state!=="animating"){var a=this.seriesModel.getData().tree.root;if(!a)return;var s=a.getLayout();if(!s)return;var l,u=new Ze(s.x,s.y,s.width,s.height),d=this._controllerHost;l=d.zoomLimit;var h=d.zoom=d.zoom||1;if(h*=o,l){var c=l.min||0,g=l.max||1/0;h=Math.max(Math.min(g,h),c)}var f=h/d.zoom;d.zoom=h;var p=this.seriesModel.layoutInfo;n-=p.x,i-=p.y;var y=No();Dn(y,y,[-n,-i]),Cu(y,y,[f,f]),Dn(y,y,[n,i]),u.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:u.x,y:u.y,width:u.width,height:u.height}})}},t.prototype._initEvents=function(e){var n=this;e.on("click",function(i){if(n._state==="ready"){var o=n.seriesModel.get("nodeClick",!0);if(o){var a=n.findTarget(i.offsetX,i.offsetY);if(a){var s=a.node;if(s.getLayout().isLeafRoot)n._rootToNode(a);else if(o==="zoomToNode")n._zoomToNode(a);else if(o==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),d=l.get("target",!0)||"blank";u&&Ao(u,d)}}}}},this)},t.prototype._renderBreadcrumb=function(e,n,i){var o=this;i||(i=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2))||(i={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new Sc(this.group))).render(e,n,i.node,function(a){o._state!=="animating"&&(Kr(e.getViewRoot(),a)?o._rootToNode({node:a}):o._zoomToNode({node:a}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,n){var i;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(o){var a=this._storage.background[o.getRawIndex()];if(a){var s=a.transformCoordToLocal(e,n),l=a.shape;if(!(l.x<=s[0]&&s[0]<=l.x+l.width&&l.y<=s[1]&&s[1]<=l.y+l.height))return!1;i={node:o,offsetX:s[0],offsetY:s[1]}}},this),i},t.type="treemap",t}(Me),La=Ve();const Ac={seriesType:"treemap",reset:function(r){var t=r.getData().tree.root;t.isRemoved()||Ca(t,{},r.getViewRoot().getAncestors(),r)}};function Ca(r,t,e,n){var i=r.getModel(),o=r.getLayout(),a=r.hostTree.data;if(o&&!o.invisible&&o.isInView){var s,l=i.getModel("itemStyle"),u=function(p,y,_){var S=J({},y),m=_.designatedVisualItemStyle;return R(["color","colorAlpha","colorSaturation"],function(v){m[v]=y[v];var b=p.get(v);m[v]=null,b!=null&&(S[v]=b)}),S}(l,t,n),d=a.ensureUniqueItemVisual(r.dataIndex,"style"),h=l.get("borderColor"),c=l.get("borderColorSaturation");c!=null&&(h=function(p,y){return y!=null?Vo(y,null,null,p):null}(c,s=Ta(u))),d.stroke=h;var g=r.viewChildren;if(g&&g.length){var f=function(p,y,_,S,m,v){if(!(!v||!v.length)){var b=Jr(y,"color")||m.color!=null&&m.color!=="none"&&(Jr(y,"colorAlpha")||Jr(y,"colorSaturation"));if(b){var x=y.get("visualMin"),I=y.get("visualMax"),w=_.dataExtent.slice();x!=null&&x<w[0]&&(w[0]=x),I!=null&&I>w[1]&&(w[1]=I);var M=y.get("colorMappingBy"),D={type:b.name,dataExtent:w,visual:b.range};D.type!=="color"||M!=="index"&&M!=="id"?D.mappingMethod="linear":(D.mappingMethod="category",D.loop=!0);var C=new Eo(D);return La(C).drColorMappingBy=M,C}}}(0,i,o,0,u,g);R(g,function(p,y){if(p.depth>=e.length||p===e[p.depth]){var _=function(S,m,v,b,x,I){var w=J({},m);if(x){var M=x.type,D=M==="color"&&La(x).drColorMappingBy,C=D==="index"?b:D==="id"?I.mapIdToIndex(v.getId()):v.getValue(S.get("visualDimension"));w[M]=x.mapValueToVisual(C)}return w}(i,u,p,y,f,n);Ca(p,_,e,n)}})}else s=Ta(u),d.fill=s}}function Ta(r){var t=$r(r,"color");if(t){var e=$r(r,"colorAlpha"),n=$r(r,"colorSaturation");return n&&(t=Vo(t,null,null,n)),e&&(t=wr(t,e)),t}}function $r(r,t){var e=r[t];if(e!=null&&e!=="none")return e}function Jr(r,t){var e=r.get(t);return $(e)&&e.length?{name:t,range:e}:null}var dn=Math.max,Hn=Math.min,Aa=Ke,ei=R,Na=["itemStyle","borderWidth"],Nc=["itemStyle","gapWidth"],Pc=["upperLabel","show"],kc=["upperLabel","height"];const Vc={seriesType:"treemap",reset:function(r,t,e,n){var i=e.getWidth(),o=e.getHeight(),a=r.option,s=ut(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),l=a.size||[],u=ne(Aa(s.width,l[0]),i),d=ne(Aa(s.height,l[1]),o),h=n&&n.type,c=ln(n,["treemapZoomToNode","treemapRootToNode"],r),g=h==="treemapRender"||h==="treemapMove"?n.rootRect:null,f=r.getViewRoot(),p=xa(f);if(h!=="treemapMove"){var y=h==="treemapZoomToNode"?function(b,x,I,w,M){var D,C=(x||{}).node,L=[w,M];if(!C||C===I)return L;for(var T=w*M,A=T*b.option.zoomToNodeRatio;D=C.parentNode;){for(var k=0,N=D.children,V=0,P=N.length;V<P;V++)k+=N[V].getValue();var z=C.getValue();if(z===0)return L;A*=k/z;var E=D.getModel(),B=E.get(Na);(A+=4*B*B+(3*B+Math.max(B,Ea(E)))*Math.pow(A,.5))>zo&&(A=zo),C=D}A<T&&(A=T);var G=Math.pow(A/T,.5);return[w*G,M*G]}(r,c,f,u,d):g?[g.width,g.height]:[u,d],_=a.sort;_&&_!=="asc"&&_!=="desc"&&(_="desc");var S={squareRatio:a.squareRatio,sort:_,leafDepth:a.leafDepth};f.hostTree.clearLayouts();var m={x:0,y:0,width:y[0],height:y[1],area:y[0]*y[1]};f.setLayout(m),Pa(f,S,!1,0),m=f.getLayout(),ei(p,function(b,x){var I=(p[x+1]||f).getValue();b.setLayout(J({dataExtent:[I,I],borderWidth:0,upperHeight:0},m))})}var v=r.getData().tree.root;v.setLayout(function(b,x,I){if(x)return{x:x.x,y:x.y};var w={x:0,y:0};if(!I)return w;var M=I.node,D=M.getLayout();if(!D)return w;for(var C=[D.width/2,D.height/2],L=M;L;){var T=L.getLayout();C[0]+=T.x,C[1]+=T.y,L=L.parentNode}return{x:b.width/2-C[0],y:b.height/2-C[1]}}(s,g,c),!0),r.setLayoutInfo(s),Va(v,new Ze(-s.x,-s.y,i,o),p,f,0)}};function Pa(r,t,e,n){var i,o;if(!r.isRemoved()){var a=r.getLayout();i=a.width,o=a.height;var s=r.getModel(),l=s.get(Na),u=s.get(Nc)/2,d=Ea(s),h=Math.max(l,d),c=l-u,g=h-u;r.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:d},!0);var f=(i=dn(i-2*c,0))*(o=dn(o-c-g,0)),p=function(M,D,C,L,T,A){var k=M.children||[],N=L.sort;N!=="asc"&&N!=="desc"&&(N=null);var V=L.leafDepth!=null&&L.leafDepth<=A;if(T&&!V)return M.viewChildren=[];k=Xe(k,function(G){return!G.isRemoved()}),function(G,Z){Z&&G.sort(function(O,F){var Y=Z==="asc"?O.getValue()-F.getValue():F.getValue()-O.getValue();return Y===0?Z==="asc"?O.dataIndex-F.dataIndex:F.dataIndex-O.dataIndex:Y})}(k,N);var P=function(G,Z,O){for(var F=0,Y=0,H=Z.length;Y<H;Y++)F+=Z[Y].getValue();var j,q=G.get("visualDimension");return Z&&Z.length?q==="value"&&O?(j=[Z[Z.length-1].getValue(),Z[0].getValue()],O==="asc"&&j.reverse()):(j=[1/0,-1/0],ei(Z,function(X){var K=X.getValue(q);K<j[0]&&(j[0]=K),K>j[1]&&(j[1]=K)})):j=[NaN,NaN],{sum:F,dataExtent:j}}(D,k,N);if(P.sum===0)return M.viewChildren=[];if(P.sum=function(G,Z,O,F,Y){if(!F)return O;for(var H=G.get("visibleMin"),j=Y.length,q=j,X=j-1;X>=0;X--){var K=Y[F==="asc"?j-X-1:X].getValue();K/O*Z<H&&(q=X,O-=K)}return F==="asc"?Y.splice(0,j-q):Y.splice(q,j-q),O}(D,C,P.sum,N,k),P.sum===0)return M.viewChildren=[];for(var z=0,E=k.length;z<E;z++){var B=k[z].getValue()/P.sum*C;k[z].setLayout({area:B})}return V&&(k.length&&M.setLayout({isLeafRoot:!0},!0),k.length=0),M.viewChildren=k,M.setLayout({dataExtent:P.dataExtent},!0),k}(r,s,f,t,e,n);if(p.length){var y={x:c,y:g,width:i,height:o},_=Hn(i,o),S=1/0,m=[];m.area=0;for(var v=0,b=p.length;v<b;){var x=p[v];m.push(x),m.area+=x.getLayout().area;var I=Ec(m,_,t.squareRatio);I<=S?(v++,S=I):(m.area-=m.pop().getLayout().area,ka(m,_,y,u,!1),_=Hn(y.width,y.height),m.length=m.area=0,S=1/0)}if(m.length&&ka(m,_,y,u,!0),!e){var w=s.get("childrenVisibleMin");w!=null&&f<w&&(e=!0)}for(v=0,b=p.length;v<b;v++)Pa(p[v],t,e,n+1)}}}function Ec(r,t,e){for(var n=0,i=1/0,o=0,a=void 0,s=r.length;o<s;o++)(a=r[o].getLayout().area)&&(a<i&&(i=a),a>n&&(n=a));var l=r.area*r.area,u=t*t*e;return l?dn(u*n/l,l/(u*i)):1/0}function ka(r,t,e,n,i){var o=t===e.width?0:1,a=1-o,s=["x","y"],l=["width","height"],u=e[s[o]],d=t?r.area/t:0;(i||d>e[l[a]])&&(d=e[l[a]]);for(var h=0,c=r.length;h<c;h++){var g=r[h],f={},p=d?g.getLayout().area/d:0,y=f[l[a]]=dn(d-2*n,0),_=e[s[o]]+e[l[o]]-u,S=h===c-1||_<p?_:p,m=f[l[o]]=dn(S-2*n,0);f[s[a]]=e[s[a]]+Hn(n,y/2),f[s[o]]=u+Hn(n,m/2),u+=S,g.setLayout(f,!0)}e[s[a]]+=d,e[l[a]]-=d}function Va(r,t,e,n,i){var o=r.getLayout(),a=e[i],s=a&&a===r;if(!(a&&!s||i===e.length&&r!==n)){r.setLayout({isInView:!0,invisible:!s&&!t.intersect(o),isAboveViewRoot:s},!0);var l=new Ze(t.x-o.x,t.y-o.y,t.width,t.height);ei(r.viewChildren||[],function(u){Va(u,l,e,n,i+1)})}}function Ea(r){return r.get(Pc)?r.get(kc):0}function zc(r){var t=r.findComponents({mainType:"legend"});t&&t.length&&r.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),i=e.getGraph().data,o=n.mapArray(n.getName);i.filterSelf(function(a){var s=i.getItemModel(a).getShallow("category");if(s!=null){ot(s)&&(s=o[s]);for(var l=0;l<t.length;l++)if(!t[l].isSelected(s))return!1}return!0})})}function Rc(r){var t={};r.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),i=e.getData(),o={};n.each(function(a){var s=n.getName(a);o["ec-"+s]=a;var l=n.getItemModel(a),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=e.getColorFromPalette(s,t)),n.setItemVisual(a,"style",u);for(var d=["symbol","symbolSize","symbolKeepAspect"],h=0;h<d.length;h++){var c=l.getShallow(d[h],!0);c!=null&&n.setItemVisual(a,d[h],c)}}),n.count()&&i.each(function(a){var s=i.getItemModel(a).getShallow("category");if(s!=null){ue(s)&&(s=o["ec-"+s]);var l=n.getItemVisual(s,"style"),u=i.ensureUniqueItemVisual(a,"style");J(u,l);for(var d=["symbol","symbolSize","symbolKeepAspect"],h=0;h<d.length;h++)i.setItemVisual(a,d[h],n.getItemVisual(s,d[h]))}})})}function Un(r){return r instanceof Array||(r=[r,r]),r}function Oc(r){r.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),i=Un(t.get("edgeSymbol")),o=Un(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",o&&o[0]),n.setVisual("toSymbolSize",o&&o[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each(function(a){var s=n.getItemModel(a),l=e.getEdgeByIndex(a),u=Un(s.getShallow("symbol",!0)),d=Un(s.getShallow("symbolSize",!0)),h=s.getModel("lineStyle").getLineStyle(),c=n.ensureUniqueItemVisual(a,"style");switch(J(c,h),c.stroke){case"source":var g=l.node1.getVisual("style");c.stroke=g&&g.fill;break;case"target":g=l.node2.getVisual("style"),c.stroke=g&&g.fill}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),d[0]&&l.setVisual("fromSymbolSize",d[0]),d[1]&&l.setVisual("toSymbolSize",d[1])})})}var ti="-->",Yn=function(r){return r.get("autoCurveness")||null},za=function(r,t){var e=Yn(r),n=20,i=[];if(ot(e))n=e;else if($(e))return void(r.__curvenessList=e);t>n&&(n=t);var o=n%2?n+2:n+3;i=[];for(var a=0;a<o;a++)i.push((a%2?a+1:a)/10*(a%2?-1:1));r.__curvenessList=i},hn=function(r,t,e){var n=[r.id,r.dataIndex].join("."),i=[t.id,t.dataIndex].join(".");return[e.uid,n,i].join(ti)},Ra=function(r){var t=r.split(ti);return[t[0],t[2],t[1]].join(ti)},Bc=function(r,t){var e=hn(r.node1,r.node2,t);return t.__edgeMap[e]},Gc=function(r,t){return ni(hn(r.node1,r.node2,t),t)+ni(hn(r.node2,r.node1,t),t)},ni=function(r,t){var e=t.__edgeMap;return e[r]?e[r].length:0};function ri(r,t,e,n){var i=Yn(t),o=$(i);if(!i)return null;var a=Bc(r,t);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===e){s=l;break}var u=Gc(r,t);za(t,u),r.lineStyle=r.lineStyle||{};var d=hn(r.node1,r.node2,t),h=t.__curvenessList,c=o||u%2?0:1;if(a.isForward)return h[c+s];var g=Ra(d),f=ni(g,t),p=h[s+f+c];return n?o?i&&i[0]===0?(f+c)%2?p:-p:((f%2?0:1)+c)%2?p:-p:(f+c)%2?p:-p:h[s+f+c]}function Oa(r){var t=r.coordinateSystem;if(!t||t.type==="view"){var e=r.getGraph();e.eachNode(function(n){var i=n.getModel();n.setLayout([+i.get("x"),+i.get("y")])}),ii(e,r)}}function ii(r,t){r.eachEdge(function(e,n){var i=Kt(e.getModel().get(["lineStyle","curveness"]),-ri(e,t,n,!0),0),o=ct(e.node1.getLayout()),a=ct(e.node2.getLayout()),s=[o,a];+i&&s.push([(o[0]+a[0])/2-(o[1]-a[1])*i,(o[1]+a[1])/2-(a[0]-o[0])*i]),e.setLayout(s)})}function Fc(r,t){r.eachSeriesByType("graph",function(e){var n=e.get("layout"),i=e.coordinateSystem;if(i&&i.type!=="view"){var o=e.getData(),a=[];R(i.dimensions,function(c){a=a.concat(o.mapDimensionsAll(c))});for(var s=0;s<o.count();s++){for(var l=[],u=!1,d=0;d<a.length;d++){var h=o.get(a[d],s);isNaN(h)||(u=!0),l.push(h)}u?o.setItemLayout(s,i.dataToPoint(l)):o.setItemLayout(s,[NaN,NaN])}ii(o.graph,e)}else n&&n!=="none"||Oa(e)})}function cn(r){var t=r.coordinateSystem;if(t.type!=="view")return 1;var e=r.option.nodeScaleRatio,n=t.scaleX;return((t.getZoom()-1)*e+1)/n}function pn(r){var t=r.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var Ba=Math.PI,oi=[];function ai(r,t,e,n){var i=r.coordinateSystem;if(!i||i.type==="view"){var o=i.getBoundingRect(),a=r.getData(),s=a.graph,l=o.width/2+o.x,u=o.height/2+o.y,d=Math.min(o.width,o.height)/2,h=a.count();if(a.setLayout({cx:l,cy:u}),h){if(e){var c=i.pointToData(n),g=c[0],f=c[1],p=[g-l,f-u];Qt(p,p),Au(p,p,d),e.setLayout([l+p[0],u+p[1]],!0),Ga(e,r.get(["circular","rotateLabel"]),l,u)}Wc[t](r,s,a,d,l,u,h),s.eachEdge(function(y,_){var S,m=Kt(y.getModel().get(["lineStyle","curveness"]),ri(y,r,_),0),v=ct(y.node1.getLayout()),b=ct(y.node2.getLayout()),x=(v[0]+b[0])/2,I=(v[1]+b[1])/2;+m&&(S=[l*(m*=3)+x*(1-m),u*m+I*(1-m)]),y.setLayout([v,b,S])})}}}var Wc={value:function(r,t,e,n,i,o,a){var s=0,l=e.getSum("value"),u=2*Math.PI/(l||a);t.eachNode(function(d){var h=d.getValue("value"),c=u*(l?h:1)/2;s+=c,d.setLayout([n*Math.cos(s)+i,n*Math.sin(s)+o]),s+=c})},symbolSize:function(r,t,e,n,i,o,a){var s=0;oi.length=a;var l=cn(r);t.eachNode(function(h){var c=pn(h);isNaN(c)&&(c=2),c<0&&(c=0),c*=l;var g=Math.asin(c/2/n);isNaN(g)&&(g=Ba/2),oi[h.dataIndex]=g,s+=2*g});var u=(2*Ba-s)/a/2,d=0;t.eachNode(function(h){var c=u+oi[h.dataIndex];d+=c,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([n*Math.cos(d)+i,n*Math.sin(d)+o]),d+=c})}};function Ga(r,t,e,n){var i=r.getGraphicEl();if(i){var o=r.getModel().get(["label","rotate"])||0,a=i.getSymbolPath();if(t){var s=r.getLayout(),l=Math.atan2(s[1]-n,s[0]-e);l<0&&(l=2*Math.PI+l);var u=s[0]<e;u&&(l-=Math.PI);var d=u?"left":"right";a.setTextConfig({rotation:-l,position:d,origin:"center"});var h=a.ensureState("emphasis");J(h.textConfig||(h.textConfig={}),{position:d})}else a.setTextConfig({rotation:o*=Math.PI/180})}}function Hc(r){r.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&ai(t,"symbolSize")})}var Ot=Mr;function Uc(r){r.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||e.type==="view")if(t.get("layout")==="force"){var n=t.preservedPoints||{},i=t.getGraph(),o=i.data,a=i.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?o.each(function(m){var v=o.getId(m);o.setItemLayout(m,n[v]||[NaN,NaN])}):l&&l!=="none"?l==="circular"&&ai(t,"value"):Oa(t);var u=o.getDataExtent("value"),d=a.getDataExtent("value"),h=s.get("repulsion"),c=s.get("edgeLength"),g=$(h)?h:[h,h],f=$(c)?c:[c,c];f=[f[1],f[0]];var p=o.mapArray("value",function(m,v){var b=o.getItemLayout(v),x=Cn(m,u,g);return isNaN(x)&&(x=(g[0]+g[1])/2),{w:x,rep:x,fixed:o.getItemModel(v).get("fixed"),p:!b||isNaN(b[0])||isNaN(b[1])?null:b}}),y=a.mapArray("value",function(m,v){var b=i.getEdgeByIndex(v),x=Cn(m,d,f);isNaN(x)&&(x=(f[0]+f[1])/2);var I=b.getModel(),w=Kt(b.getModel().get(["lineStyle","curveness"]),-ri(b,t,v,!0),0);return{n1:p[b.node1.dataIndex],n2:p[b.node2.dataIndex],d:x,curveness:w,ignoreForceLayout:I.get("ignoreForceLayout")}}),_=e.getBoundingRect(),S=function(m,v,b){for(var x=m,I=v,w=b.rect,M=w.width,D=w.height,C=[w.x+M/2,w.y+D/2],L=b.gravity==null?.1:b.gravity,T=0;T<x.length;T++){var A=x[T];A.p||(A.p=Nu(M*(Math.random()-.5)+C[0],D*(Math.random()-.5)+C[1])),A.pp=ct(A.p),A.edges=null}var k,N,V=b.friction==null?.6:b.friction,P=V;return{warmUp:function(){P=.8*V},setFixed:function(z){x[z].fixed=!0},setUnfixed:function(z){x[z].fixed=!1},beforeStep:function(z){k=z},afterStep:function(z){N=z},step:function(z){k&&k(x,I);for(var E=[],B=x.length,G=0;G<I.length;G++){var Z=I[G];if(!Z.ignoreForceLayout){var O=Z.n1,F=Z.n2;Vt(E,F.p,O.p);var Y=Ro(E)-Z.d,H=F.w/(O.w+F.w);isNaN(H)&&(H=0),Qt(E,E),!O.fixed&&Ot(O.p,O.p,E,H*Y*P),!F.fixed&&Ot(F.p,F.p,E,-(1-H)*Y*P)}}for(G=0;G<B;G++)(K=x[G]).fixed||(Vt(E,C,K.p),Ot(K.p,K.p,E,L*P));for(G=0;G<B;G++){O=x[G];for(var j=G+1;j<B;j++){F=x[j],Vt(E,F.p,O.p),(Y=Ro(E))===0&&(Pu(E,Math.random()-.5,Math.random()-.5),Y=1);var q=(O.rep+F.rep)/Y/Y;!O.fixed&&Ot(O.pp,O.pp,E,q),!F.fixed&&Ot(F.pp,F.pp,E,-q)}}var X=[];for(G=0;G<B;G++){var K;(K=x[G]).fixed||(Vt(X,K.p,K.pp),Ot(K.p,K.p,X,P),Ne(K.pp,K.p))}var re=(P*=.992)<.01;N&&N(x,I,re),z&&z(re)}}}(p,y,{rect:_,gravity:s.get("gravity"),friction:s.get("friction")});S.beforeStep(function(m,v){for(var b=0,x=m.length;b<x;b++)m[b].fixed&&Ne(m[b].p,i.getNodeByIndex(b).getLayout())}),S.afterStep(function(m,v,b){for(var x=0,I=m.length;x<I;x++)m[x].fixed||i.getNodeByIndex(x).setLayout(m[x].p),n[o.getId(x)]=m[x].p;for(x=0,I=v.length;x<I;x++){var w=v[x],M=i.getEdgeByIndex(x),D=w.n1.p,C=w.n2.p,L=M.getLayout();(L=L?L.slice():[])[0]=L[0]||[],L[1]=L[1]||[],Ne(L[0],D),Ne(L[1],C),+w.curveness&&(L[2]=[(D[0]+C[0])/2-(D[1]-C[1])*w.curveness,(D[1]+C[1])/2-(C[0]-D[0])*w.curveness]),M.setLayout(L)}}),t.forceLayout=S,t.preservedPoints=n,S.step()}else t.forceLayout=null})}function Yc(r,t){var e=[];return r.eachSeriesByType("graph",function(n){var i=n.get("coordinateSystem");if(!i||i==="view"){var o=n.getData(),a=o.mapArray(function(y){var _=o.getItemModel(y);return[+_.get("x"),+_.get("y")]}),s=[],l=[];In(a,s,l),l[0]-s[0]==0&&(l[0]+=1,s[0]-=1),l[1]-s[1]==0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),d=function(y,_,S){var m=J(y.getBoxLayoutParams(),{aspect:S});return ut(m,{width:_.getWidth(),height:_.getHeight()})}(n,t,u);isNaN(u)&&(s=[d.x,d.y],l=[d.x+d.width,d.y+d.height]);var h=l[0]-s[0],c=l[1]-s[1],g=d.width,f=d.height,p=n.coordinateSystem=new xr;p.zoomLimit=n.get("scaleLimit"),p.setBoundingRect(s[0],s[1],h,c),p.setViewRect(d.x,d.y,g,f),p.setCenter(n.get("center"),t),p.setZoom(n.get("zoom")),e.push(p)}}),e}var Fa=Tn.prototype,si=Lo.prototype,Wa=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function li(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}(function(r){function t(){return r!==null&&r.apply(this,arguments)||this}U(t,r)})(Wa);var Xc=function(r){function t(e){var n=r.call(this,e)||this;return n.type="ec-line",n}return U(t,r),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Wa},t.prototype.buildPath=function(e,n){li(n)?Fa.buildPath.call(this,e,n):si.buildPath.call(this,e,n)},t.prototype.pointAt=function(e){return li(this.shape)?Fa.pointAt.call(this,e):si.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var n=this.shape,i=li(n)?[n.x2-n.x1,n.y2-n.y1]:si.tangentAt.call(this,e);return Qt(i,i)},t}(be),ui=["fromSymbol","toSymbol"];function Ha(r){return"_"+r+"Type"}function Ua(r,t,e){var n=t.getItemVisual(e,r);if(!n||n==="none")return n;var i=t.getItemVisual(e,r+"Size"),o=t.getItemVisual(e,r+"Rotate"),a=t.getItemVisual(e,r+"Offset"),s=t.getItemVisual(e,r+"KeepAspect"),l=An(i);return n+l+Nn(a||0,l)+(o||"")+(s||"")}function Ya(r,t,e){var n=t.getItemVisual(e,r);if(n&&n!=="none"){var i=t.getItemVisual(e,r+"Size"),o=t.getItemVisual(e,r+"Rotate"),a=t.getItemVisual(e,r+"Offset"),s=t.getItemVisual(e,r+"KeepAspect"),l=An(i),u=Nn(a||0,l),d=Zt(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return d.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,d.name=r,d}}function di(r,t){r.x1=t[0][0],r.y1=t[0][1],r.x2=t[1][0],r.y2=t[1][1],r.percent=1;var e=t[2];e?(r.cpx1=e[0],r.cpy1=e[1]):(r.cpx1=NaN,r.cpy1=NaN)}var hi=function(r){function t(e,n,i){var o=r.call(this)||this;return o._createLine(e,n,i),o}return U(t,r),t.prototype._createLine=function(e,n,i){var o=e.hostModel,a=function(s){var l=new Xc({name:"line",subPixelOptimize:!0});return di(l.shape,s),l}(e.getItemLayout(n));a.shape.percent=0,pt(a,{shape:{percent:1}},o,n),this.add(a),R(ui,function(s){var l=Ya(s,e,n);this.add(l),this[Ha(s)]=Ua(s,e,n)},this),this._updateCommonStl(e,n,i)},t.prototype.updateData=function(e,n,i){var o=e.hostModel,a=this.childOfName("line"),s=e.getItemLayout(n),l={shape:{}};di(l.shape,s),Te(a,l,o,n),R(ui,function(u){var d=Ua(u,e,n),h=Ha(u);if(this[h]!==d){this.remove(this.childOfName(u));var c=Ya(u,e,n);this.add(c)}this[h]=d},this),this._updateCommonStl(e,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,n,i){var o=e.hostModel,a=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,d=i&&i.labelStatesModels,h=i&&i.emphasisDisabled,c=i&&i.focus,g=i&&i.blurScope;if(!i||e.hasItemOption){var f=e.getItemModel(n),p=f.getModel("emphasis");s=p.getModel("lineStyle").getLineStyle(),l=f.getModel(["blur","lineStyle"]).getLineStyle(),u=f.getModel(["select","lineStyle"]).getLineStyle(),h=p.get("disabled"),c=p.get("focus"),g=p.get("blurScope"),d=qe(f)}var y=e.getItemVisual(n,"style"),_=y.stroke;a.useStyle(y),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=u,R(ui,function(x){var I=this.childOfName(x);if(I){I.setColor(_),I.style.opacity=y.opacity;for(var w=0;w<Dr.length;w++){var M=Dr[w],D=a.getState(M);if(D){var C=D.style||{},L=I.ensureState(M),T=L.style||(L.style={});C.stroke!=null&&(T[I.__isEmptyBrush?"stroke":"fill"]=C.stroke),C.opacity!=null&&(T.opacity=C.opacity)}}I.markRedraw()}},this);var S=o.getRawValue(n);ht(this,d,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(x,I){return o.getFormattedLabel(x,I,e.dataType)}},inheritColor:_||"#000",defaultOpacity:y.opacity,defaultText:(S==null?e.getName(n):isFinite(S)?ku(S):S)+""});var m=this.getTextContent();if(m){var v=d.normal;m.__align=m.style.align,m.__verticalAlign=m.style.verticalAlign,m.__position=v.get("position")||"middle";var b=v.get("distance");$(b)||(b=[b,b]),m.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),Ae(this,c,g,h)},t.prototype.highlight=function(){Lr(this)},t.prototype.downplay=function(){Cr(this)},t.prototype.updateLayout=function(e,n){this.setLinePoints(e.getItemLayout(n))},t.prototype.setLinePoints=function(e){var n=this.childOfName("line");di(n.shape,e),n.dirty()},t.prototype.beforeUpdate=function(){var e=this,n=e.childOfName("fromSymbol"),i=e.childOfName("toSymbol"),o=e.getTextContent();if(n||i||o&&!o.ignore){for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=e.childOfName("line");if(this.__dirty||l.__dirty){var u=l.shape.percent,d=l.pointAt(0),h=l.pointAt(u),c=Vt([],h,d);if(Qt(c,c),n&&(n.setPosition(d),M(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),i&&(i.setPosition(h),M(i,1),i.scaleX=i.scaleY=a*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var g=void 0,f=void 0,p=o.__labelDistance,y=p[0]*a,_=p[1]*a,S=u/2,m=l.tangentAt(S),v=[m[1],-m[0]],b=l.pointAt(S);v[1]>0&&(v[0]=-v[0],v[1]=-v[1]);var x=m[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var I=-Math.atan2(m[1],m[0]);h[0]<d[0]&&(I=Math.PI+I),o.rotation=I}var w=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-_,f="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=_,f="top";break;default:w=0,f="middle"}switch(o.__position){case"end":o.x=c[0]*y+h[0],o.y=c[1]*_+h[1],g=c[0]>.8?"left":c[0]<-.8?"right":"center",f=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":o.x=-c[0]*y+d[0],o.y=-c[1]*_+d[1],g=c[0]>.8?"right":c[0]<-.8?"left":"center",f=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=y*x+d[0],o.y=d[1]+w,g=m[0]<0?"right":"left",o.originX=-y*x,o.originY=-w;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=b[0],o.y=b[1]+w,g="center",o.originY=-w;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-y*x+h[0],o.y=h[1]+w,g=m[0]>=0?"right":"left",o.originX=y*x,o.originY=-w}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||f,align:o.__align||g})}}}function M(D,C){var L=D.__specifiedRotation;if(L==null){var T=l.tangentAt(C);D.attr("rotation",(C===1?-1:1)*Math.PI/2-Math.atan2(T[1],T[0]))}else D.attr("rotation",L)}},t}(ce),ci=function(){function r(t){this.group=new ce,this._LineCtor=t||hi}return r.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var a=Xa(t);t.diff(o).add(function(s){e._doAdd(t,s,a)}).update(function(s,l){e._doUpdate(o,t,l,s,a)}).remove(function(s){i.remove(o.getItemGraphicEl(s))}).execute()},r.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Xa(t),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e){function n(a){a.isGroup||function(s){return s.animators&&s.animators.length>0}(a)||(a.incremental=!0,a.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var i=t.start;i<t.end;i++)if(pi(e.getItemLayout(i))){var o=new this._LineCtor(e,i,this._seriesScope);o.traverse(n),this.group.add(o),e.setItemGraphicEl(i,o),this._progressiveEls.push(o)}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(t){Pn(this._progressiveEls||this.group,t)},r.prototype._doAdd=function(t,e,n){if(pi(t.getItemLayout(e))){var i=new this._LineCtor(t,e,n);t.setItemGraphicEl(e,i),this.group.add(i)}},r.prototype._doUpdate=function(t,e,n,i,o){var a=t.getItemGraphicEl(n);pi(e.getItemLayout(i))?(a?a.updateData(e,i,o):a=new this._LineCtor(e,i,o),e.setItemGraphicEl(i,a),this.group.add(a)):this.group.remove(a)},r}();function Xa(r){var t=r.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:qe(t)}}function Za(r){return isNaN(r[0])||isNaN(r[1])}function pi(r){return r&&!Za(r[0])&&!Za(r[1])}var fi=[],gi=[],yi=[],Bt=Oo,vi=Eu,ja=Math.abs;function qa(r,t,e){for(var n,i=r[0],o=r[1],a=r[2],s=1/0,l=e*e,u=.1,d=.1;d<=.9;d+=.1)fi[0]=Bt(i[0],o[0],a[0],d),fi[1]=Bt(i[1],o[1],a[1],d),(g=ja(vi(fi,t)-l))<s&&(s=g,n=d);for(var h=0;h<32;h++){var c=n+u;gi[0]=Bt(i[0],o[0],a[0],n),gi[1]=Bt(i[1],o[1],a[1],n),yi[0]=Bt(i[0],o[0],a[0],c),yi[1]=Bt(i[1],o[1],a[1],c);var g=vi(gi,t)-l;if(ja(g)<.01)break;var f=vi(yi,t)-l;u/=2,g<0?f>=0?n+=u:n-=u:f>=0?n-=u:n+=u}return n}function mi(r,t){var e=[],n=Vu,i=[[],[],[]],o=[[],[]],a=[];t/=2,r.eachEdge(function(s,l){var u=s.getLayout(),d=s.getVisual("fromSymbol"),h=s.getVisual("toSymbol");u.__original||(u.__original=[ct(u[0]),ct(u[1])],u[2]&&u.__original.push(ct(u[2])));var c=u.__original;if(u[2]!=null){if(Ne(i[0],c[0]),Ne(i[1],c[2]),Ne(i[2],c[1]),d&&d!=="none"){var g=pn(s.node1),f=qa(i,c[0],g*t);n(i[0][0],i[1][0],i[2][0],f,e),i[0][0]=e[3],i[1][0]=e[4],n(i[0][1],i[1][1],i[2][1],f,e),i[0][1]=e[3],i[1][1]=e[4]}h&&h!=="none"&&(g=pn(s.node2),f=qa(i,c[1],g*t),n(i[0][0],i[1][0],i[2][0],f,e),i[1][0]=e[1],i[2][0]=e[2],n(i[0][1],i[1][1],i[2][1],f,e),i[1][1]=e[1],i[2][1]=e[2]),Ne(u[0],i[0]),Ne(u[1],i[2]),Ne(u[2],i[1])}else Ne(o[0],c[0]),Ne(o[1],c[1]),Vt(a,o[1],o[0]),Qt(a,a),d&&d!=="none"&&(g=pn(s.node1),Mr(o[0],o[0],a,g*t)),h&&h!=="none"&&(g=pn(s.node2),Mr(o[1],o[1],a,-g*t)),Ne(u[0],o[0]),Ne(u[1],o[1])})}function Ka(r){return r.type==="view"}var Zc=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(e,n){var i=new Sn,o=new ci,a=this.group;this._controller=new mr(n.getZr()),this._controllerHost={target:a},a.add(i.group),a.add(o.group),this._symbolDraw=i,this._lineDraw=o,this._firstRender=!0},t.prototype.render=function(e,n,i){var o=this,a=e.coordinateSystem;this._model=e;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(Ka(a)){var d={x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY};this._firstRender?u.attr(d):Te(u,d,e)}mi(e.getGraph(),cn(e));var h=e.getData();s.updateData(h);var c=e.getEdgeData();l.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,n,i),clearTimeout(this._layoutTimeout);var g=e.forceLayout,f=e.get(["force","layoutAnimation"]);g&&this._startForceLayoutIteration(g,f);var p=e.get("layout");h.graph.eachNode(function(m){var v=m.dataIndex,b=m.getGraphicEl(),x=m.getModel();if(b){b.off("drag").off("dragend");var I=x.get("draggable");I&&b.on("drag",function(w){switch(p){case"force":g.warmUp(),!o._layouting&&o._startForceLayoutIteration(g,f),g.setFixed(v),h.setItemLayout(v,[b.x,b.y]);break;case"circular":h.setItemLayout(v,[b.x,b.y]),m.setLayout({fixed:!0},!0),ai(e,"symbolSize",m,[w.offsetX,w.offsetY]),o.updateLayout(e);break;default:h.setItemLayout(v,[b.x,b.y]),ii(e.getGraph(),e),o.updateLayout(e)}}).on("dragend",function(){g&&g.setUnfixed(v)}),b.setDraggable(I,!!x.get("cursor")),x.get(["emphasis","focus"])==="adjacency"&&(ve(b).focus=m.getAdjacentDataIndices())}}),h.graph.eachEdge(function(m){var v=m.getGraphicEl(),b=m.getModel().get(["emphasis","focus"]);v&&b==="adjacency"&&(ve(v).focus={edge:[m.dataIndex],node:[m.node1.dataIndex,m.node2.dataIndex]})});var y=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),_=h.getLayout("cx"),S=h.getLayout("cy");h.graph.eachNode(function(m){Ga(m,y,_,S)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,n){var i=this;(function o(){e.step(function(a){i.updateLayout(i._model),(i._layouting=!a)&&(n?i._layoutTimeout=setTimeout(o,16):o())})})()},t.prototype._updateController=function(e,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,d,h){var c=l.getBoundingRect();return c.applyTransform(l.transform),c.contain(d,h)&&!Io(u,i,e)}),Ka(e.coordinateSystem)?(a.enable(e.get("roam")),s.zoomLimit=e.get("scaleLimit"),s.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){wo(s,u.dx,u.dy),i.dispatchAction({seriesId:e.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Mo(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(),mi(e.getGraph(),cn(e)),o._lineDraw.updateLayout(),i.updateLabelLayout()})):a.disable()},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,n=e.getData(),i=cn(e);n.eachItemGraphicEl(function(o,a){o&&o.setSymbolScale(i)})},t.prototype.updateLayout=function(e){mi(e.getGraph(),cn(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(Me);function Gt(r){return"_EC_"+r}var jc=function(){function r(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(t,e){t=t==null?""+e:""+t;var n=this._nodesMap;if(!n[Gt(t)]){var i=new wt(t,e);return i.hostGraph=this,this.nodes.push(i),n[Gt(t)]=i,i}},r.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},r.prototype.getNodeById=function(t){return this._nodesMap[Gt(t)]},r.prototype.addEdge=function(t,e,n){var i=this._nodesMap,o=this._edgesMap;if(ot(t)&&(t=this.nodes[t]),ot(e)&&(e=this.nodes[e]),t instanceof wt||(t=i[Gt(t)]),e instanceof wt||(e=i[Gt(e)]),t&&e){var a=t.id+"-"+e.id,s=new Qa(t,e,n);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),e.inEdges.push(s)),t.edges.push(s),t!==e&&e.edges.push(s),this.edges.push(s),o[a]=s,s}},r.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},r.prototype.getEdge=function(t,e){t instanceof wt&&(t=t.id),e instanceof wt&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},r.prototype.eachNode=function(t,e){for(var n=this.nodes,i=n.length,o=0;o<i;o++)n[o].dataIndex>=0&&t.call(e,n[o],o)},r.prototype.eachEdge=function(t,e){for(var n=this.edges,i=n.length,o=0;o<i;o++)n[o].dataIndex>=0&&n[o].node1.dataIndex>=0&&n[o].node2.dataIndex>=0&&t.call(e,n[o],o)},r.prototype.breadthFirstTraverse=function(t,e,n,i){if(e instanceof wt||(e=this._nodesMap[Gt(e)]),e){for(var o=n==="out"?"outEdges":n==="in"?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(i,e,null))for(var s=[e];s.length;){var l=s.shift(),u=l[o];for(a=0;a<u.length;a++){var d=u[a],h=d.node1===l?d.node2:d.node1;if(!h.__visited){if(t.call(i,h,l))return;s.push(h),h.__visited=!0}}}}},r.prototype.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,o=0,a=n.length;o<a;o++)n[o].dataIndex=-1;for(o=0,a=t.count();o<a;o++)n[t.getRawIndex(o)].dataIndex=o;for(e.filterSelf(function(s){var l=i[e.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0}),o=0,a=i.length;o<a;o++)i[o].dataIndex=-1;for(o=0,a=e.count();o<a;o++)i[e.getRawIndex(o)].dataIndex=o},r.prototype.clone=function(){for(var t=new r(this._directed),e=this.nodes,n=this.edges,i=0;i<e.length;i++)t.addNode(e[i].id,e[i].dataIndex);for(i=0;i<n.length;i++){var o=n[i];t.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return t},r}(),wt=function(){function r(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=e??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},r.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var n=this.edges[e];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},r.prototype.getTrajectoryDataIndices=function(){for(var t=De(),e=De(),n=0;n<this.edges.length;n++){var i=this.edges[n];if(!(i.dataIndex<0)){t.set(i.dataIndex,!0);for(var o=[i.node1],a=[i.node2],s=0;s<o.length;){var l=o[s];s++,e.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)t.set(l.inEdges[u].dataIndex,!0),o.push(l.inEdges[u].node1)}for(s=0;s<a.length;){var d=a[s];for(s++,e.set(d.dataIndex,!0),u=0;u<d.outEdges.length;u++)t.set(d.outEdges[u].dataIndex,!0),a.push(d.outEdges[u].node2)}}}return{edge:t.keys(),node:e.keys()}},r}(),Qa=function(){function r(t,e,n){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=n??-1}return r.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var t=De(),e=De();t.set(this.dataIndex,!0);for(var n=[this.node1],i=[this.node2],o=0;o<n.length;){var a=n[o];o++,e.set(a.dataIndex,!0);for(var s=0;s<a.inEdges.length;s++)t.set(a.inEdges[s].dataIndex,!0),n.push(a.inEdges[s].node1)}for(o=0;o<i.length;){var l=i[o];for(o++,e.set(l.dataIndex,!0),s=0;s<l.outEdges.length;s++)t.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:t.keys(),node:e.keys()}},r}();function $a(r,t){return{getValue:function(e){var n=this[r][t];return n.getStore().get(n.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,n){this.dataIndex>=0&&this[r][t].setItemVisual(this.dataIndex,e,n)},getVisual:function(e){return this[r][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,n){this.dataIndex>=0&&this[r][t].setItemLayout(this.dataIndex,e,n)},getLayout:function(){return this[r][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][t].getRawIndex(this.dataIndex)}}}function Ja(r,t,e,n,i){for(var o=new jc(n),a=0;a<r.length;a++)o.addNode(Ke(r[a].id,r[a].name,a),a);var s=[],l=[],u=0;for(a=0;a<t.length;a++){var d=t[a],h=d.source,c=d.target;o.addEdge(h,c,u)&&(l.push(d),s.push(Ke(rt(d.id,null),h+" > "+c)),u++)}var g,f=e.get("coordinateSystem");if(f==="cartesian2d"||f==="polar")g=Nt(r,e);else{var p=Bo.get(f),y=p&&p.dimensions||[];ze(y,"value")<0&&y.concat(["value"]);var _=Ir(r,{coordDimensions:y,encodeDefine:e.getEncode()}).dimensions;(g=new Ee(_,e)).initData(r)}var S=new Ee(["value"],e);return S.initData(l,s),i&&i(g,S),va({mainData:g,struct:o,structAttr:"graph",datas:{node:g,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}bt(wt,$a("hostGraph","data")),bt(Qa,$a("hostGraph","edgeData"));var qc=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return U(t,r),t.prototype.init=function(e){r.prototype.init.apply(this,arguments);var n=this;function i(){return n._categoriesData}this.legendVisualProvider=new Tr(i,i),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){r.prototype.mergeDefaultAndTheme.apply(this,arguments),Ar(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,n){var i,o=e.edges||e.links||[],a=e.data||e.nodes||[],s=this;if(a&&o){Yn(i=this)&&(i.__curvenessList=[],i.__edgeMap={},za(i));var l=Ja(a,o,this,!0,function(u,d){u.wrapMethod("getItemModel",function(f){var p=s._categoriesModels[f.getShallow("category")];return p&&(p.parentModel=f.parentModel,f.parentModel=p),f});var h=dt.prototype.getModel;function c(f,p){var y=h.call(this,f,p);return y.resolveParentPath=g,y}function g(f){if(f&&(f[0]==="label"||f[1]==="label")){var p=f.slice();return f[0]==="label"?p[0]="edgeLabel":f[1]==="label"&&(p[1]="edgeLabel"),p}return f}d.wrapMethod("getItemModel",function(f){return f.resolveParentPath=g,f.getModel=c,f})});return R(l.edges,function(u){(function(d,h,c,g){if(Yn(c)){var f=hn(d,h,c),p=c.__edgeMap,y=p[Ra(f)];p[f]&&!y?p[f].isForward=!0:y&&p[f]&&(y.isForward=!0,p[f].isForward=!1),p[f]=p[f]||[],p[f].push(g)}})(u.node1,u.node2,this,u.dataIndex)},this),l.data}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,n,i){if(i==="edge"){var o=this.getData(),a=this.getDataParams(e,i),s=o.graph.getEdgeByIndex(e),l=o.getName(s.node1.dataIndex),u=o.getName(s.node2.dataIndex),d=[];return l!=null&&d.push(l),u!=null&&d.push(u),je("nameValue",{name:d.join(" > "),value:a.value,noValue:a.value==null})}return zu({series:this,dataIndex:e,multipleSeries:n})},t.prototype._updateCategoriesData=function(){var e=Q(this.option.categories||[],function(i){return i.value!=null?i:J({value:0},i)}),n=new Ee(["value"],this);n.initData(e),this._categoriesData=n,this._categoriesModels=n.mapArray(function(i){return n.getItemModel(i)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(we),Kc={type:"graphRoam",event:"graphRoam",update:"none"},Qc=["itemStyle","opacity"],$c=function(r){function t(e,n){var i=r.call(this)||this,o=i,a=new kn,s=new Ue;return o.setTextContent(s),i.setTextGuideLine(a),i.updateData(e,n,!0),i}return U(t,r),t.prototype.updateData=function(e,n,i){var o=this,a=e.hostModel,s=e.getItemModel(n),l=e.getItemLayout(n),u=s.getModel("emphasis"),d=s.get(Qc);d=d??1,i||Et(o),o.useStyle(e.getItemVisual(n,"style")),o.style.lineJoin="round",i?(o.setShape({points:l.points}),o.style.opacity=0,pt(o,{style:{opacity:d}},a,n)):Te(o,{style:{opacity:d},shape:{points:l.points}},a,n),nt(o,s),this._updateLabel(e,n),Ae(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,n){var i=this,o=this.getTextGuideLine(),a=i.getTextContent(),s=e.hostModel,l=e.getItemModel(n),u=e.getItemLayout(n).label,d=e.getItemVisual(n,"style"),h=d.fill;ht(a,qe(l),{labelFetcher:e.hostModel,labelDataIndex:n,defaultOpacity:d.opacity,defaultText:e.getName(n)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),i.setTextConfig({local:!0,inside:!!u.inside,insideStroke:h,outsideFill:h});var c=u.linePoints;o.setShape({points:c}),i.textGuideLineConfig={anchor:c?new ft(c[0][0],c[0][1]):null},Te(a,{style:{x:u.x,y:u.y}},s,n),a.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),Ru(i,Ou(l),{stroke:h})},t}(jt),Jc=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreLabelLineUpdate=!0,e}return U(t,r),t.prototype.render=function(e,n,i){var o=e.getData(),a=this._data,s=this.group;o.diff(a).add(function(l){var u=new $c(o,l);o.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var d=a.getItemGraphicEl(u);d.updateData(o,l),s.add(d),o.setItemGraphicEl(l,d)}).remove(function(l){var u=a.getItemGraphicEl(l);Bu(u,e,l)}).execute(),this._data=o},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(Me),ep=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Tr(le(this.getData,this),le(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.getInitialData=function(e,n){return Go(this,{coordDimensions:["value"],encodeDefaulter:pe(Gu,this)})},t.prototype._defaultLabelLine=function(e){Ar(e,"labelLine",["show"]);var n=e.labelLine,i=e.emphasis.labelLine;n.show=n.show&&e.label.show,i.show=i.show&&e.emphasis.label.show},t.prototype.getDataParams=function(e){var n=this.getData(),i=r.prototype.getDataParams.call(this,e),o=n.mapDimension("value"),a=n.getSum(o);return i.percent=a?+(n.get(o,e)/a*100).toFixed(2):0,i.$vars.push("percent"),i},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(we);function tp(r,t){r.eachSeriesByType("funnel",function(e){var n=e.getData(),i=n.mapDimension("value"),o=e.get("sort"),a=function(T,A){return ut(T.getBoxLayoutParams(),{width:A.getWidth(),height:A.getHeight()})}(e,t),s=e.get("orient"),l=a.width,u=a.height,d=function(T,A){for(var k=T.mapDimension("value"),N=T.mapArray(k,function(B){return B}),V=[],P=A==="ascending",z=0,E=T.count();z<E;z++)V[z]=z;return xe(A)?V.sort(A):A!=="none"&&V.sort(function(B,G){return P?N[B]-N[G]:N[G]-N[B]}),V}(n,o),h=a.x,c=a.y,g=s==="horizontal"?[ne(e.get("minSize"),u),ne(e.get("maxSize"),u)]:[ne(e.get("minSize"),l),ne(e.get("maxSize"),l)],f=n.getDataExtent(i),p=e.get("min"),y=e.get("max");p==null&&(p=Math.min(f[0],0)),y==null&&(y=f[1]);var _=e.get("funnelAlign"),S=e.get("gap"),m=((s==="horizontal"?l:u)-S*(n.count()-1))/n.count(),v=function(T,A){if(s==="horizontal"){var k=n.get(i,T)||0,N=Cn(k,[p,y],g,!0),V=void 0;switch(_){case"top":V=c;break;case"center":V=c+(u-N)/2;break;case"bottom":V=c+(u-N)}return[[A,V],[A,V+N]]}var P,z=n.get(i,T)||0,E=Cn(z,[p,y],g,!0);switch(_){case"left":P=h;break;case"center":P=h+(l-E)/2;break;case"right":P=h+l-E}return[[P,A],[P+E,A]]};o==="ascending"&&(m=-m,S=-S,s==="horizontal"?h+=l:c+=u,d=d.reverse());for(var b=0;b<d.length;b++){var x=d[b],I=d[b+1],w=n.getItemModel(x);if(s==="horizontal"){var M=w.get(["itemStyle","width"]);M==null?M=m:(M=ne(M,l),o==="ascending"&&(M=-M));var D=v(x,h),C=v(I,h+M);h+=M+S,n.setItemLayout(x,{points:D.concat(C.slice().reverse())})}else{var L=w.get(["itemStyle","height"]);L==null?L=m:(L=ne(L,u),o==="ascending"&&(L=-L)),D=v(x,c),C=v(I,c+L),c+=L+S,n.setItemLayout(x,{points:D.concat(C.slice().reverse())})}}(function(T){var A=T.hostModel.get("orient");T.each(function(k){var N,V,P,z,E=T.getItemModel(k),B=E.getModel("label").get("position"),G=E.getModel("labelLine"),Z=T.getItemLayout(k),O=Z.points,F=B==="inner"||B==="inside"||B==="center"||B==="insideLeft"||B==="insideRight";if(F)B==="insideLeft"?(V=(O[0][0]+O[3][0])/2+5,P=(O[0][1]+O[3][1])/2,N="left"):B==="insideRight"?(V=(O[1][0]+O[2][0])/2-5,P=(O[1][1]+O[2][1])/2,N="right"):(V=(O[0][0]+O[1][0]+O[2][0]+O[3][0])/4,P=(O[0][1]+O[1][1]+O[2][1]+O[3][1])/4,N="center"),z=[[V,P],[V,P]];else{var Y=void 0,H=void 0,j=void 0,q=void 0,X=G.get("length");B==="left"?(Y=(O[3][0]+O[0][0])/2,H=(O[3][1]+O[0][1])/2,V=(j=Y-X)-5,N="right"):B==="right"?(Y=(O[1][0]+O[2][0])/2,H=(O[1][1]+O[2][1])/2,V=(j=Y+X)+5,N="left"):B==="top"?(Y=(O[3][0]+O[0][0])/2,P=(q=(H=(O[3][1]+O[0][1])/2)-X)-5,N="center"):B==="bottom"?(Y=(O[1][0]+O[2][0])/2,P=(q=(H=(O[1][1]+O[2][1])/2)+X)+5,N="center"):B==="rightTop"?(Y=A==="horizontal"?O[3][0]:O[1][0],H=A==="horizontal"?O[3][1]:O[1][1],A==="horizontal"?(P=(q=H-X)-5,N="center"):(V=(j=Y+X)+5,N="top")):B==="rightBottom"?(Y=O[2][0],H=O[2][1],A==="horizontal"?(P=(q=H+X)+5,N="center"):(V=(j=Y+X)+5,N="bottom")):B==="leftTop"?(Y=O[0][0],H=A==="horizontal"?O[0][1]:O[1][1],A==="horizontal"?(P=(q=H-X)-5,N="center"):(V=(j=Y-X)-5,N="right")):B==="leftBottom"?(Y=A==="horizontal"?O[1][0]:O[3][0],H=A==="horizontal"?O[1][1]:O[2][1],A==="horizontal"?(P=(q=H+X)+5,N="center"):(V=(j=Y-X)-5,N="right")):(Y=(O[1][0]+O[2][0])/2,H=(O[1][1]+O[2][1])/2,A==="horizontal"?(P=(q=H+X)+5,N="center"):(V=(j=Y+X)+5,N="left")),A==="horizontal"?V=j=Y:P=q=H,z=[[Y,H],[j,q]]}Z.label={linePoints:z,x:V,y:P,verticalAlign:"middle",textAlign:N,inside:F}})})(n)})}var np=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._dataGroup=new ce,e._initialized=!1,e}return U(t,r),t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,n,i,o){this._progressiveEls=null;var a=this._dataGroup,s=e.getData(),l=this._data,u=e.coordinateSystem,d=u.dimensions,h=ns(e);if(s.diff(l).add(function(g){xi(ts(s,a,g,d,u),s,g,h)}).update(function(g,f){var p=l.getItemGraphicEl(f),y=es(s,g,d,u);s.setItemGraphicEl(g,p),Te(p,{shape:{points:y}},e,g),Et(p),xi(p,s,g,h)}).remove(function(g){var f=l.getItemGraphicEl(g);a.remove(f)}).execute(),!this._initialized){this._initialized=!0;var c=function(g,f,p){var y=g.model,_=g.getRect(),S=new it({shape:{x:_.x,y:_.y,width:_.width,height:_.height}}),m=y.get("layout")==="horizontal"?"width":"height";return S.setShape(m,0),pt(S,{shape:{width:_.width,height:_.height}},f,p),S}(u,e,function(){setTimeout(function(){a.removeClipPath()})});a.setClipPath(c)}this._data=s},t.prototype.incrementalPrepareRender=function(e,n,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,n,i){for(var o=n.getData(),a=n.coordinateSystem,s=a.dimensions,l=ns(n),u=this._progressiveEls=[],d=e.start;d<e.end;d++){var h=ts(o,this._dataGroup,d,s,a);h.incremental=!0,xi(h,o,d,l),u.push(h)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(Me);function es(r,t,e,n){for(var i,o=[],a=0;a<e.length;a++){var s=e[a],l=r.get(r.mapDimension(s),t);i=l,(n.getAxis(s).type==="category"?i==null:i==null||isNaN(i))||o.push(n.dataToPoint(l,s))}return o}function ts(r,t,e,n,i){var o=es(r,e,n,i),a=new kn({shape:{points:o},z2:10});return t.add(a),r.setItemGraphicEl(e,a),a}function ns(r){var t=r.get("smooth",!0);return t===!0&&(t=.3),t=Fu(t),Wu(t)&&(t=0),{smooth:t}}function xi(r,t,e,n){r.useStyle(t.getItemVisual(e,"style")),r.style.fill=null,r.setShape("smooth",n.smooth);var i=t.getItemModel(e),o=i.getModel("emphasis");nt(r,i,"lineStyle"),Ae(r,o.get("focus"),o.get("blurScope"),o.get("disabled"))}var rp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return U(t,r),t.prototype.getInitialData=function(e,n){return Nt(null,this,{useEncodeDefaulter:le(ip,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var n=this.coordinateSystem,i=this.getData(),o=[];return n.eachActiveState(i,function(a,s){e===a&&o.push(i.getRawIndex(s))}),o},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(we);function ip(r){var t=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(t){var e={};return R(t.dimensions,function(n){var i=+n.replace("dim","");e[n]=i}),e}}var op=["lineStyle","opacity"],ap={seriesType:"parallel",reset:function(r,t){var e=r.coordinateSystem,n={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(i,o){e.eachActiveState(o,function(a,s){var l=n[a];if(a==="normal"&&o.hasItemOption){var u=o.getItemModel(s).get(op,!0);u!=null&&(l=u)}o.ensureUniqueItemVisual(s,"style").opacity=l},i.start,i.end)}}}},sp=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},lp=function(r){function t(e){return r.call(this,e)||this}return U(t,r),t.prototype.getDefaultShape=function(){return new sp},t.prototype.buildPath=function(e,n){var i=n.extent;e.moveTo(n.x1,n.y1),e.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(e.lineTo(n.x2+i,n.y2),e.bezierCurveTo(n.cpx2+i,n.cpy2,n.cpx1+i,n.cpy1,n.x1+i,n.y1)):(e.lineTo(n.x2,n.y2+i),e.bezierCurveTo(n.cpx2,n.cpy2+i,n.cpx1,n.cpy1+i,n.x1,n.y1+i)),e.closePath()},t.prototype.highlight=function(){Lr(this)},t.prototype.downplay=function(){Cr(this)},t}(be),up=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._focusAdjacencyDisabled=!1,e}return U(t,r),t.prototype.render=function(e,n,i){var o=this,a=e.getGraph(),s=this.group,l=e.layoutInfo,u=l.width,d=l.height,h=e.getData(),c=e.getData("edge"),g=e.get("orient");this._model=e,s.removeAll(),s.x=l.x,s.y=l.y,a.eachEdge(function(f){var p=new lp,y=ve(p);y.dataIndex=f.dataIndex,y.seriesIndex=e.seriesIndex,y.dataType="edge";var _,S,m,v,b,x,I,w,M=f.getModel(),D=M.getModel("lineStyle"),C=D.get("curveness"),L=f.node1.getLayout(),T=f.node1.getModel(),A=T.get("localX"),k=T.get("localY"),N=f.node2.getLayout(),V=f.node2.getModel(),P=V.get("localX"),z=V.get("localY"),E=f.getLayout();p.shape.extent=Math.max(1,E.dy),p.shape.orient=g,g==="vertical"?(_=(A!=null?A*u:L.x)+E.sy,S=(k!=null?k*d:L.y)+L.dy,m=(P!=null?P*u:N.x)+E.ty,b=_,x=S*(1-C)+(v=z!=null?z*d:N.y)*C,I=m,w=S*C+v*(1-C)):(_=(A!=null?A*u:L.x)+L.dx,S=(k!=null?k*d:L.y)+E.sy,b=_*(1-C)+(m=P!=null?P*u:N.x)*C,x=S,I=_*C+m*(1-C),w=v=(z!=null?z*d:N.y)+E.ty),p.setShape({x1:_,y1:S,x2:m,y2:v,cpx1:b,cpy1:x,cpx2:I,cpy2:w}),p.useStyle(D.getItemStyle()),rs(p.style,g,f);var B=""+M.get("value"),G=qe(M,"edgeLabel");ht(p,G,{labelFetcher:{getFormattedLabel:function(F,Y,H,j,q,X){return e.getFormattedLabel(F,Y,"edge",j,Kt(q,G.normal&&G.normal.get("formatter"),B),X)}},labelDataIndex:f.dataIndex,defaultText:B}),p.setTextConfig({position:"inside"});var Z=M.getModel("emphasis");nt(p,M,"lineStyle",function(F){var Y=F.getItemStyle();return rs(Y,g,f),Y}),s.add(p),c.setItemGraphicEl(f.dataIndex,p);var O=Z.get("focus");Ae(p,O==="adjacency"?f.getAdjacentDataIndices():O==="trajectory"?f.getTrajectoryDataIndices():O,Z.get("blurScope"),Z.get("disabled"))}),a.eachNode(function(f){var p=f.getLayout(),y=f.getModel(),_=y.get("localX"),S=y.get("localY"),m=y.getModel("emphasis"),v=y.get(["itemStyle","borderRadius"])||0,b=new it({shape:{x:_!=null?_*u:p.x,y:S!=null?S*d:p.y,width:p.dx,height:p.dy,r:v},style:y.getModel("itemStyle").getItemStyle(),z2:10});ht(b,qe(y),{labelFetcher:{getFormattedLabel:function(I,w){return e.getFormattedLabel(I,w,"node")}},labelDataIndex:f.dataIndex,defaultText:f.id}),b.disableLabelAnimation=!0,b.setStyle("fill",f.getVisual("color")),b.setStyle("decal",f.getVisual("style").decal),nt(b,y),s.add(b),h.setItemGraphicEl(f.dataIndex,b),ve(b).dataType="node";var x=m.get("focus");Ae(b,x==="adjacency"?f.getAdjacentDataIndices():x==="trajectory"?f.getTrajectoryDataIndices():x,m.get("blurScope"),m.get("disabled"))}),h.eachItemGraphicEl(function(f,p){h.getItemModel(p).get("draggable")&&(f.drift=function(y,_){o._focusAdjacencyDisabled=!0,this.shape.x+=y,this.shape.y+=_,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:h.getRawIndex(p),localX:this.shape.x/u,localY:this.shape.y/d})},f.ondragend=function(){o._focusAdjacencyDisabled=!1},f.draggable=!0,f.cursor="move")}),!this._data&&e.isAnimationEnabled()&&s.setClipPath(function(f,p,y){var _=new it({shape:{x:f.x-10,y:f.y-10,width:0,height:f.height+20}});return pt(_,{shape:{width:f.width+20}},p,y),_}(s.getBoundingRect(),e,function(){s.removeClipPath()})),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(Me);function rs(r,t,e){switch(r.fill){case"source":r.fill=e.node1.getVisual("color"),r.decal=e.node1.getVisual("style").decal;break;case"target":r.fill=e.node2.getVisual("color"),r.decal=e.node2.getVisual("style").decal;break;case"gradient":var n=e.node1.getVisual("color"),i=e.node2.getVisual("color");ue(n)&&ue(i)&&(r.fill=new Hu(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:n,offset:0},{color:i,offset:1}]))}}var dp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.getInitialData=function(e,n){var i=e.edges||e.links,o=e.data||e.nodes,a=e.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<a.length;l++)a[l].depth!=null&&a[l].depth>=0&&(s[a[l].depth]=new dt(a[l],this,n));if(o&&i){var u=Ja(o,i,this,!0,function(d,h){d.wrapMethod("getItemModel",function(c,g){var f=c.parentModel,p=f.getData().getItemLayout(g);if(p){var y=p.depth,_=f.levelModels[y];_&&(c.parentModel=_)}return c}),h.wrapMethod("getItemModel",function(c,g){var f=c.parentModel,p=f.getGraph().getEdgeByIndex(g).node1.getLayout();if(p){var y=p.depth,_=f.levelModels[y];_&&(c.parentModel=_)}return c})});return u.data}},t.prototype.setNodePosition=function(e,n){var i=(this.option.data||this.option.nodes)[e];i.localX=n[0],i.localY=n[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,n,i){function o(c){return isNaN(c)||c==null}if(i==="edge"){var a=this.getDataParams(e,i),s=a.data,l=a.value,u=s.source+" -- "+s.target;return je("nameValue",{name:u,value:l,noValue:o(l)})}var d=this.getGraph().getNodeByIndex(e).getLayout().value,h=this.getDataParams(e,i).data.name;return je("nameValue",{name:h!=null?h+"":null,value:d,noValue:o(d)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(e,n){var i=r.prototype.getDataParams.call(this,e,n);if(i.value==null&&n==="node"){var o=this.getGraph().getNodeByIndex(e).getLayout().value;i.value=o}return i},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(we);function hp(r,t){r.eachSeriesByType("sankey",function(e){var n=e.get("nodeWidth"),i=e.get("nodeGap"),o=function(h,c){return ut(h.getBoxLayoutParams(),{width:c.getWidth(),height:c.getHeight()})}(e,t);e.layoutInfo=o;var a=o.width,s=o.height,l=e.getGraph(),u=l.nodes,d=l.edges;(function(h){R(h,function(c){var g=vt(c.outEdges,Xn),f=vt(c.inEdges,Xn),p=c.getValue()||0,y=Math.max(g,f,p);c.setLayout({value:y},!0)})})(u),function(h,c,g,f,p,y,_,S,m){(function(v,b,x,I,w,M,D){for(var C=[],L=[],T=[],A=[],k=0,N=0;N<b.length;N++)C[N]=1;for(N=0;N<v.length;N++)L[N]=v[N].inEdges.length,L[N]===0&&T.push(v[N]);for(var V=-1;T.length;){for(var P=0;P<T.length;P++){var z=T[P],E=z.hostGraph.data.getRawDataItem(z.dataIndex),B=E.depth!=null&&E.depth>=0;B&&E.depth>V&&(V=E.depth),z.setLayout({depth:B?E.depth:k},!0),M==="vertical"?z.setLayout({dy:x},!0):z.setLayout({dx:x},!0);for(var G=0;G<z.outEdges.length;G++){var Z=z.outEdges[G];C[b.indexOf(Z)]=0;var O=Z.node2;--L[v.indexOf(O)]==0&&A.indexOf(O)<0&&A.push(O)}}++k,T=A,A=[]}for(N=0;N<C.length;N++)if(C[N]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var F=V>k-1?V:k-1;D&&D!=="left"&&function(H,j,q,X){if(j==="right"){for(var K=[],re=H,Ie=0;re.length;){for(var Fe=0;Fe<re.length;Fe++){var Pe=re[Fe];Pe.setLayout({skNodeHeight:Ie},!0);for(var ae=0;ae<Pe.inEdges.length;ae++){var ie=Pe.inEdges[ae];K.indexOf(ie.node1)<0&&K.push(ie.node1)}}re=K,K=[],++Ie}R(H,function(fe){is(fe)||fe.setLayout({depth:Math.max(0,X-fe.getLayout().skNodeHeight)},!0)})}else j==="justify"&&function(fe,We){R(fe,function(et){is(et)||et.outEdges.length||et.setLayout({depth:We},!0)})}(H,X)}(v,D,0,F);var Y=M==="vertical"?(w-x)/F:(I-x)/F;(function(H,j,q){R(H,function(X){var K=X.getLayout().depth*j;q==="vertical"?X.setLayout({y:K},!0):X.setLayout({x:K},!0)})})(v,Y,M)})(h,c,g,p,y,S,m),function(v,b,x,I,w,M,D){var C=function(T,A){var k=[],N=A==="vertical"?"y":"x",V=Pr(T,function(P){return P.getLayout()[N]});return V.keys.sort(function(P,z){return P-z}),R(V.keys,function(P){k.push(V.buckets.get(P))}),k}(v,D);(function(T,A,k,N,V,P){var z=1/0;R(T,function(E){var B=E.length,G=0;R(E,function(O){G+=O.getLayout().value});var Z=P==="vertical"?(N-(B-1)*V)/G:(k-(B-1)*V)/G;Z<z&&(z=Z)}),R(T,function(E){R(E,function(B,G){var Z=B.getLayout().value*z;P==="vertical"?(B.setLayout({x:G},!0),B.setLayout({dx:Z},!0)):(B.setLayout({y:G},!0),B.setLayout({dy:Z},!0))})}),R(A,function(E){var B=+E.getValue()*z;E.setLayout({dy:B},!0)})})(C,b,x,I,w,D),_i(C,w,x,I,D);for(var L=1;M>0;M--)cp(C,L*=.99,D),_i(C,w,x,I,D),vp(C,L,D),_i(C,w,x,I,D)}(h,c,y,p,f,_,S),function(v,b){var x=b==="vertical"?"x":"y";R(v,function(I){I.outEdges.sort(function(w,M){return w.node2.getLayout()[x]-M.node2.getLayout()[x]}),I.inEdges.sort(function(w,M){return w.node1.getLayout()[x]-M.node1.getLayout()[x]})}),R(v,function(I){var w=0,M=0;R(I.outEdges,function(D){D.setLayout({sy:w},!0),w+=D.getLayout().dy}),R(I.inEdges,function(D){D.setLayout({ty:M},!0),M+=D.getLayout().dy})})}(h,S)}(u,d,n,i,a,s,Xe(u,function(h){return h.getLayout().value===0}).length!==0?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))})}function is(r){var t=r.hostGraph.data.getRawDataItem(r.dataIndex);return t.depth!=null&&t.depth>=0}function _i(r,t,e,n,i){var o=i==="vertical"?"x":"y";R(r,function(a){var s,l,u;a.sort(function(f,p){return f.getLayout()[o]-p.getLayout()[o]});for(var d=0,h=a.length,c=i==="vertical"?"dx":"dy",g=0;g<h;g++)(u=d-(l=a[g]).getLayout()[o])>0&&(s=l.getLayout()[o]+u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),d=l.getLayout()[o]+l.getLayout()[c]+t;if((u=d-t-(i==="vertical"?n:e))>0)for(s=l.getLayout()[o]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),d=s,g=h-2;g>=0;--g)(u=(l=a[g]).getLayout()[o]+l.getLayout()[c]+t-d)>0&&(s=l.getLayout()[o]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),d=l.getLayout()[o]})}function cp(r,t,e){R(r.slice().reverse(),function(n){R(n,function(i){if(i.outEdges.length){var o=vt(i.outEdges,pp,e)/vt(i.outEdges,Xn);if(isNaN(o)){var a=i.outEdges.length;o=a?vt(i.outEdges,fp,e)/a:0}if(e==="vertical"){var s=i.getLayout().x+(o-yt(i,e))*t;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(o-yt(i,e))*t;i.setLayout({y:l},!0)}}})})}function pp(r,t){return yt(r.node2,t)*r.getValue()}function fp(r,t){return yt(r.node2,t)}function gp(r,t){return yt(r.node1,t)*r.getValue()}function yp(r,t){return yt(r.node1,t)}function yt(r,t){return t==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function Xn(r){return r.getValue()}function vt(r,t,e){for(var n=0,i=r.length,o=-1;++o<i;){var a=+t(r[o],e);isNaN(a)||(n+=a)}return n}function vp(r,t,e){R(r,function(n){R(n,function(i){if(i.inEdges.length){var o=vt(i.inEdges,gp,e)/vt(i.inEdges,Xn);if(isNaN(o)){var a=i.inEdges.length;o=a?vt(i.inEdges,yp,e)/a:0}if(e==="vertical"){var s=i.getLayout().x+(o-yt(i,e))*t;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(o-yt(i,e))*t;i.setLayout({y:l},!0)}}})})}function mp(r){r.eachSeriesByType("sankey",function(t){var e=t.getGraph(),n=e.nodes,i=e.edges;if(n.length){var o=1/0,a=-1/0;R(n,function(s){var l=s.getLayout().value;l<o&&(o=l),l>a&&(a=l)}),R(n,function(s){var l=new Eo({type:"color",mappingMethod:"linear",dataExtent:[o,a],visual:t.get("color")}).mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",l),s.setVisual("style",{fill:l}))})}i.length&&R(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}var os=function(){function r(){}return r.prototype.getInitialData=function(t,e){var n,i,o=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),s=o.get("type"),l=a.get("type");s==="category"?(t.layout="horizontal",n=o.getOrdinalMeta(),i=!0):l==="category"?(t.layout="vertical",n=a.getOrdinalMeta(),i=!0):t.layout=t.layout||"horizontal";var u=["x","y"],d=t.layout==="horizontal"?0:1,h=this._baseAxisDim=u[d],c=u[1-d],g=[o,a],f=g[d].get("type"),p=g[1-d].get("type"),y=t.data;if(y&&i){var _=[];R(y,function(v,b){var x;$(v)?(x=v.slice(),v.unshift(b)):$(v.value)?((x=J({},v)).value=x.value.slice(),v.value.unshift(b)):x=v,_.push(x)}),t.data=_}var S=this.defaultValueDimensions,m=[{name:h,type:kr(f),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:c,type:kr(p),dimsDef:S.slice()}];return Go(this,{coordDimensions:m,dimensionsCount:S.length+1,encodeDefaulter:pe(Uu,m,this)})},r.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},r}(),as=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return U(t,r),t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(we);bt(as,os,!0);var xp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.render=function(e,n,i){var o=e.getData(),a=this.group,s=this._data;this._data||a.removeAll();var l=e.get("layout")==="horizontal"?1:0;o.diff(s).add(function(u){if(o.hasValue(u)){var d=ss(o.getItemLayout(u),o,u,l,!0);o.setItemGraphicEl(u,d),a.add(d)}}).update(function(u,d){var h=s.getItemGraphicEl(d);if(o.hasValue(u)){var c=o.getItemLayout(u);h?(Et(h),ls(c,h,o,u)):h=ss(c,o,u,l),a.add(h),o.setItemGraphicEl(u,h)}else a.remove(h)}).remove(function(u){var d=s.getItemGraphicEl(u);d&&a.remove(d)}).execute(),this._data=o},t.prototype.remove=function(e){var n=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(o){o&&n.remove(o)})},t.type="boxplot",t}(Me),_p=function(){},bp=function(r){function t(e){var n=r.call(this,e)||this;return n.type="boxplotBoxPath",n}return U(t,r),t.prototype.getDefaultShape=function(){return new _p},t.prototype.buildPath=function(e,n){var i=n.points,o=0;for(e.moveTo(i[o][0],i[o][1]),o++;o<4;o++)e.lineTo(i[o][0],i[o][1]);for(e.closePath();o<i.length;o++)e.moveTo(i[o][0],i[o][1]),o++,e.lineTo(i[o][0],i[o][1])},t}(be);function ss(r,t,e,n,i){var o=r.ends,a=new bp({shape:{points:i?Sp(o,n,r):o}});return ls(r,a,t,e,i),a}function ls(r,t,e,n,i){var o=e.hostModel;(0,Yu[i?"initProps":"updateProps"])(t,{shape:{points:r.ends}},o,n),t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.z2=100;var a=e.getItemModel(n),s=a.getModel("emphasis");nt(t,a),Ae(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function Sp(r,t,e){return Q(r,function(n){return(n=n.slice())[t]=e.initBaseline,n})}var fn=R;function Ip(r){var t=function(e){var n=[],i=[];return e.eachSeriesByType("boxplot",function(o){var a=o.getBaseAxis(),s=ze(i,a);s<0&&(s=i.length,i[s]=a,n[s]={axis:a,seriesModels:[]}),n[s].seriesModels.push(o)}),n}(r);fn(t,function(e){var n=e.seriesModels;n.length&&(function(i){var o,a=i.axis,s=i.seriesModels,l=s.length,u=i.boxWidthList=[],d=i.boxOffsetList=[],h=[];if(a.type==="category")o=a.getBandWidth();else{var c=0;fn(s,function(S){c=Math.max(c,S.getData().count())});var g=a.getExtent();o=Math.abs(g[1]-g[0])/c}fn(s,function(S){var m=S.get("boxWidth");$(m)||(m=[m,m]),h.push([ne(m[0],o)||0,ne(m[1],o)||0])});var f=.8*o-2,p=f/l*.3,y=(f-p*(l-1))/l,_=y/2-f/2;fn(s,function(S,m){d.push(_),_+=p+y,u.push(Math.min(Math.max(y,h[m][0]),h[m][1]))})}(e),fn(n,function(i,o){(function(a,s,l){var u=a.coordinateSystem,d=a.getData(),h=l/2,c=a.get("layout")==="horizontal"?0:1,g=1-c,f=["x","y"],p=d.mapDimension(f[c]),y=d.mapDimensionsAll(f[g]);if(p==null||y.length<5)return;for(var _=0;_<d.count();_++){var S=d.get(p,_),m=M(S,y[2],_),v=M(S,y[0],_),b=M(S,y[1],_),x=M(S,y[3],_),I=M(S,y[4],_),w=[];D(w,b,!1),D(w,x,!0),w.push(v,b,I,x),C(w,v),C(w,I),C(w,m),d.setItemLayout(_,{initBaseline:m[g],ends:w})}function M(L,T,A){var k,N=d.get(T,A),V=[];return V[c]=L,V[g]=N,isNaN(L)||isNaN(N)?k=[NaN,NaN]:(k=u.dataToPoint(V))[c]+=s,k}function D(L,T,A){var k=T.slice(),N=T.slice();k[c]+=h,N[c]-=h,A?L.push(k,N):L.push(N,k)}function C(L,T){var A=T.slice(),k=T.slice();A[c]-=h,k[c]+=h,L.push(A,k)}})(i,e.boxOffsetList[o],e.boxWidthList[o])}))})}var wp={type:"echarts:boxplot",transform:function(r){var t=r.upstream;t.sourceFormat!==Wo&&de("");var e=function(n,i){for(var o=[],a=[],s=(i=i||{}).boundIQR,l=s==="none"||s===0,u=0;u<n.length;u++){var d=Vn(n[u].slice()),h=Vr(d,.25),c=Vr(d,.5),g=Vr(d,.75),f=d[0],p=d[d.length-1],y=(s??1.5)*(g-h),_=l?f:Math.max(f,h-y),S=l?p:Math.min(p,g+y),m=i.itemNameFormatter,v=xe(m)?m({value:u}):ue(m)?m.replace("{value}",u+""):u+"";o.push([v,_,h,c,g,S]);for(var b=0;b<d.length;b++){var x=d[b];if(x<_||x>S){var I=[v,x];a.push(I)}}}return{boxData:o,outliers:a}}(t.getRawData(),r.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:e.boxData},{data:e.outliers}]}},Mp=["color","borderColor"],Dp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.render=function(e,n,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,n,i){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,n,i,o){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,n):this._incrementalRenderNormal(e,n)},t.prototype.eachRendered=function(e){Pn(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;this._isLargeDraw!=null&&n===this._isLargeDraw||(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(e){var n=e.getData(),i=this._data,o=this.group,a=n.getLayout("isSimpleBox"),s=e.get("clip",!0),l=e.coordinateSystem,u=l.getArea&&l.getArea();this._data||o.removeAll(),n.diff(i).add(function(d){if(n.hasValue(d)){var h=n.getItemLayout(d);if(s&&us(u,h))return;var c=bi(h,d,!0);pt(c,{shape:{points:h.ends}},e,d),Si(c,n,d,a),o.add(c),n.setItemGraphicEl(d,c)}}).update(function(d,h){var c=i.getItemGraphicEl(h);if(n.hasValue(d)){var g=n.getItemLayout(d);s&&us(u,g)?o.remove(c):(c?(Te(c,{shape:{points:g.ends}},e,d),Et(c)):c=bi(g),Si(c,n,d,a),o.add(c),n.setItemGraphicEl(d,c))}else o.remove(c)}).remove(function(d){var h=i.getItemGraphicEl(d);h&&o.remove(h)}).execute(),this._data=n},t.prototype._renderLarge=function(e){this._clear(),ds(e,this.group);var n=e.get("clip",!0)?Er(e.coordinateSystem,!1,e):null;n?this.group.setClipPath(n):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,n){for(var i,o=n.getData(),a=o.getLayout("isSimpleBox");(i=e.next())!=null;){var s=bi(o.getItemLayout(i));Si(s,o,i,a),s.incremental=!0,this.group.add(s),this._progressiveEls.push(s)}},t.prototype._incrementalRenderLarge=function(e,n){ds(n,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(Me),Lp=function(){},Cp=function(r){function t(e){var n=r.call(this,e)||this;return n.type="normalCandlestickBox",n}return U(t,r),t.prototype.getDefaultShape=function(){return new Lp},t.prototype.buildPath=function(e,n){var i=n.points;this.__simpleBox?(e.moveTo(i[4][0],i[4][1]),e.lineTo(i[6][0],i[6][1])):(e.moveTo(i[0][0],i[0][1]),e.lineTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.closePath(),e.moveTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.moveTo(i[6][0],i[6][1]),e.lineTo(i[7][0],i[7][1]))},t}(be);function bi(r,t,e){var n=r.ends;return new Cp({shape:{points:e?Tp(n,r):n},z2:100})}function us(r,t){for(var e=!0,n=0;n<t.ends.length;n++)if(r.contain(t.ends[n][0],t.ends[n][1])){e=!1;break}return e}function Si(r,t,e,n){var i=t.getItemModel(e);r.useStyle(t.getItemVisual(e,"style")),r.style.strokeNoScale=!0,r.__simpleBox=n,nt(r,i)}function Tp(r,t){return Q(r,function(e){return(e=e.slice())[1]=t.initBaseline,e})}var Ap=function(){},Ii=function(r){function t(e){var n=r.call(this,e)||this;return n.type="largeCandlestickBox",n}return U(t,r),t.prototype.getDefaultShape=function(){return new Ap},t.prototype.buildPath=function(e,n){for(var i=n.points,o=0;o<i.length;)if(this.__sign===i[o++]){var a=i[o++];e.moveTo(a,i[o++]),e.lineTo(a,i[o++])}else o+=3},t}(be);function ds(r,t,e,n){var i=r.getData().getLayout("largePoints"),o=new Ii({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});t.add(o);var a=new Ii({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});t.add(a);var s=new Ii({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});t.add(s),wi(1,o,r),wi(-1,a,r),wi(0,s,r),n&&(o.incremental=!0,a.incremental=!0),e&&e.push(o,a)}function wi(r,t,e,n){var i=e.get(["itemStyle",r>0?"borderColor":"borderColor0"])||e.get(["itemStyle",r>0?"color":"color0"]);r===0&&(i=e.get(["itemStyle","borderColorDoji"]));var o=e.getModel("itemStyle").getItemStyle(Mp);t.useStyle(o),t.style.fill=null,t.style.stroke=i}var hs=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return U(t,r),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,n,i){var o=n.getItemLayout(e);return o&&i.rect(o.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(we);function Np(r){r&&$(r.series)&&R(r.series,function(t){$t(t)&&t.type==="k"&&(t.type="candlestick")})}bt(hs,os,!0);var Pp=["itemStyle","borderColor"],kp=["itemStyle","borderColor0"],Vp=["itemStyle","borderColorDoji"],Ep=["itemStyle","color"],zp=["itemStyle","color0"],Rp={seriesType:"candlestick",plan:zr(),performRawSeries:!0,reset:function(r,t){function e(i,o){return o.get(i>0?Ep:zp)}function n(i,o){return o.get(i===0?Vp:i>0?Pp:kp)}if(!t.isSeriesFiltered(r))return!r.pipelineContext.large&&{progress:function(i,o){for(var a;(a=i.next())!=null;){var s=o.getItemModel(a),l=o.getItemLayout(a).sign,u=s.getItemStyle();u.fill=e(l,s),u.stroke=n(l,s)||u.fill;var d=o.ensureUniqueItemVisual(a,"style");J(d,u)}}}}},Op={seriesType:"candlestick",plan:zr(),reset:function(r){var t=r.coordinateSystem,e=r.getData(),n=function(h,c){var g,f=h.getBaseAxis(),p=f.type==="category"?f.getBandWidth():(g=f.getExtent(),Math.abs(g[1]-g[0])/c.count()),y=ne(Le(h.get("barMaxWidth"),p),p),_=ne(Le(h.get("barMinWidth"),1),p),S=h.get("barWidth");return S!=null?ne(S,p):Math.max(Math.min(p/2,y),_)}(r,e),i=["x","y"],o=e.getDimensionIndex(e.mapDimension(i[0])),a=Q(e.mapDimensionsAll(i[1]),e.getDimensionIndex,e),s=a[0],l=a[1],u=a[2],d=a[3];if(e.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),!(o<0||a.length<4))return{progress:r.pipelineContext.large?function(h,c){for(var g,f,p=Xu(4*h.count),y=0,_=[],S=[],m=c.getStore(),v=!!r.get(["itemStyle","borderColorDoji"]);(f=h.next())!=null;){var b=m.get(o,f),x=m.get(s,f),I=m.get(l,f),w=m.get(u,f),M=m.get(d,f);isNaN(b)||isNaN(w)||isNaN(M)?(p[y++]=NaN,y+=3):(p[y++]=cs(m,f,x,I,l,v),_[0]=b,_[1]=w,g=t.dataToPoint(_,null,S),p[y++]=g?g[0]:NaN,p[y++]=g?g[1]:NaN,_[1]=M,g=t.dataToPoint(_,null,S),p[y++]=g?g[1]:NaN)}c.setLayout("largePoints",p)}:function(h,c){for(var g,f=c.getStore();(g=h.next())!=null;){var p=f.get(o,g),y=f.get(s,g),_=f.get(l,g),S=f.get(u,g),m=f.get(d,g),v=Math.min(y,_),b=Math.max(y,_),x=L(v,p),I=L(b,p),w=L(S,p),M=L(m,p),D=[];T(D,I,0),T(D,x,1),D.push(k(M),k(I),k(w),k(x));var C=!!c.getItemModel(g).get(["itemStyle","borderColorDoji"]);c.setItemLayout(g,{sign:cs(f,g,y,_,l,C),initBaseline:y>_?I[1]:x[1],ends:D,brushRect:A(S,m,p)})}function L(N,V){var P=[];return P[0]=V,P[1]=N,isNaN(V)||isNaN(N)?[NaN,NaN]:t.dataToPoint(P)}function T(N,V,P){var z=V.slice(),E=V.slice();z[0]=Rr(z[0]+n/2,1,!1),E[0]=Rr(E[0]-n/2,1,!0),P?N.push(z,E):N.push(E,z)}function A(N,V,P){var z=L(N,P),E=L(V,P);return z[0]-=n/2,E[0]-=n/2,{x:z[0],y:z[1],width:n,height:E[1]-z[1]}}function k(N){return N[0]=Rr(N[0],1),N}}}}};function cs(r,t,e,n,i,o){return e>n?-1:e<n?1:o?0:t>0?r.get(i,t-1)<=n?1:-1:1}function ps(r,t){var e=t.rippleEffectColor||t.color;r.eachChild(function(n){n.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?e:null,fill:t.brushType==="fill"?e:null}})})}var Bp=function(r){function t(e,n){var i=r.call(this)||this,o=new Do(e,n),a=new ce;return i.add(o),i.add(a),i.updateData(e,n),i}return U(t,r),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var n=e.symbolType,i=e.color,o=e.rippleNumber,a=this.childAt(1),s=0;s<o;s++){var l=Zt(n,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/o*e.period+e.effectOffset;l.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(e.period,{opacity:0}).delay(u).start(),a.add(l)}ps(a,e)},t.prototype.updateEffectAnimation=function(e){for(var n=this._effectCfg,i=this.childAt(1),o=["symbolType","period","rippleScale","rippleNumber"],a=0;a<o.length;a++){var s=o[a];if(n[s]!==e[s])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}ps(i,e)},t.prototype.highlight=function(){Lr(this)},t.prototype.downplay=function(){Cr(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,n){var i=this,o=e.hostModel;this.childAt(0).updateData(e,n);var a=this.childAt(1),s=e.getItemModel(n),l=e.getItemVisual(n,"symbol"),u=An(e.getItemVisual(n,"symbolSize")),d=e.getItemVisual(n,"style"),h=d&&d.fill,c=s.getModel("emphasis");a.setScale(u),a.traverse(function(y){y.setStyle("fill",h)});var g=Nn(e.getItemVisual(n,"symbolOffset"),u);g&&(a.x=g[0],a.y=g[1]);var f=e.getItemVisual(n,"symbolRotate");a.rotation=(f||0)*Math.PI/180||0;var p={};p.showEffectOn=o.get("showEffectOn"),p.rippleScale=s.get(["rippleEffect","scale"]),p.brushType=s.get(["rippleEffect","brushType"]),p.period=1e3*s.get(["rippleEffect","period"]),p.effectOffset=n/e.count(),p.z=o.getShallow("z")||0,p.zlevel=o.getShallow("zlevel")||0,p.symbolType=l,p.color=h,p.rippleEffectColor=s.get(["rippleEffect","color"]),p.rippleNumber=s.get(["rippleEffect","number"]),p.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(y){y==="emphasis"?p.showEffectOn!=="render"&&i.startEffectAnimation(p):y==="normal"&&p.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=p,Ae(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(ce),Gp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(){this._symbolDraw=new Sn(Bp)},t.prototype.render=function(e,n,i){var o=e.getData(),a=this._symbolDraw;a.updateData(o,{clipShape:this._getClipShape(e)}),this.group.add(a.group)},t.prototype._getClipShape=function(e){var n=e.coordinateSystem,i=n&&n.getArea&&n.getArea();return e.get("clip",!0)?i:null},t.prototype.updateTransform=function(e,n,i){var o=e.getData();this.group.dirty();var a=bn("").reset(e,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var n=e.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=Zu(n.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(Me),Fp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return U(t,r),t.prototype.getInitialData=function(e,n){return Nt(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,n,i){return i.point(n.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(we),fs=function(r){function t(e,n,i){var o=r.call(this)||this;return o.add(o.createLine(e,n,i)),o._updateEffectSymbol(e,n),o}return U(t,r),t.prototype.createLine=function(e,n,i){return new hi(e,n,i)},t.prototype._updateEffectSymbol=function(e,n){var i=e.getItemModel(n).getModel("effect"),o=i.get("symbolSize"),a=i.get("symbol");$(o)||(o=[o,o]);var s=e.getItemVisual(n,"style"),l=i.get("color")||s&&s.stroke,u=this.childAt(1);this._symbolType!==a&&(this.remove(u),(u=Zt(a,-.5,-.5,1,1,l)).z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",l),u.setStyle(i.getItemStyle(["color"])),u.scaleX=o[0],u.scaleY=o[1],u.setColor(l),this._symbolType=a,this._symbolScale=o,this._updateEffectAnimation(e,i,n))},t.prototype._updateEffectAnimation=function(e,n,i){var o=this.childAt(1);if(o){var a=e.getItemLayout(i),s=1e3*n.get("period"),l=n.get("loop"),u=n.get("roundTrip"),d=n.get("constantSpeed"),h=Ke(n.get("delay"),function(g){return g/e.count()*s/3});if(o.ignore=!0,this._updateAnimationPoints(o,a),d>0&&(s=this._getLineLength(o)/d*1e3),s!==this._period||l!==this._loop||u!==this._roundTrip){o.stopAnimation();var c=void 0;c=xe(h)?h(i):h,o.__t>0&&(c=-s*o.__t),this._animateSymbol(o,s,c,l,u)}this._period=s,this._loop=l,this._roundTrip=u}},t.prototype._animateSymbol=function(e,n,i,o,a){if(n>0){e.__t=0;var s=this,l=e.animate("",o).when(a?2*n:n,{__t:a?2:1}).delay(i).during(function(){s._updateSymbolPosition(e)});o||l.done(function(){s.remove(e)}),l.start()}},t.prototype._getLineLength=function(e){return Jt(e.__p1,e.__cp1)+Jt(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,n){e.__p1=n[0],e.__p2=n[1],e.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},t.prototype.updateData=function(e,n,i){this.childAt(0).updateData(e,n,i),this._updateEffectSymbol(e,n)},t.prototype._updateSymbolPosition=function(e){var n=e.__p1,i=e.__p2,o=e.__cp1,a=e.__t<1?e.__t:2-e.__t,s=[e.x,e.y],l=s.slice(),u=Oo,d=ju;s[0]=u(n[0],o[0],i[0],a),s[1]=u(n[1],o[1],i[1],a);var h=e.__t<1?d(n[0],o[0],i[0],a):d(i[0],o[0],n[0],1-a),c=e.__t<1?d(n[1],o[1],i[1],a):d(i[1],o[1],n[1],1-a);e.rotation=-Math.atan2(c,h)-Math.PI/2,this._symbolType!=="line"&&this._symbolType!=="rect"&&this._symbolType!=="roundRect"||(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=1.05*Jt(l,s),a===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):e.__lastT===1?e.scaleY=2*Jt(n,s):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=s[0],e.y=s[1]},t.prototype.updateLayout=function(e,n){this.childAt(0).updateLayout(e,n);var i=e.getItemModel(n).getModel("effect");this._updateEffectAnimation(e,i,n)},t}(ce),gs=function(r){function t(e,n,i){var o=r.call(this)||this;return o._createPolyline(e,n,i),o}return U(t,r),t.prototype._createPolyline=function(e,n,i){var o=e.getItemLayout(n),a=new kn({shape:{points:o}});this.add(a),this._updateCommonStl(e,n,i)},t.prototype.updateData=function(e,n,i){var o=e.hostModel,a=this.childAt(0),s={shape:{points:e.getItemLayout(n)}};Te(a,s,o,n),this._updateCommonStl(e,n,i)},t.prototype._updateCommonStl=function(e,n,i){var o=this.childAt(0),a=e.getItemModel(n),s=i&&i.emphasisLineStyle,l=i&&i.focus,u=i&&i.blurScope,d=i&&i.emphasisDisabled;if(!i||e.hasItemOption){var h=a.getModel("emphasis");s=h.getModel("lineStyle").getLineStyle(),d=h.get("disabled"),l=h.get("focus"),u=h.get("blurScope")}o.useStyle(e.getItemVisual(n,"style")),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,Ae(this,l,u,d)},t.prototype.updateLayout=function(e,n){this.childAt(0).setShape("points",e.getItemLayout(n))},t}(ce),Wp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return U(t,r),t.prototype.createLine=function(e,n,i){return new gs(e,n,i)},t.prototype._updateAnimationPoints=function(e,n){this._points=n;for(var i=[0],o=0,a=1;a<n.length;a++){var s=n[a-1],l=n[a];o+=Jt(s,l),i.push(o)}if(o!==0){for(a=0;a<i.length;a++)i[a]/=o;this._offsets=i,this._length=o}else this._length=0},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var n=e.__t<1?e.__t:2-e.__t,i=this._points,o=this._offsets,a=i.length;if(o){var s,l=this._lastFrame;if(n<this._lastFramePercent){for(s=Math.min(l+1,a-1);s>=0&&!(o[s]<=n);s--);s=Math.min(s,a-2)}else{for(s=l;s<a&&!(o[s]>n);s++);s=Math.min(s-1,a-2)}var u=(n-o[s])/(o[s+1]-o[s]),d=i[s],h=i[s+1];e.x=d[0]*(1-u)+u*h[0],e.y=d[1]*(1-u)+u*h[1];var c=e.__t<1?h[0]-d[0]:d[0]-h[0],g=e.__t<1?h[1]-d[1]:d[1]-h[1];e.rotation=-Math.atan2(g,c)-Math.PI/2,this._lastFrame=s,this._lastFramePercent=n,e.ignore=!1}},t}(fs),Hp=function(){this.polyline=!1,this.curveness=0,this.segs=[]},Up=function(r){function t(e){var n=r.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return U(t,r),t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Hp},t.prototype.buildPath=function(e,n){var i,o=n.segs,a=n.curveness;if(n.polyline)for(i=this._off;i<o.length;){var s=o[i++];if(s>0){e.moveTo(o[i++],o[i++]);for(var l=1;l<s;l++)e.lineTo(o[i++],o[i++])}}else for(i=this._off;i<o.length;){var u=o[i++],d=o[i++],h=o[i++],c=o[i++];if(e.moveTo(u,d),a>0){var g=(u+h)/2-(d-c)*a,f=(d+c)/2-(h-u)*a;e.quadraticCurveTo(g,f,h,c)}else e.lineTo(h,c)}this.incremental&&(this._off=i,this.notClear=!0)},t.prototype.findDataIndex=function(e,n){var i=this.shape,o=i.segs,a=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var l=0,u=0;u<o.length;){var d=o[u++];if(d>0)for(var h=o[u++],c=o[u++],g=1;g<d;g++){var f=o[u++],p=o[u++];if(Ho(h,c,f,p,s,e,n))return l}l++}else for(l=0,u=0;u<o.length;){if(h=o[u++],c=o[u++],f=o[u++],p=o[u++],a>0){if(qu(h,c,(h+f)/2-(c-p)*a,(c+p)/2-(f-h)*a,f,p,s,e,n))return l}else if(Ho(h,c,f,p,s,e,n))return l;l++}return-1},t.prototype.contain=function(e,n){var i=this.transformCoordToLocal(e,n),o=this.getBoundingRect();return e=i[0],n=i[1],o.contain(e,n)?(this.hoverDataIdx=this.findDataIndex(e,n))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape.segs,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<n.length;){var u=n[l++],d=n[l++];i=Math.min(u,i),a=Math.max(u,a),o=Math.min(d,o),s=Math.max(d,s)}e=this._rect=new Ze(i,o,a,s)}return e},t}(be),Yp=function(){function r(){this.group=new ce}return r.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},r.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(t,e){var n=this._newAdded[0],i=e.getLayout("linesPoints"),o=n&&n.shape.segs;if(o&&o.length<2e4){var a=o.length,s=new Float32Array(a+i.length);s.set(o),s.set(i,a),n.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,e),l.__startIndex=t.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new Up({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},r.prototype._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var o=e.getVisual("style");o&&o.stroke&&t.setStyle("stroke",o.stroke),t.setStyle("fill",null);var a=ve(t);a.seriesIndex=i.seriesIndex,t.on("mousemove",function(s){a.dataIndex=null;var l=t.hoverDataIdx;l>0&&(a.dataIndex=l+t.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),ys={seriesType:"lines",plan:zr(),reset:function(r){var t=r.coordinateSystem;if(t){var e=r.get("polyline"),n=r.pipelineContext.large;return{progress:function(i,o){var a=[];if(n){var s=void 0,l=i.end-i.start;if(e){for(var u=0,d=i.start;d<i.end;d++)u+=r.getLineCoordsCount(d);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var h=0,c=[];for(d=i.start;d<i.end;d++){var g=r.getLineCoords(d,a);e&&(s[h++]=g);for(var f=0;f<g;f++)c=t.dataToPoint(a[f],!1,c),s[h++]=c[0],s[h++]=c[1]}o.setLayout("linesPoints",s)}else for(d=i.start;d<i.end;d++){var p=o.getItemModel(d),y=(g=r.getLineCoords(d,a),[]);if(e)for(var _=0;_<g;_++)y.push(t.dataToPoint(a[_]));else{y[0]=t.dataToPoint(a[0]),y[1]=t.dataToPoint(a[1]);var S=p.get(["lineStyle","curveness"]);+S&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*S,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*S])}o.setItemLayout(d,y)}}}}}},Xp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.render=function(e,n,i){var o=e.getData(),a=this._updateLineDraw(o,e),s=e.get("zlevel"),l=e.get(["effect","trailLength"]),u=i.getZr(),d=u.painter.getType()==="svg";d||u.painter.getLayer(s).clear(!0),this._lastZlevel==null||d||u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&l>0&&(d||u.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),a.updateData(o);var h=e.get("clip",!0)&&Er(e.coordinateSystem,!1,e);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,n,i){var o=e.getData();this._updateLineDraw(o,e).incrementalPrepareUpdate(o),this._clearLayer(i),this._finished=!1},t.prototype.incrementalRender=function(e,n,i){this._lineDraw.incrementalUpdate(e,n.getData()),this._finished=e.end===n.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,n,i){var o=e.getData(),a=e.pipelineContext;if(!this._finished||a.large||a.progressiveRender)return{update:!0};var s=ys.reset(e,n,i);s.progress&&s.progress({start:0,end:o.count(),count:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(i)},t.prototype._updateLineDraw=function(e,n){var i=this._lineDraw,o=this._showEffect(n),a=!!n.get("polyline"),s=n.pipelineContext.large;return i&&o===this._hasEffet&&a===this._isPolyline&&s===this._isLargeDraw||(i&&i.remove(),i=this._lineDraw=s?new Yp:new ci(a?o?Wp:gs:o?fs:hi),this._hasEffet=o,this._isPolyline=a,this._isLargeDraw=s),this.group.add(i.group),i},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var n=e.getZr();n.painter.getType()==="svg"||this._lastZlevel==null||n.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},t.prototype.dispose=function(e,n){this.remove(e,n)},t.type="lines",t}(Me),Zp=typeof Uint32Array>"u"?Array:Uint32Array,jp=typeof Float64Array>"u"?Array:Float64Array;function vs(r){var t=r.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(r.data=Q(t,function(e){var n={coords:[e[0].coord,e[1].coord]};return e[0].name&&(n.fromName=e[0].name),e[1].name&&(n.toName=e[1].name),Uo([n,e[0],e[1]])}))}var qp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return U(t,r),t.prototype.init=function(e){e.data=e.data||[],vs(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),r.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(e){if(vs(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}r.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var n=this._processFlatCoordsArray(e.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=_r(this._flatCoords,n.flatCoords),this._flatCoordsOffset=_r(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),e.data=new Float32Array(n.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var n=this.getData().getItemModel(e);return n.option instanceof Array?n.option:n.getShallow("coords")},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,n){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[2*e],o=this._flatCoordsOffset[2*e+1],a=0;a<o;a++)n[a]=n[a]||[],n[a][0]=this._flatCoords[i+2*a],n[a][1]=this._flatCoords[i+2*a+1];return o}var s=this._getCoordsFromItemModel(e);for(a=0;a<s.length;a++)n[a]=n[a]||[],n[a][0]=s[a][0],n[a][1]=s[a][1];return s.length},t.prototype._processFlatCoordsArray=function(e){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),ot(e[0])){for(var i=e.length,o=new Zp(i),a=new jp(i),s=0,l=0,u=0,d=0;d<i;){u++;var h=e[d++];o[l++]=s+n,o[l++]=h;for(var c=0;c<h;c++){var g=e[d++],f=e[d++];a[s++]=g,a[s++]=f}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,l),flatCoords:a,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,n){var i=new Ee(["value"],this);return i.hasItemOption=!1,i.initData(e.data,[],function(o,a,s,l){if(o instanceof Array)return NaN;i.hasItemOption=!0;var u=o.value;return u!=null?u instanceof Array?u[l]:u:void 0}),i},t.prototype.formatTooltip=function(e,n,i){var o=this.getData().getItemModel(e),a=o.get("name");if(a)return a;var s=o.get("fromName"),l=o.get("toName"),u=[];return s!=null&&u.push(s),l!=null&&u.push(l),je("nameValue",{name:u.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),n=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&n>0?n+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(we);function Zn(r){return r instanceof Array||(r=[r,r]),r}var Kp={seriesType:"lines",reset:function(r){var t=Zn(r.get("symbol")),e=Zn(r.get("symbolSize")),n=r.getData();return n.setVisual("fromSymbol",t&&t[0]),n.setVisual("toSymbol",t&&t[1]),n.setVisual("fromSymbolSize",e&&e[0]),n.setVisual("toSymbolSize",e&&e[1]),{dataEach:n.hasItemOption?function(i,o){var a=i.getItemModel(o),s=Zn(a.getShallow("symbol",!0)),l=Zn(a.getShallow("symbolSize",!0));s[0]&&i.setItemVisual(o,"fromSymbol",s[0]),s[1]&&i.setItemVisual(o,"toSymbol",s[1]),l[0]&&i.setItemVisual(o,"fromSymbolSize",l[0]),l[1]&&i.setItemVisual(o,"toSymbolSize",l[1])}:null}}},Qp=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Yo.createCanvas();this.canvas=t}return r.prototype.update=function(t,e,n,i,o,a){var s=this._getBrush(),l=this._getGradient(o,"inRange"),u=this._getGradient(o,"outOfRange"),d=this.pointSize+this.blurSize,h=this.canvas,c=h.getContext("2d"),g=t.length;h.width=e,h.height=n;for(var f=0;f<g;++f){var p=t[f],y=p[0],_=p[1],S=i(p[2]);c.globalAlpha=S,c.drawImage(s,y-d,_-d)}if(!h.width||!h.height)return h;for(var m=c.getImageData(0,0,h.width,h.height),v=m.data,b=0,x=v.length,I=this.minOpacity,w=this.maxOpacity-I;b<x;){S=v[b+3]/256;var M=4*Math.floor(255*S);if(S>0){var D=a(S)?l:u;S>0&&(S=S*w+I),v[b++]=D[M],v[b++]=D[M+1],v[b++]=D[M+2],v[b++]=D[M+3]*S*256}else b+=4}return c.putImageData(m,0,0),h},r.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Yo.createCanvas()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},r.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,i=n[e]||(n[e]=new Uint8ClampedArray(1024)),o=[0,0,0,0],a=0,s=0;s<256;s++)t[e](s/255,!0,o),i[a++]=o[0],i[a++]=o[1],i[a++]=o[2],i[a++]=o[3];return i},r}();function ms(r){var t=r.dimensions;return t[0]==="lng"&&t[1]==="lat"}var $p=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.render=function(e,n,i){var o;n.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===e&&(o=s)})}),this._progressiveEls=null,this.group.removeAll();var a=e.coordinateSystem;a.type==="cartesian2d"||a.type==="calendar"?this._renderOnCartesianAndCalendar(e,i,0,e.getData().count()):ms(a)&&this._renderOnGeo(a,e,o,i)},t.prototype.incrementalPrepareRender=function(e,n,i){this.group.removeAll()},t.prototype.incrementalRender=function(e,n,i,o){var a=n.coordinateSystem;a&&(ms(a)?this.render(n,i,o):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(n,o,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){Pn(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,n,i,o,a){var s,l,u,d,h=e.coordinateSystem,c=En(h,"cartesian2d");if(c){var g=h.getAxis("x"),f=h.getAxis("y");s=g.getBandWidth()+.5,l=f.getBandWidth()+.5,u=g.scale.getExtent(),d=f.scale.getExtent()}for(var p=this.group,y=e.getData(),_=e.getModel(["emphasis","itemStyle"]).getItemStyle(),S=e.getModel(["blur","itemStyle"]).getItemStyle(),m=e.getModel(["select","itemStyle"]).getItemStyle(),v=e.get(["itemStyle","borderRadius"]),b=qe(e),x=e.getModel("emphasis"),I=x.get("focus"),w=x.get("blurScope"),M=x.get("disabled"),D=c?[y.mapDimension("x"),y.mapDimension("y"),y.mapDimension("value")]:[y.mapDimension("time"),y.mapDimension("value")],C=i;C<o;C++){var L=void 0,T=y.getItemVisual(C,"style");if(c){var A=y.get(D[0],C),k=y.get(D[1],C);if(isNaN(y.get(D[2],C))||isNaN(A)||isNaN(k)||A<u[0]||A>u[1]||k<d[0]||k>d[1])continue;var N=h.dataToPoint([A,k]);L=new it({shape:{x:N[0]-s/2,y:N[1]-l/2,width:s,height:l},style:T})}else{if(isNaN(y.get(D[1],C)))continue;L=new it({z2:1,shape:h.dataToRect([y.get(D[0],C)]).contentShape,style:T})}if(y.hasItemOption){var V=y.getItemModel(C),P=V.getModel("emphasis");_=P.getModel("itemStyle").getItemStyle(),S=V.getModel(["blur","itemStyle"]).getItemStyle(),m=V.getModel(["select","itemStyle"]).getItemStyle(),v=V.get(["itemStyle","borderRadius"]),I=P.get("focus"),w=P.get("blurScope"),M=P.get("disabled"),b=qe(V)}L.shape.r=v;var z=e.getRawValue(C),E="-";z&&z[2]!=null&&(E=z[2]+""),ht(L,b,{labelFetcher:e,labelDataIndex:C,defaultOpacity:T.opacity,defaultText:E}),L.ensureState("emphasis").style=_,L.ensureState("blur").style=S,L.ensureState("select").style=m,Ae(L,I,w,M),L.incremental=a,a&&(L.states.emphasis.hoverLayer=!0),p.add(L),y.setItemGraphicEl(C,L),this._progressiveEls&&this._progressiveEls.push(L)}},t.prototype._renderOnGeo=function(e,n,i,o){var a=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=n.getData(),u=this._hmLayer||this._hmLayer||new Qp;u.blurSize=n.get("blurSize"),u.pointSize=n.get("pointSize"),u.minOpacity=n.get("minOpacity"),u.maxOpacity=n.get("maxOpacity");var d=e.getViewRect().clone(),h=e.getRoamTransform();d.applyTransform(h);var c=Math.max(d.x,0),g=Math.max(d.y,0),f=Math.min(d.width+d.x,o.getWidth()),p=Math.min(d.height+d.y,o.getHeight()),y=f-c,_=p-g,S=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],m=l.mapArray(S,function(I,w,M){var D=e.dataToPoint([I,w]);return D[0]-=c,D[1]-=g,D.push(M),D}),v=i.getExtent(),b=i.type==="visualMap.continuous"?function(I,w){var M=I[1]-I[0];return w=[(w[0]-I[0])/M,(w[1]-I[0])/M],function(D){return D>=w[0]&&D<=w[1]}}(v,i.option.range):function(I,w,M){var D=I[1]-I[0],C=(w=Q(w,function(T){return{interval:[(T.interval[0]-I[0])/D,(T.interval[1]-I[0])/D]}})).length,L=0;return function(T){var A;for(A=L;A<C;A++)if((k=w[A].interval)[0]<=T&&T<=k[1]){L=A;break}if(A===C)for(A=L-1;A>=0;A--){var k;if((k=w[A].interval)[0]<=T&&T<=k[1]){L=A;break}}return A>=0&&A<C&&M[A]}}(v,i.getPieceList(),i.option.selected);u.update(m,y,_,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:s.color.getColorMapper()},b);var x=new en({style:{width:y,height:_,x:c,y:g,image:u.canvas},silent:!0});this.group.add(x)},t.type="heatmap",t}(Me),Jp=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.getInitialData=function(e,n){return Nt(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=Bo.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(we),ef=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._layers=[],e}return U(t,r),t.prototype.render=function(e,n,i){var o=e.getData(),a=this,s=this.group,l=e.getLayerSeries(),u=o.getLayout("layoutInfo"),d=u.rect,h=u.boundaryGap;function c(y){return y.name}s.x=0,s.y=d.y+h[0];var g=new kt(this._layersSeries||[],l,c,c),f=[];function p(y,_,S){var m=a._layers;if(y!=="remove"){for(var v,b,x=[],I=[],w=l[_].indices,M=0;M<w.length;M++){var D=o.getItemLayout(w[M]),C=D.x,L=D.y0,T=D.y;x.push(C,L),I.push(C,L+T),v=o.getItemVisual(w[M],"style")}var A=o.getItemLayout(w[0]),k=e.getModel("label").get("margin"),N=e.getModel("emphasis");if(y==="add"){var V=f[_]=new ce;b=new Ku({shape:{points:x,stackedOnPoints:I,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),V.add(b),s.add(V),e.isAnimationEnabled()&&b.setClipPath(function(z,E,B){var G=new it({shape:{x:z.x-10,y:z.y-10,width:0,height:z.height+20}});return pt(G,{shape:{x:z.x-50,width:z.width+100,height:z.height+20}},E,B),G}(b.getBoundingRect(),e,function(){b.removeClipPath()}))}else V=m[S],b=V.childAt(0),s.add(V),f[_]=V,Te(b,{shape:{points:x,stackedOnPoints:I}},e),Et(b);ht(b,qe(e),{labelDataIndex:w[M-1],defaultText:o.getName(w[M-1]),inheritColor:v.fill},{normal:{verticalAlign:"middle"}}),b.setTextConfig({position:null,local:!0});var P=b.getTextContent();P&&(P.x=A.x-k,P.y=A.y0+A.y/2),b.useStyle(v),o.setItemGraphicEl(_,b),nt(b,e),Ae(b,N.get("focus"),N.get("blurScope"),N.get("disabled"))}else s.remove(m[_])}g.add(le(p,this,"add")).update(le(p,this,"update")).remove(le(p,this,"remove")).execute(),this._layersSeries=l,this._layers=f},t.type="themeRiver",t}(Me),tf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Tr(le(this.getData,this),le(this.getRawData,this))},t.prototype.fixData=function(e){var n=e.length,i={},o=Pr(e,function(c){return i.hasOwnProperty(c[0]+"")||(i[c[0]+""]=-1),c[2]}),a=[];o.buckets.each(function(c,g){a.push({name:g,dataList:c})});for(var s=a.length,l=0;l<s;++l){for(var u=a[l].name,d=0;d<a[l].dataList.length;++d){var h=a[l].dataList[d][0]+"";i[h]=l}for(var h in i)i.hasOwnProperty(h)&&i[h]!==l&&(i[h]=l,e[n]=[h,0,u],n++)}return e},t.prototype.getInitialData=function(e,n){for(var i=this.getReferringComponents("singleAxis",Xo).models[0].get("type"),o=Xe(e.data,function(g){return g[2]!==void 0}),a=this.fixData(o||[]),s=[],l=this.nameMap=De(),u=0,d=0;d<a.length;++d)s.push(a[d][2]),l.get(a[d][2])||(l.set(a[d][2],u),u++);var h=Ir(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:kr(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new Ee(h,this);return c.initData(a),c},t.prototype.getLayerSeries=function(){for(var e=this.getData(),n=e.count(),i=[],o=0;o<n;++o)i[o]=o;var a=e.mapDimension("single"),s=Pr(i,function(u){return e.get("name",u)}),l=[];return s.buckets.each(function(u,d){u.sort(function(h,c){return e.get(a,h)-e.get(a,c)}),l.push({name:d,indices:u})}),l},t.prototype.getAxisTooltipData=function(e,n,i){$(e)||(e=e?[e]:[]);for(var o,a=this.getData(),s=this.getLayerSeries(),l=[],u=s.length,d=0;d<u;++d){for(var h=Number.MAX_VALUE,c=-1,g=s[d].indices.length,f=0;f<g;++f){var p=a.get(e[0],s[d].indices[f]),y=Math.abs(p-n);y<=h&&(o=p,h=y,c=s[d].indices[f])}l.push(c)}return{dataIndices:l,nestestValue:o}},t.prototype.formatTooltip=function(e,n,i){var o=this.getData(),a=o.getName(e),s=o.get(o.mapDimension("value"),e);return je("nameValue",{name:a,value:s})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(we);function nf(r,t){r.eachSeriesByType("themeRiver",function(e){var n=e.getData(),i=e.coordinateSystem,o={},a=i.getRect();o.rect=a;var s=e.get("boundaryGap"),l=i.getAxis();o.boundaryGap=s,l.orient==="horizontal"?(s[0]=ne(s[0],a.height),s[1]=ne(s[1],a.height),xs(n,e,a.height-s[0]-s[1])):(s[0]=ne(s[0],a.width),s[1]=ne(s[1],a.width),xs(n,e,a.width-s[0]-s[1])),n.setLayout("layoutInfo",o)})}function xs(r,t,e){if(r.count())for(var n,i=t.coordinateSystem,o=t.getLayerSeries(),a=r.mapDimension("single"),s=r.mapDimension("value"),l=Q(o,function(y){return Q(y.indices,function(_){var S=i.dataToPoint(r.get(a,_));return S[1]=r.get(s,_),S})}),u=function(y){for(var _=y.length,S=y[0].length,m=[],v=[],b=0,x=0;x<S;++x){for(var I=0,w=0;w<_;++w)I+=y[w][x][1];I>b&&(b=I),m.push(I)}for(var M=0;M<S;++M)v[M]=(b-m[M])/2;b=0;for(var D=0;D<S;++D){var C=m[D]+v[D];C>b&&(b=C)}return{y0:v,max:b}}(l),d=u.y0,h=e/u.max,c=o.length,g=o[0].indices.length,f=0;f<g;++f){n=d[f]*h,r.setItemLayout(o[0].indices[f],{layerIndex:0,x:l[0][f][0],y0:n,y:l[0][f][1]*h});for(var p=1;p<c;++p)n+=l[p-1][f][1]*h,r.setItemLayout(o[p].indices[f],{layerIndex:p,x:l[p][f][0],y0:n,y:l[p][f][1]*h})}}var _s=function(r){function t(e,n,i,o){var a=r.call(this)||this;a.z2=2,a.textConfig={inside:!0},ve(a).seriesIndex=n.seriesIndex;var s=new Ue({z2:4,silent:e.getModel().get(["label","silent"])});return a.setTextContent(s),a.updateData(!0,e,n,i,o),a}return U(t,r),t.prototype.updateData=function(e,n,i,o,a){this.node=n,n.piece=this,i=i||this._seriesModel,o=o||this._ecModel;var s=this;ve(s).dataIndex=n.dataIndex;var l=n.getModel(),u=l.getModel("emphasis"),d=n.getLayout(),h=J({},d);h.label=null;var c=n.getVisual("style");c.lineJoin="bevel";var g=n.getVisual("decal");g&&(c.decal=Zo(g,a));var f=jo(l.getModel("itemStyle"),h,!0);J(h,f),R(Dr,function(S){var m=s.ensureState(S),v=l.getModel([S,"itemStyle"]);m.style=v.getItemStyle();var b=jo(v,h);b&&(m.shape=b)}),e?(s.setShape(h),s.shape.r=d.r0,pt(s,{shape:{r:d.r}},i,n.dataIndex)):(Te(s,{shape:h},i),Et(s)),s.useStyle(c),this._updateLabel(i);var p=l.getShallow("cursor");p&&s.attr("cursor",p),this._seriesModel=i||this._seriesModel,this._ecModel=o||this._ecModel;var y=u.get("focus"),_=y==="ancestor"?n.getAncestorsIndices():y==="descendant"?n.getDescendantIndices():y;Ae(this,_,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e){var n=this,i=this.node.getModel(),o=i.getModel("label"),a=this.node.getLayout(),s=a.endAngle-a.startAngle,l=(a.startAngle+a.endAngle)/2,u=Math.cos(l),d=Math.sin(l),h=this,c=h.getTextContent(),g=this.node.dataIndex,f=o.get("minAngle")/180*Math.PI,p=o.get("show")&&!(f!=null&&Math.abs(s)<f);function y(_,S){var m=_.get(S);return m??o.get(S)}c.ignore=!p,R(Qu,function(_){var S=_==="normal"?i.getModel("label"):i.getModel([_,"label"]),m=_==="normal",v=m?c:c.ensureState(_),b=e.getFormattedLabel(g,_);m&&(b=b||n.node.name),v.style=Ye(S,{},null,_!=="normal",!0),b&&(v.style.text=b);var x=S.get("show");x==null||m||(v.ignore=!x);var I,w=y(S,"position"),M=m?h:h.states[_],D=M.style.fill;M.textConfig={outsideFill:S.get("color")==="inherit"?D:null,inside:w!=="outside"};var C=y(S,"distance")||0,L=y(S,"align"),T=y(S,"rotate"),A=.5*Math.PI,k=1.5*Math.PI,N=zn(T==="tangential"?Math.PI/2-l:l),V=N>A&&!$u(N-A)&&N<k;w==="outside"?(I=a.r+C,L=V?"right":"left"):L&&L!=="center"?L==="left"?(I=a.r0+C,L=V?"right":"left"):L==="right"&&(I=a.r-C,L=V?"left":"right"):(I=s===2*Math.PI&&a.r0===0?0:(a.r+a.r0)/2,L="center"),v.style.align=L,v.style.verticalAlign=y(S,"verticalAlign")||"middle",v.x=I*u+a.cx,v.y=I*d+a.cy;var P=0;T==="radial"?P=zn(-l)+(V?Math.PI:0):T==="tangential"?P=zn(Math.PI/2-l)+(V?Math.PI:0):ot(T)&&(P=T*Math.PI/180),v.rotation=zn(P)}),c.dirtyStyle()},t}(Or),Mi="sunburstRootToNode",bs="sunburstHighlight",rf="sunburstUnhighlight",of=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.render=function(e,n,i,o){var a=this;this.seriesModel=e,this.api=i,this.ecModel=n;var s=e.getData(),l=s.tree.root,u=e.getViewRoot(),d=this.group,h=e.get("renderLabelForZeroData"),c=[];u.eachNode(function(f){c.push(f)});var g=this._oldChildren||[];(function(f,p){if(f.length===0&&p.length===0)return;function y(S){return S.getId()}function _(S,m){(function(v,b){if(h||!v||v.getValue()||(v=null),v!==l&&b!==l){if(b&&b.piece)v?(b.piece.updateData(!1,v,e,n,i),s.setItemGraphicEl(v.dataIndex,b.piece)):function(I){I&&I.piece&&(d.remove(I.piece),I.piece=null)}(b);else if(v){var x=new _s(v,e,n,i);d.add(x),s.setItemGraphicEl(v.dataIndex,x)}}})(S==null?null:f[S],m==null?null:p[m])}new kt(p,f,y,y).add(_).update(_).remove(pe(_,null)).execute()})(c,g),function(f,p){p.depth>0?(a.virtualPiece?a.virtualPiece.updateData(!1,f,e,n,i):(a.virtualPiece=new _s(f,e,n,i),d.add(a.virtualPiece)),p.piece.off("click"),a.virtualPiece.on("click",function(y){a._rootToNode(p.parentNode)})):a.virtualPiece&&(d.remove(a.virtualPiece),a.virtualPiece=null)}(l,u),this._initEvents(),this._oldChildren=c},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(n){var i=!1;e.seriesModel.getViewRoot().eachNode(function(o){if(!i&&o.piece&&o.piece===n.target){var a=o.getModel().get("nodeClick");if(a==="rootToNode")e._rootToNode(o);else if(a==="link"){var s=o.getModel(),l=s.get("link");if(l){var u=s.get("target",!0)||"_blank";Ao(l,u)}}i=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Mi,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,n){var i=n.getData().getItemLayout(0);if(i){var o=e[0]-i.cx,a=e[1]-i.cy,s=Math.sqrt(o*o+a*a);return s<=i.r&&s>=i.r0}},t.type="sunburst",t}(Me),af=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreStyleOnData=!0,e}return U(t,r),t.prototype.getInitialData=function(e,n){var i={name:e.name,children:e.data};Ss(i);var o=this._levelModels=Q(e.levels||[],function(s){return new dt(s,this,n)},this),a=qr.createTree(i,this,function(s){s.wrapMethod("getItemModel",function(l,u){var d=a.getNodeByDataIndex(u),h=o[d.depth];return h&&(l.parentModel=h),l})});return a.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(e){var n=r.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=Fn(i,this),n},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;e&&(e===n||n.contains(e))||(this._viewRoot=n)},t.prototype.enableAriaDecal=function(){ba(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(we);function Ss(r){var t=0;R(r.children,function(n){Ss(n);var i=n.value;$(i)&&(i=i[0]),t+=i});var e=r.value;$(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),$(r.value)?r.value[0]=e:r.value=e}var Is=Math.PI/180;function sf(r,t,e){t.eachSeriesByType(r,function(n){var i=n.get("center"),o=n.get("radius");$(o)||(o=[0,o]),$(i)||(i=[i,i]);var a=e.getWidth(),s=e.getHeight(),l=Math.min(a,s),u=ne(i[0],a),d=ne(i[1],s),h=ne(o[0],l/2),c=ne(o[1],l/2),g=-n.get("startAngle")*Is,f=n.get("minAngle")*Is,p=n.getData().tree.root,y=n.getViewRoot(),_=y.depth,S=n.get("sort");S!=null&&ws(y,S);var m=0;R(y.children,function(N){!isNaN(N.getValue())&&m++});var v=y.getValue(),b=Math.PI/(v||m)*2,x=y.depth>0,I=y.height-(x?-1:1),w=(c-h)/(I||1),M=n.get("clockwise"),D=n.get("stillShowZeroSum"),C=M?1:-1,L=function(N,V){if(N){var P=V;if(N!==p){var z=N.getValue(),E=v===0&&D?b:z*b;E<f&&(E=f),P=V+C*E;var B=N.depth-_-(x?-1:1),G=h+w*B,Z=h+w*(B+1),O=n.getLevelModel(N);if(O){var F=O.get("r0",!0),Y=O.get("r",!0),H=O.get("radius",!0);H!=null&&(F=H[0],Y=H[1]),F!=null&&(G=ne(F,l/2)),Y!=null&&(Z=ne(Y,l/2))}N.setLayout({angle:E,startAngle:V,endAngle:P,clockwise:M,cx:u,cy:d,r0:G,r:Z})}if(N.children&&N.children.length){var j=0;R(N.children,function(q){j+=L(q,V+j)})}return P-V}};if(x){var T=h,A=h+w,k=2*Math.PI;p.setLayout({angle:k,startAngle:g,endAngle:g+k,clockwise:M,cx:u,cy:d,r0:T,r:A})}L(y,g)})}function ws(r,t){var e=r.children||[];r.children=function(n,i){if(xe(i)){var o=Q(n,function(s,l){var u=s.getValue();return{params:{depth:s.depth,height:s.height,dataIndex:s.dataIndex,getValue:function(){return u}},index:l}});return o.sort(function(s,l){return i(s.params,l.params)}),Q(o,function(s){return n[s.index]})}var a=i==="asc";return n.sort(function(s,l){var u=(s.getValue()-l.getValue())*(a?1:-1);return u===0?(s.dataIndex-l.dataIndex)*(a?-1:1):u})}(e,t),e.length&&R(r.children,function(n){ws(n,t)})}function lf(r){var t={};r.eachSeriesByType("sunburst",function(e){var n=e.getData(),i=n.tree;i.eachNode(function(o){var a=o.getModel().getModel("itemStyle").getItemStyle();a.fill||(a.fill=function(l,u,d){for(var h=l;h&&h.depth>1;)h=h.parentNode;var c=u.getColorFromPalette(h.name||h.dataIndex+"",t);return l.depth>1&&ue(c)&&(c=Ju(c,(l.depth-1)/(d-1)*.5)),c}(o,e,i.root.height));var s=n.ensureUniqueItemVisual(o.dataIndex,"style");J(s,a)})})}var Ms={color:"fill",borderColor:"stroke"},uf={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},at=Ve(),df=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,n){return Nt(null,this)},t.prototype.getDataParams=function(e,n,i){var o=r.prototype.getDataParams.call(this,e,n);return i&&(o.info=at(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(we);function hf(r,t){return t=t||[0,0],Q(["x","y"],function(e,n){var i=this.getAxis(e),o=t[n],a=r[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a))},this)}function cf(r,t){return t=t||[0,0],Q([0,1],function(e){var n=t[e],i=r[e]/2,o=[],a=[];return o[e]=n-i,a[e]=n+i,o[1-e]=a[1-e]=t[1-e],Math.abs(this.dataToPoint(o)[e]-this.dataToPoint(a)[e])},this)}function pf(r,t){var e=this.getAxis(),n=t instanceof Array?t[0]:t,i=(r instanceof Array?r[0]:r)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(n-i)-e.dataToCoord(n+i))}function ff(r,t){return t=t||[0,0],Q(["Radius","Angle"],function(e,n){var i=this["get"+e+"Axis"](),o=t[n],a=r[n]/2,s=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a));return e==="Angle"&&(s=s*Math.PI/180),s},this)}function Ds(r,t,e,n){return r&&(r.legacy||r.legacy!==!1&&!e&&!n&&t!=="tspan"&&(t==="text"||W(r,"text")))}function Ls(r,t,e){var n,i,o,a=r;if(t==="text")o=a;else{o={},W(a,"text")&&(o.text=a.text),W(a,"rich")&&(o.rich=a.rich),W(a,"textFill")&&(o.fill=a.textFill),W(a,"textStroke")&&(o.stroke=a.textStroke),W(a,"fontFamily")&&(o.fontFamily=a.fontFamily),W(a,"fontSize")&&(o.fontSize=a.fontSize),W(a,"fontStyle")&&(o.fontStyle=a.fontStyle),W(a,"fontWeight")&&(o.fontWeight=a.fontWeight),i={type:"text",style:o,silent:!0},n={};var s=W(a,"textPosition");e?n.position=s?a.textPosition:"inside":s&&(n.position=a.textPosition),W(a,"textPosition")&&(n.position=a.textPosition),W(a,"textOffset")&&(n.offset=a.textOffset),W(a,"textRotation")&&(n.rotation=a.textRotation),W(a,"textDistance")&&(n.distance=a.textDistance)}return Cs(o,r),R(o.rich,function(l){Cs(l,l)}),{textConfig:n,textContent:i}}function Cs(r,t){t&&(t.font=t.textFont||t.font,W(t,"textStrokeWidth")&&(r.lineWidth=t.textStrokeWidth),W(t,"textAlign")&&(r.align=t.textAlign),W(t,"textVerticalAlign")&&(r.verticalAlign=t.textVerticalAlign),W(t,"textLineHeight")&&(r.lineHeight=t.textLineHeight),W(t,"textWidth")&&(r.width=t.textWidth),W(t,"textHeight")&&(r.height=t.textHeight),W(t,"textBackgroundColor")&&(r.backgroundColor=t.textBackgroundColor),W(t,"textPadding")&&(r.padding=t.textPadding),W(t,"textBorderColor")&&(r.borderColor=t.textBorderColor),W(t,"textBorderWidth")&&(r.borderWidth=t.textBorderWidth),W(t,"textBorderRadius")&&(r.borderRadius=t.textBorderRadius),W(t,"textBoxShadowColor")&&(r.shadowColor=t.textBoxShadowColor),W(t,"textBoxShadowBlur")&&(r.shadowBlur=t.textBoxShadowBlur),W(t,"textBoxShadowOffsetX")&&(r.shadowOffsetX=t.textBoxShadowOffsetX),W(t,"textBoxShadowOffsetY")&&(r.shadowOffsetY=t.textBoxShadowOffsetY))}function Ts(r,t,e){var n=r;n.textPosition=n.textPosition||e.position||"inside",e.offset!=null&&(n.textOffset=e.offset),e.rotation!=null&&(n.textRotation=e.rotation),e.distance!=null&&(n.textDistance=e.distance);var i=n.textPosition.indexOf("inside")>=0,o=r.fill||"#000";As(n,t);var a=n.textFill==null;return i?a&&(n.textFill=e.insideFill||"#fff",!n.textStroke&&e.insideStroke&&(n.textStroke=e.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(a&&(n.textFill=r.fill||e.outsideFill||"#000"),!n.textStroke&&e.outsideStroke&&(n.textStroke=e.outsideStroke)),n.text=t.text,n.rich=t.rich,R(t.rich,function(s){As(s,s)}),n}function As(r,t){t&&(W(t,"fill")&&(r.textFill=t.fill),W(t,"stroke")&&(r.textStroke=t.fill),W(t,"lineWidth")&&(r.textStrokeWidth=t.lineWidth),W(t,"font")&&(r.font=t.font),W(t,"fontStyle")&&(r.fontStyle=t.fontStyle),W(t,"fontWeight")&&(r.fontWeight=t.fontWeight),W(t,"fontSize")&&(r.fontSize=t.fontSize),W(t,"fontFamily")&&(r.fontFamily=t.fontFamily),W(t,"align")&&(r.textAlign=t.align),W(t,"verticalAlign")&&(r.textVerticalAlign=t.verticalAlign),W(t,"lineHeight")&&(r.textLineHeight=t.lineHeight),W(t,"width")&&(r.textWidth=t.width),W(t,"height")&&(r.textHeight=t.height),W(t,"backgroundColor")&&(r.textBackgroundColor=t.backgroundColor),W(t,"padding")&&(r.textPadding=t.padding),W(t,"borderColor")&&(r.textBorderColor=t.borderColor),W(t,"borderWidth")&&(r.textBorderWidth=t.borderWidth),W(t,"borderRadius")&&(r.textBorderRadius=t.borderRadius),W(t,"shadowColor")&&(r.textBoxShadowColor=t.shadowColor),W(t,"shadowBlur")&&(r.textBoxShadowBlur=t.shadowBlur),W(t,"shadowOffsetX")&&(r.textBoxShadowOffsetX=t.shadowOffsetX),W(t,"shadowOffsetY")&&(r.textBoxShadowOffsetY=t.shadowOffsetY),W(t,"textShadowColor")&&(r.textShadowColor=t.textShadowColor),W(t,"textShadowBlur")&&(r.textShadowBlur=t.textShadowBlur),W(t,"textShadowOffsetX")&&(r.textShadowOffsetX=t.textShadowOffsetX),W(t,"textShadowOffsetY")&&(r.textShadowOffsetY=t.textShadowOffsetY))}var Ns={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Ps=_e(Ns);ed(tn,function(r,t){return r[t]=1,r},{}),tn.join(", ");var jn=["","style","shape","extra"],Ft=Ve();function Di(r,t,e,n,i){var o=r+"Animation",a=nn(r,n,i)||{},s=Ft(t).userDuring;return a.duration>0&&(a.during=s?le(yf,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=r),J(a,e[o]),a}function qn(r,t,e,n){var i=(n=n||{}).dataIndex,o=n.isInit,a=n.clearStyle,s=e.isAnimationEnabled(),l=Ft(r),u=t.style;l.userDuring=t.during;var d={},h={};if(function(f,p,y){for(var _=0;_<Ps.length;_++){var S=Ps[_],m=Ns[S],v=p[S];v&&(y[m[0]]=v[0],y[m[1]]=v[1])}for(_=0;_<tn.length;_++){var b=tn[_];p[b]!=null&&(y[b]=p[b])}}(0,t,h),Es("shape",t,h),Es("extra",t,h),!o&&s&&(function(f,p,y){for(var _=p.transition,S=Mt(_)?tn:Re(_||[]),m=0;m<S.length;m++){var v=S[m];if(v!=="style"&&v!=="shape"&&v!=="extra"){var b=f[v];y[v]=b}}}(r,t,d),Vs("shape",r,t,d),Vs("extra",r,t,d),function(f,p,y,_){if(y){var S,m=f.style;if(m){var v=y.transition,b=p.transition;if(v&&!Mt(v)){var x=Re(v);!S&&(S=_.style={});for(var I=0;I<x.length;I++){var w=m[L=x[I]];S[L]=w}}else if(f.getAnimationStyleProps&&(Mt(b)||Mt(v)||ze(b,"style")>=0)){var M=f.getAnimationStyleProps(),D=M?M.style:null;if(D){!S&&(S=_.style={});var C=_e(y);for(I=0;I<C.length;I++){var L;D[L=C[I]]&&(w=m[L],S[L]=w)}}}}}}(r,t,u,d)),h.style=u,function(f,p,y){var _=p.style;if(!f.isGroup&&_){if(y){f.useStyle({});for(var S=f.animators,m=0;m<S.length;m++){var v=S[m];v.targetName==="style"&&v.changeTarget(f.style)}}f.setStyle(_)}p&&(p.style=null,p&&f.attr(p),p.style=_)}(r,h,a),function(f,p){W(p,"silent")&&(f.silent=p.silent),W(p,"ignore")&&(f.ignore=p.ignore),f instanceof qt&&W(p,"invisible")&&(f.invisible=p.invisible),f instanceof be&&W(p,"autoBatch")&&(f.autoBatch=p.autoBatch)}(r,t),s)if(o){var c={};R(jn,function(f){var p=f?t[f]:t;p&&p.enterFrom&&(f&&(c[f]=c[f]||{}),J(f?c[f]:c,p.enterFrom))});var g=Di("enter",r,t,e,i);g.duration>0&&r.animateFrom(c,g)}else(function(f,p,y,_,S){if(S){var m=Di("update",f,p,_,y);m.duration>0&&f.animateFrom(S,m)}})(r,t,i||0,e,d);ks(r,t),u?r.dirty():r.markRedraw()}function ks(r,t){for(var e=Ft(r).leaveToProps,n=0;n<jn.length;n++){var i=jn[n],o=i?t[i]:t;o&&o.leaveTo&&(e||(e=Ft(r).leaveToProps={}),i&&(e[i]=e[i]||{}),J(i?e[i]:e,o.leaveTo))}}function Kn(r,t,e,n){if(r){var i=r.parent,o=Ft(r).leaveToProps;if(o){var a=Di("update",r,t,e,0);a.done=function(){i.remove(r)},r.animateTo(o,a)}else i.remove(r)}}function Mt(r){return r==="all"}var Qe={},gf={setTransform:function(r,t){return Qe.el[r]=t,this},getTransform:function(r){return Qe.el[r]},setShape:function(r,t){var e=Qe.el;return(e.shape||(e.shape={}))[r]=t,e.dirtyShape&&e.dirtyShape(),this},getShape:function(r){var t=Qe.el.shape;if(t)return t[r]},setStyle:function(r,t){var e=Qe.el,n=e.style;return n&&(n[r]=t,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(r){var t=Qe.el.style;if(t)return t[r]},setExtra:function(r,t){return(Qe.el.extra||(Qe.el.extra={}))[r]=t,this},getExtra:function(r){var t=Qe.el.extra;if(t)return t[r]}};function yf(){var r=this,t=r.el;if(t){var e=Ft(t).userDuring,n=r.userDuring;e===n?(Qe.el=t,n(gf)):r.el=r.userDuring=null}}function Vs(r,t,e,n){var i=e[r];if(i){var o,a=t[r];if(a){var s=e.transition,l=i.transition;if(l)if(!o&&(o=n[r]={}),Mt(l))J(o,a);else for(var u=Re(l),d=0;d<u.length;d++){var h=a[g=u[d]];o[g]=h}else if(Mt(s)||ze(s,r)>=0){!o&&(o=n[r]={});var c=_e(a);for(d=0;d<c.length;d++){var g;h=a[g=c[d]],vf(i[g],h)&&(o[g]=h)}}}}}function Es(r,t,e){var n=t[r];if(n)for(var i=e[r]={},o=_e(n),a=0;a<o.length;a++){var s=o[a];i[s]=td(n[s])}}function vf(r,t){return qo(r)?r!==t:r!=null&&isFinite(r)}var zs=Ve(),mf=["percent","easing","shape","style","extra"];function Rs(r){r.stopAnimation("keyframe"),r.attr(zs(r))}function Qn(r,t,e){if(e.isAnimationEnabled()&&t)if($(t))R(t,function(s){Qn(r,s,e)});else{var n=t.keyframes,i=t.duration;if(e&&i==null){var o=nn("enter",e,0);i=o&&o.duration}if(n&&i){var a=zs(r);R(jn,function(s){var l;s&&!r[s]||(n.sort(function(u,d){return u.percent-d.percent}),R(n,function(u){var d=r.animators,h=s?u[s]:u;if(h){var c=_e(h);if(s||(c=Xe(c,function(p){return ze(mf,p)<0})),c.length){l||((l=r.animate(s,t.loop,!0)).scope="keyframe");for(var g=0;g<d.length;g++)d[g]!==l&&d[g].targetName===l.targetName&&d[g].stopTracks(c);s&&(a[s]=a[s]||{});var f=s?a[s]:a;R(c,function(p){f[p]=((s?r[s]:r)||{})[p]}),l.whenWithKeys(i*u.percent,h,c,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing))})}}}var st="emphasis",mt="normal",Li="blur",Ci="select",xt=[mt,st,Li,Ci],Ti={normal:["itemStyle"],emphasis:[st,"itemStyle"],blur:[Li,"itemStyle"],select:[Ci,"itemStyle"]},Ai={normal:["label"],emphasis:[st,"label"],blur:[Li,"label"],select:[Ci,"label"]},xf=["x","y"],_f="e\0\0",Be={normal:{},emphasis:{},blur:{},select:{}},bf={cartesian2d:function(r){var t=r.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:le(hf,r)}}},geo:function(r){var t=r.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:r.getZoom()},api:{coord:function(e){return r.dataToPoint(e)},size:le(cf,r)}}},single:function(r){var t=r.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:le(pf,r)}}},polar:function(r){var t=r.getRadiusAxis(),e=r.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),a=e.dataToAngle(i[1]),s=r.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:le(ff,r)}}},calendar:function(r){var t=r.getRect(),e=r.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(n,i){return r.dataToPoint(n,i)}}}}};function Ni(r){return r instanceof be}function Pi(r){return r instanceof qt}var Sf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.render=function(e,n,i,o){this._progressiveEls=null;var a=this._data,s=e.getData(),l=this.group,u=Bs(e,s,n,i);a||l.removeAll(),s.diff(a).add(function(h){Ei(i,null,h,u(h,o),e,l,s)}).remove(function(h){var c=a.getItemGraphicEl(h);c&&Kn(c,at(c).option,e)}).update(function(h,c){var g=a.getItemGraphicEl(c);Ei(i,g,h,u(h,o),e,l,s)}).execute();var d=e.get("clip",!0)?Er(e.coordinateSystem,!1,e):null;d?l.setClipPath(d):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(e,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,n,i,o,a){var s=n.getData(),l=Bs(n,s,i,o),u=this._progressiveEls=[];function d(g){g.isGroup||(g.incremental=!0,g.ensureState("emphasis").hoverLayer=!0)}for(var h=e.start;h<e.end;h++){var c=Ei(null,null,h,l(h,a),n,this.group,s);c&&(c.traverse(d),u.push(c))}},t.prototype.eachRendered=function(e){Pn(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,n,i,o){var a=n.element;if(a==null||i.name===a)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===a)return!0;return!1},t.type="custom",t}(Me);function ki(r){var t,e=r.type;if(e==="path"){var n=r.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=Us(n);t=id(o,null,i,n.layout||"center"),at(t).customPathData=o}else if(e==="image")t=new en({}),at(t).customImagePath=r.style.image;else if(e==="text")t=new Ue({});else if(e==="group")t=new ce;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=$o(e);a||de(""),t=new a}return at(t).customGraphicType=e,t.name=r.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function Vi(r,t,e,n,i,o,a){Rs(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=xf);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;W(u,"textFill")&&(u.fill=u.textFill),W(u,"textStroke")&&(u.stroke=u.textStroke)}var d=void 0,h=Ni(t)?l.decal:null;r&&h&&(h.dirty=!0,d=Zo(h,r)),l.__decalPattern=d}Pi(t)&&l&&(d=l.__decalPattern)&&(l.decal=d),qn(t,n,o,{dataIndex:e,isInit:a,clearStyle:!0}),Qn(t,n.keyframeAnimation,o)}function Os(r,t,e,n,i){var o=t.isGroup?null:t,a=i&&i[r].cfg;if(o){var s=o.ensureState(r);if(n===!1){var l=o.getState(r);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),wn(o)}}function If(r,t,e){var n=e===mt,i=n?t:$n(t,e),o=i?i.z2:null;o!=null&&((n?r:r.ensureState(e)).z2=o||0)}function Bs(r,t,e,n){var i=r.get("renderItem"),o=r.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):bf[o.type](o));for(var s,l,u=Se({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:function(x,I){return I==null&&(I=s),t.getStore().get(t.getDimensionIndex(x||0),I)},style:function(x,I){I==null&&(I=s);var w=t.getItemVisual(I,"style"),M=w&&w.fill,D=w&&w.opacity,C=S(I,mt).getItemStyle();M!=null&&(C.fill=M),D!=null&&(C.opacity=D);var L={inheritColor:ue(M)?M:"#000"},T=m(I,mt),A=Ye(T,null,L,!1,!0);A.text=T.getShallow("show")?Le(r.getFormattedLabel(I,mt),Ko(t,I)):null;var k=Qo(T,L,!1);return b(x,C),C=Ts(C,A,k),x&&v(C,x),C.legacy=!0,C},ordinalRawValue:function(x,I){I==null&&(I=s),x=x||0;var w=t.getDimensionInfo(x);if(!w){var M=t.getDimensionIndex(x);return M>=0?t.getStore().get(M,I):void 0}var D=t.get(w.name,I),C=w&&w.ordinalMeta;return C?C.categories[D]:D},styleEmphasis:function(x,I){I==null&&(I=s);var w=S(I,st).getItemStyle(),M=m(I,st),D=Ye(M,null,null,!0,!0);D.text=M.getShallow("show")?Kt(r.getFormattedLabel(I,st),r.getFormattedLabel(I,mt),Ko(t,I)):null;var C=Qo(M,null,!0);return b(x,w),w=Ts(w,D,C),x&&v(w,x),w.legacy=!0,w},visual:function(x,I){if(I==null&&(I=s),W(Ms,x)){var w=t.getItemVisual(I,"style");return w?w[Ms[x]]:null}if(W(uf,x))return t.getItemVisual(I,x)},barLayout:function(x){if(o.type==="cartesian2d"){var I=o.getBaseAxis();return nd(Se({axis:I},x))}},currentSeriesIndices:function(){return e.getCurrentSeriesIndices()},font:function(x){return rd(x,e)}},a.api||{}),d={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:wf(r.getData())},h={},c={},g={},f={},p=0;p<xt.length;p++){var y=xt[p];g[y]=r.getModel(Ti[y]),f[y]=r.getModel(Ai[y])}function _(x){return x===s?l||(l=t.getItemModel(x)):t.getItemModel(x)}function S(x,I){return t.hasItemOption?x===s?h[I]||(h[I]=_(x).getModel(Ti[I])):_(x).getModel(Ti[I]):g[I]}function m(x,I){return t.hasItemOption?x===s?c[I]||(c[I]=_(x).getModel(Ai[I])):_(x).getModel(Ai[I]):f[I]}return function(x,I){return s=x,l=null,h={},c={},i&&i(Se({dataIndexInside:x,dataIndex:t.getRawIndex(x),actionType:I?I.type:null},d),u)};function v(x,I){for(var w in I)W(I,w)&&(x[w]=I[w])}function b(x,I){x&&(x.textFill&&(I.textFill=x.textFill),x.textPosition&&(I.textPosition=x.textPosition))}}function wf(r){var t={};return R(r.dimensions,function(e){var n=r.getDimensionInfo(e);if(!n.isExtraCoord){var i=n.coordDim;(t[i]=t[i]||[])[n.coordDimIndex]=r.getDimensionIndex(e)}}),t}function Ei(r,t,e,n,i,o,a){if(n){var s=zi(r,t,e,n,i,o);return s&&a.setItemGraphicEl(e,s),s&&Ae(s,n.focus,n.blurScope,n.emphasisDisabled),s}o.remove(t)}function zi(r,t,e,n,i,o){var a=-1,s=t;t&&Gs(t,n,i)&&(a=ze(o.childrenRef(),t),t=null);var l,u,d=!t,h=t;h?h.clearStates():(h=ki(n),s&&(l=s,(u=h).copyTransform(l),Pi(u)&&Pi(l)&&(u.setStyle(l.style),u.z=l.z,u.z2=l.z2,u.zlevel=l.zlevel,u.invisible=l.invisible,u.ignore=l.ignore,Ni(u)&&Ni(l)&&u.setShape(l.shape)))),n.morph===!1?h.disableMorphing=!0:h.disableMorphing&&(h.disableMorphing=!1),Be.normal.cfg=Be.normal.conOpt=Be.emphasis.cfg=Be.emphasis.conOpt=Be.blur.cfg=Be.blur.conOpt=Be.select.cfg=Be.select.conOpt=null,Be.isLegacy=!1,function(p,y,_,S,m,v){if(!p.isGroup){Fs(_,null,v),Fs(_,st,v);var b=v.normal.conOpt,x=v.emphasis.conOpt,I=v.blur.conOpt,w=v.select.conOpt;if(b!=null||x!=null||w!=null||I!=null){var M=p.getTextContent();if(b===!1)M&&p.removeTextContent();else{b=v.normal.conOpt=b||{type:"text"},M?M.clearStates():(M=ki(b),p.setTextContent(M)),Vi(null,M,y,b,null,S,m);for(var D=b&&b.style,C=0;C<xt.length;C++){var L=xt[C];if(L!==mt){var T=v[L].conOpt;Os(L,M,0,Ri(b,T,L),null)}}D?M.dirty():M.markRedraw()}}}}(h,e,n,i,d,Be),function(p,y,_,S,m){var v=_.clipPath;if(v===!1)p&&p.getClipPath()&&p.removeClipPath();else if(v){var b=p.getClipPath();b&&Gs(b,v,S)&&(b=null),b||(b=ki(v),p.setClipPath(b)),Vi(null,b,y,v,null,S,m)}}(h,e,n,i,d),Vi(r,h,e,n,Be,i,d),W(n,"info")&&(at(h).info=n.info);for(var c=0;c<xt.length;c++){var g=xt[c];if(g!==mt){var f=$n(n,g);Os(g,h,0,Ri(n,f,g),Be)}}return function(p,y,_){if(!p.isGroup){var S=p,m=_.currentZ,v=_.currentZLevel;S.z=m,S.zlevel=v;var b=y.z2;b!=null&&(S.z2=b||0);for(var x=0;x<xt.length;x++)If(S,y,xt[x])}}(h,n,i),n.type==="group"&&function(p,y,_,S,m){var v=S.children,b=v?v.length:0,x=S.$mergeChildren,I=x==="byName"||S.diffChildrenByName,w=x===!1;if(!(!b&&!I&&!w)){if(I)return M={api:p,oldChildren:y.children()||[],newChildren:v||[],dataIndex:_,seriesModel:m,group:y},void new kt(M.oldChildren,M.newChildren,Ws,Ws,M).add(Hs).update(Hs).remove(Df).execute();var M;w&&y.removeAll();for(var D=0;D<b;D++){var C=v[D],L=y.childAt(D);C?(C.ignore==null&&(C.ignore=!1),zi(p,L,_,C,m,y)):L.ignore=!0}for(var T=y.childCount()-1;T>=D;T--){var A=y.childAt(T);Mf(y,A,m)}}}(r,h,e,n,i),a>=0?o.replaceAt(h,a):o.add(h),h}function Gs(r,t,e){var n,i=at(r),o=t.type,a=t.shape,s=t.style;return e.isUniversalTransitionEnabled()||o!=null&&o!==i.customGraphicType||o==="path"&&(n=a)&&(W(n,"pathData")||W(n,"d"))&&Us(a)!==i.customPathData||o==="image"&&W(s,"image")&&s.image!==i.customImagePath}function Fs(r,t,e){var n=t?$n(r,t):r,i=t?Ri(r,n,st):r.style,o=r.type,a=n?n.textConfig:null,s=r.textContent,l=s?t?$n(s,t):s:null;if(i&&(e.isLegacy||Ds(i,o,!!a,!!l))){e.isLegacy=!0;var u=Ls(i,o,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var d=l;!d.type&&(d.type="text")}var h=t?e[t]:e.normal;h.cfg=a,h.conOpt=l}function $n(r,t){return t?r?r[t]:null:r}function Ri(r,t,e){var n=t&&t.style;return n==null&&e===st&&r&&(n=r.styleEmphasis),n}function Mf(r,t,e){t&&Kn(t,at(r).option,e)}function Ws(r,t){var e=r&&r.name;return e??_f+t}function Hs(r,t){var e=this.context,n=r!=null?e.newChildren[r]:null,i=t!=null?e.oldChildren[t]:null;zi(e.api,i,e.dataIndex,n,e.seriesModel,e.group)}function Df(r){var t=this.context,e=t.oldChildren[r];e&&Kn(e,at(e).option,t.seriesModel)}function Us(r){return r&&(r.pathData||r.d)}function Oi(r,t){t=t||{};var e=r.coordinateSystem,n=r.axis,i={},o=n.position,a=n.orient,s=e.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[a==="vertical"?u.vertical[o]:l[0],a==="horizontal"?u.horizontal[o]:l[3]],i.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,right:1,left:-1}[o],r.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Ke(t.labelInside,r.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var d=t.rotate;return d==null&&(d=r.get(["axisLabel","rotate"])),i.labelRotation=o==="top"?-d:d,i.z2=1,i}var Lf=["axisLine","axisTickLabel","axisName"],Cf=["splitArea","splitLine"],Tf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="SingleAxisPointer",e}return U(t,r),t.prototype.render=function(e,n,i,o){var a=this.group;a.removeAll();var s=this._axisGroup;this._axisGroup=new ce;var l=Oi(e),u=new od(e,l);R(Lf,u.add,u),a.add(this._axisGroup),a.add(u.getGroup()),R(Cf,function(d){e.get([d,"show"])&&Af[d](this,this.group,this._axisGroup,e)},this),ad(s,this._axisGroup,e),r.prototype.render.call(this,e,n,i,o)},t.prototype.remove=function(){sd(this)},t.type="singleAxis",t}(Jo),Af={splitLine:function(r,t,e,n){var i=n.axis;if(!i.scale.isBlank()){var o=n.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=a.get("width"),u=n.coordinateSystem.getRect(),d=i.isHorizontal(),h=[],c=0,g=i.getTicksCoords({tickModel:o}),f=[],p=[],y=0;y<g.length;++y){var _=i.toGlobalCoord(g[y].coord);d?(f[0]=_,f[1]=u.y,p[0]=_,p[1]=u.y+u.height):(f[0]=u.x,f[1]=_,p[0]=u.x+u.width,p[1]=_);var S=new Tn({shape:{x1:f[0],y1:f[1],x2:p[0],y2:p[1]},silent:!0});ld(S.shape,l);var m=c++%s.length;h[m]=h[m]||[],h[m].push(S)}var v=a.getLineStyle(["color"]);for(y=0;y<h.length;++y)t.add(ud(h[y],{style:Se({stroke:s[y%s.length]},v),silent:!0}))}},splitArea:function(r,t,e,n){dd(r,e,n,n)}},Jn=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(zt);bt(Jn,hd.prototype);var Nf=function(r){function t(e,n,i,o,a){var s=r.call(this,e,n,i)||this;return s.type=o||"value",s.position=a||"bottom",s}return U(t,r),t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.pointToData=function(e,n){return this.coordinateSystem.pointToData(e)[0]},t}(ea),Ys=["single"],Pf=function(){function r(t,e,n){this.type="single",this.dimension="single",this.dimensions=Ys,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,n)}return r.prototype._init=function(t,e,n){var i=this.dimension,o=new Nf(i,cd(t),[0,0],t.get("type"),t.get("position")),a=o.type==="category";o.onBand=a&&t.get("boundaryGap"),o.inverse=t.get("inverse"),o.orient=t.get("orient"),t.axis=o,o.model=t,o.coordinateSystem=this,this._axis=o},r.prototype.update=function(t,e){t.eachSeries(function(n){if(n.coordinateSystem===this){var i=n.getData();R(i.mapDimensionsAll(this.dimension),function(o){this._axis.scale.unionExtentFromData(i,o)},this),pd(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(t,e){this._rect=ut({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],o=e.inverse?1:0;e.setExtent(i[o],i[1-o]),this._updateAxisTransform(e,n?t.x:t.y)},r.prototype._updateAxisTransform=function(t,e){var n=t.getExtent(),i=n[0]+n[1],o=t.isHorizontal();t.toGlobalCoord=o?function(a){return a+e}:function(a){return i-a+e},t.toLocalCoord=o?function(a){return a-e}:function(a){return i-a+e}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(t){var e=this.getRect(),n=this.getAxis();return n.orient==="horizontal"?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},r.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t[e.orient==="horizontal"?0:1]))]},r.prototype.dataToPoint=function(t){var e=this.getAxis(),n=this.getRect(),i=[],o=e.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),i[o]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-o]=o===0?n.y+n.height/2:n.x+n.width/2,i},r.prototype.convertToPixel=function(t,e,n){return Xs(e)===this?this.dataToPoint(n):null},r.prototype.convertFromPixel=function(t,e,n){return Xs(e)===this?this.pointToData(n):null},r}();function Xs(r){var t=r.seriesModel,e=r.singleAxisModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}var kf={create:function(r,t){var e=[];return r.eachComponent("singleAxis",function(n,i){var o=new Pf(n,r,t);o.name="single_"+i,o.resize(n,t),n.coordinateSystem=o,e.push(o)}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var i=n.getReferringComponents("singleAxis",Xo).models[0];n.coordinateSystem=i&&i.coordinateSystem}}),e},dimensions:Ys},Zs=["x","y"],Vf=["width","height"],Ef=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return U(t,r),t.prototype.makeElOption=function(e,n,i,o,a){var s=i.axis,l=s.coordinateSystem,u=Bi(l,1-er(s)),d=l.dataToPoint(n)[0],h=o.get("type");if(h&&h!=="none"){var c=fd(o),g=zf[h](s,d,u);g.style=c,e.graphicKey=g.type,e.pointer=g}var f=Oi(i);gd(n,e,f,i,o,a)},t.prototype.getHandleTransform=function(e,n,i){var o=Oi(n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=yd(n.axis,e,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,n,i,o){var a=i.axis,s=a.coordinateSystem,l=er(a),u=Bi(s,l),d=[e.x,e.y];d[l]+=n[l],d[l]=Math.min(u[1],d[l]),d[l]=Math.max(u[0],d[l]);var h=Bi(s,1-l),c=(h[1]+h[0])/2,g=[c,c];return g[l]=d[l],{x:d[0],y:d[1],rotation:e.rotation,cursorPoint:g,tooltipOption:{verticalAlign:"middle"}}},t}(vd),zf={line:function(r,t,e){return{type:"Line",subPixelOptimize:!0,shape:md([t,e[0]],[t,e[1]],er(r))}},shadow:function(r,t,e){var n=r.getBandWidth(),i=e[1]-e[0];return{type:"Rect",shape:xd([t-n/2,e[0]],[n,i],er(r))}}};function er(r){return r.isHorizontal()?0:1}function Bi(r,t){var e=r.getRect();return[e[Zs[t]],e[Zs[t]]+e[Vf[t]]]}var Rf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.type="single",t}(Rt),Of=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(e,n,i){var o=bd(e);r.prototype.init.apply(this,arguments),js(e,o)},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),js(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(zt);function js(r,t){var e,n=r.cellSize;(e=$(n)?n:r.cellSize=[n,n]).length===1&&(e[1]=e[0]);var i=Q([0,1],function(o){return Sd(t,o)&&(e[o]="auto"),e[o]!=null&&e[o]!=="auto"});na(r,t,{type:"box",ignoreSize:i})}var Bf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.render=function(e,n,i){var o=this.group;o.removeAll();var a=e.coordinateSystem,s=a.getRangeInfo(),l=a.getOrient(),u=n.getLocaleModel();this._renderDayRect(e,s,o),this._renderLines(e,s,l,o),this._renderYearText(e,s,l,o),this._renderMonthText(e,u,l,o),this._renderWeekText(e,u,s,l,o)},t.prototype._renderDayRect=function(e,n,i){for(var o=e.coordinateSystem,a=e.getModel("itemStyle").getItemStyle(),s=o.getCellWidth(),l=o.getCellHeight(),u=n.start.time;u<=n.end.time;u=o.getNextNDay(u,1).time){var d=o.dataToRect([u],!1).tl,h=new it({shape:{x:d[0],y:d[1],width:s,height:l},cursor:"default",style:a});i.add(h)}},t.prototype._renderLines=function(e,n,i,o){var a=this,s=e.coordinateSystem,l=e.getModel(["splitLine","lineStyle"]).getLineStyle(),u=e.get(["splitLine","show"]),d=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=n.start,c=0;h.time<=n.end.time;c++){f(h.formatedDate),c===0&&(h=s.getDateInfo(n.start.y+"-"+n.start.m));var g=h.date;g.setMonth(g.getMonth()+1),h=s.getDateInfo(g)}function f(p){a._firstDayOfMonth.push(s.getDateInfo(p)),a._firstDayPoints.push(s.dataToRect([p],!1).tl);var y=a._getLinePointsOfOneWeek(e,p,i);a._tlpoints.push(y[0]),a._blpoints.push(y[y.length-1]),u&&a._drawSplitline(y,l,o)}f(s.getNextNDay(n.end.time,1).formatedDate),u&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,d,i),l,o),u&&this._drawSplitline(a._getEdgesPoints(a._blpoints,d,i),l,o)},t.prototype._getEdgesPoints=function(e,n,i){var o=[e[0].slice(),e[e.length-1].slice()],a=i==="horizontal"?0:1;return o[0][a]=o[0][a]-n/2,o[1][a]=o[1][a]+n/2,o},t.prototype._drawSplitline=function(e,n,i){var o=new kn({z2:20,shape:{points:e},style:n});i.add(o)},t.prototype._getLinePointsOfOneWeek=function(e,n,i){for(var o=e.coordinateSystem,a=o.getDateInfo(n),s=[],l=0;l<7;l++){var u=o.getNextNDay(a.time,l),d=o.dataToRect([u.time],!1);s[2*u.day]=d.tl,s[2*u.day+1]=d[i==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(e,n){return ue(e)&&e?Id(e,n):xe(e)?e(n):n.nameMap},t.prototype._yearTextPositionControl=function(e,n,i,o,a){var s=n[0],l=n[1],u=["center","bottom"];o==="bottom"?(l+=a,u=["center","top"]):o==="left"?s-=a:o==="right"?(s+=a,u=["center","top"]):l-=a;var d=0;return o!=="left"&&o!=="right"||(d=Math.PI/2),{rotation:d,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(e,n,i,o){var a=e.getModel("yearLabel");if(a.get("show")){var s=a.get("margin"),l=a.get("position");l||(l=i!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],d=(u[0][0]+u[1][0])/2,h=(u[0][1]+u[1][1])/2,c=i==="horizontal"?0:1,g={top:[d,u[c][1]],bottom:[d,u[1-c][1]],left:[u[1-c][0],h],right:[u[c][0],h]},f=n.start.y;+n.end.y>+n.start.y&&(f=f+"-"+n.end.y);var p=a.get("formatter"),y={start:n.start.y,end:n.end.y,nameMap:f},_=this._formatterLabel(p,y),S=new Ue({z2:30,style:Ye(a,{text:_})});S.attr(this._yearTextPositionControl(S,g[l],i,l,s)),o.add(S)}},t.prototype._monthTextPositionControl=function(e,n,i,o,a){var s="left",l="top",u=e[0],d=e[1];return i==="horizontal"?(d+=a,n&&(s="center"),o==="start"&&(l="bottom")):(u+=a,n&&(l="middle"),o==="start"&&(s="right")),{x:u,y:d,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(e,n,i,o){var a=e.getModel("monthLabel");if(a.get("show")){var s=a.get("nameMap"),l=a.get("margin"),u=a.get("position"),d=a.get("align"),h=[this._tlpoints,this._blpoints];s&&!ue(s)||(s&&(n=ra(s)||n),s=n.get(["time","monthAbbr"])||[]);var c=u==="start"?0:1,g=i==="horizontal"?0:1;l=u==="start"?-l:l;for(var f=d==="center",p=0;p<h[c].length-1;p++){var y=h[c][p].slice(),_=this._firstDayOfMonth[p];if(f){var S=this._firstDayPoints[p];y[g]=(S[g]+h[0][p+1][g])/2}var m=a.get("formatter"),v=s[+_.m-1],b={yyyy:_.y,yy:(_.y+"").slice(2),MM:_.m,M:+_.m,nameMap:v},x=this._formatterLabel(m,b),I=new Ue({z2:30,style:J(Ye(a,{text:x}),this._monthTextPositionControl(y,f,i,u,l))});o.add(I)}}},t.prototype._weekTextPositionControl=function(e,n,i,o,a){var s="center",l="middle",u=e[0],d=e[1],h=i==="start";return n==="horizontal"?(u=u+o+(h?1:-1)*a[0]/2,s=h?"right":"left"):(d=d+o+(h?1:-1)*a[1]/2,l=h?"bottom":"top"),{x:u,y:d,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(e,n,i,o,a){var s=e.getModel("dayLabel");if(s.get("show")){var l=e.coordinateSystem,u=s.get("position"),d=s.get("nameMap"),h=s.get("margin"),c=l.getFirstDayOfWeek();(!d||ue(d))&&(d&&(n=ra(d)||n),d=n.get(["time","dayOfWeekShort"])||Q(n.get(["time","dayOfWeekAbbr"]),function(v){return v[0]}));var g=l.getNextNDay(i.end.time,7-i.lweek).time,f=[l.getCellWidth(),l.getCellHeight()];h=ne(h,Math.min(f[1],f[0])),u==="start"&&(g=l.getNextNDay(i.start.time,-(7+i.fweek)).time,h=-h);for(var p=0;p<7;p++){var y,_=l.getNextNDay(g,p),S=l.dataToRect([_.time],!1).center;y=Math.abs((p+c)%7);var m=new Ue({z2:30,style:J(Ye(s,{text:d[y]}),this._weekTextPositionControl(S,o,u,h,f))});a.add(m)}}},t.type="calendar",t}(Rt),Gi=864e5,Gf=function(){function r(t,e,n){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=t}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(t){var e=(t=wd(t)).getFullYear(),n=t.getMonth()+1,i=n<10?"0"+n:""+n,o=t.getDate(),a=o<10?"0"+o:""+o,s=t.getDay();return{y:e+"",m:i,d:a,day:s=Math.abs((s+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+i+"-"+a,date:t}},r.prototype.getNextNDay=function(t,e){return(e=e||0)===0||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},r.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],o=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[n,7]:[7,n];R([0,1],function(h){d(o,h)&&(a[i[h]]=o[h]*s[h])});var l={width:e.getWidth(),height:e.getHeight()},u=this._rect=ut(a,l);function d(h,c){return h[c]!=null&&h[c]!=="auto"}R([0,1],function(h){d(o,h)||(o[h]=u[i[h]]/s[h])}),this._sw=o[0],this._sh=o[1]},r.prototype.dataToPoint=function(t,e){$(t)&&(t=t[0]),e==null&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo,o=n.formatedDate;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+Gi))return[NaN,NaN];var a=n.day,s=this._getRangeInfo([i.start.time,o]).nthWeek;return this._orient==="vertical"?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},r.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},r.prototype.dataToRect=function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},r.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},r.prototype.convertToPixel=function(t,e,n){var i=qs(e);return i===this?i.dataToPoint(n):null},r.prototype.convertFromPixel=function(t,e,n){var i=qs(e);return i===this?i.pointToData(n):null},r.prototype.containPoint=function(t){return!1},r.prototype._initRangeOption=function(){var t,e=this._model.get("range");if($(e)&&e.length===1&&(e=e[0]),$(e))t=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var i=this.getDateInfo(n),o=i.date;o.setMonth(o.getMonth()+1);var a=this.getNextNDay(o,-1);t=[i.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},r.prototype._getRangeInfo=function(t){var e,n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];n[0].time>n[1].time&&(e=!0,n.reverse());var i=Math.floor(n[1].time/Gi)-Math.floor(n[0].time/Gi)+1,o=new Date(n[0].time),a=o.getDate(),s=n[1].date.getDate();o.setDate(a+i-1);var l=o.getDate();if(l!==s)for(var u=o.getTime()-n[1].time>0?1:-1;(l=o.getDate())!==s&&(o.getTime()-n[1].time)*u>0;)i-=u,o.setDate(l-u);var d=Math.floor((i+n[0].day+6)/7),h=e?1-d:d-1;return e&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:i,weeks:d,nthWeek:h,fweek:n[0].day,lweek:n[1].day}},r.prototype._getDateByWeeksAndDay=function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||t===0&&e<i.fweek||t===i.weeks&&e>i.lweek)return null;var o=7*(t-1)-i.fweek+e,a=new Date(i.start.time);return a.setDate(+i.start.d+o),this.getDateInfo(a)},r.create=function(t,e){var n=[];return t.eachComponent("calendar",function(i){var o=new r(i);n.push(o),i.coordinateSystem=o}),t.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=n[i.get("calendarIndex")||0])}),n},r.dimensions=["time","value"],r}();function qs(r){var t=r.calendarModel,e=r.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem:null}function Ks(r,t){var e;return R(t,function(n){r[n]!=null&&r[n]!=="auto"&&(e=!0)}),e}var Qs=["transition","enterFrom","leaveTo"],Ff=Qs.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function tr(r,t,e){if(e&&(!r[e]&&t[e]&&(r[e]={}),r=r[e],t=t[e]),r&&t)for(var n=e?Qs:Ff,i=0;i<n.length;i++){var o=n[i];r[o]==null&&t[o]!=null&&(r[o]=t[o])}}var Wf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return U(t,r),t.prototype.mergeOption=function(e,n){var i=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,e,n),this.option.elements=i},t.prototype.optionUpdated=function(e,n){var i=this.option,o=(n?i:e).elements,a=i.elements=n?[]:i.elements,s=[];this._flatten(o,s,null);var l=Md(a,s,"normalMerge"),u=this._elOptionsToUpdate=[];R(l,function(d,h){var c=d.newOption;c&&(u.push(c),function(g,f){var p=g.existing;if(f.id=g.keyInfo.id,!f.type&&p&&(f.type=p.type),f.parentId==null){var y=f.parentOption;y?f.parentId=y.id:p&&(f.parentId=p.parentId)}f.parentOption=null}(d,c),function(g,f,p){var y=J({},p),_=g[f],S=p.$action||"merge";S==="merge"?_?(rn(_,y,!0),na(_,y,{ignoreSize:!0}),Dd(p,_),tr(p,_),tr(p,_,"shape"),tr(p,_,"style"),tr(p,_,"extra"),p.clipPath=_.clipPath):g[f]=y:S==="replace"?g[f]=y:S==="remove"&&_&&(g[f]=null)}(a,h,c),function(g,f){if(g&&(g.hv=f.hv=[Ks(f,["left","right"]),Ks(f,["top","bottom"])],g.type==="group")){var p=g,y=f;p.width==null&&(p.width=y.width=0),p.height==null&&(p.height=y.height=0)}}(a[h],c))},this),i.elements=Xe(a,function(d){return d&&delete d.$action,d!=null})},t.prototype._flatten=function(e,n,i){R(e,function(o){if(o){i&&(o.parentOption=i),n.push(o);var a=o.children;a&&a.length&&this._flatten(a,n,o),delete o.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(zt),$s={path:null,compoundPath:null,group:ce,image:en,text:Ue},Ge=Ve(),Hf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(){this._elMap=De()},t.prototype.render=function(e,n,i){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,i)},t.prototype._updateElements=function(e){var n=e.useElOptionsToUpdate();if(n){var i=this._elMap,o=this.group,a=e.get("z"),s=e.get("zlevel");R(n,function(l){var u=rt(l.id,null),d=u!=null?i.get(u):null,h=rt(l.parentId,null),c=h!=null?i.get(h):o,g=l.type,f=l.style;g==="text"&&f&&l.hv&&l.hv[1]&&(f.textVerticalAlign=f.textBaseline=f.verticalAlign=f.align=null);var p=l.textContent,y=l.textConfig;if(f&&Ds(f,g,!!y,!!p)){var _=Ls(f,g,!0);!y&&_.textConfig&&(y=l.textConfig=_.textConfig),!p&&_.textContent&&(p=_.textContent)}var S=function(N){return N=J({},N),R(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Cd),function(V){delete N[V]}),N}(l),m=l.$action||"merge",v=m==="merge",b=m==="replace";if(v){var x=d;(T=!d)?x=Js(u,c,l.type,i):(x&&(Ge(x).isNew=!1),Rs(x)),x&&(qn(x,S,e,{isInit:T}),el(x,l,a,s))}else if(b){nr(d,l,i,e);var I=Js(u,c,l.type,i);I&&(qn(I,S,e,{isInit:!0}),el(I,l,a,s))}else m==="remove"&&(ks(d,l),nr(d,l,i,e));var w=i.get(u);if(w&&p)if(v){var M=w.getTextContent();M?M.attr(p):w.setTextContent(new Ue(p))}else b&&w.setTextContent(new Ue(p));if(w){var D=l.clipPath;if(D){var C=D.type,L=void 0,T=!1;if(v){var A=w.getClipPath();L=(T=!A||Ge(A).type!==C)?Fi(C):A}else b&&(T=!0,L=Fi(C));w.setClipPath(L),qn(L,D,e,{isInit:T}),Qn(L,D.keyframeAnimation,e)}var k=Ge(w);w.setTextConfig(y),k.option=l,function(N,V,P){var z=ve(N).eventData;N.silent||N.ignore||z||(z=ve(N).eventData={componentType:"graphic",componentIndex:V.componentIndex,name:N.name}),z&&(z.info=P.info)}(w,e,l),Ld({el:w,componentModel:e,itemName:w.name,itemTooltipOption:l.tooltip}),Qn(w,l.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,n){for(var i=e.option.elements,o=this.group,a=this._elMap,s=n.getWidth(),l=n.getHeight(),u=["x","y"],d=0;d<i.length;d++){var h=i[d];if((y=(p=rt(h.id,null))!=null?a.get(p):null)&&y.isGroup){var c=(_=y.parent)===o,g=Ge(y),f=Ge(_);g.width=ne(g.option.width,c?s:f.width)||0,g.height=ne(g.option.height,c?l:f.height)||0}}for(d=i.length-1;d>=0;d--){var p,y;if(h=i[d],y=(p=rt(h.id,null))!=null?a.get(p):null){var _=y.parent,S=(f=Ge(_),_===o?{width:s,height:l}:{width:f.width,height:f.height}),m={},v=To(y,h,S,null,{hv:h.hv,boundingMode:h.bounding},m);if(!Ge(y).isNew&&v){for(var b=h.transition,x={},I=0;I<u.length;I++){var w=u[I],M=m[w];b&&(Mt(b)||ze(b,w)>=0)?x[w]=M:y[w]=M}Te(y,x,e,0)}else y.attr(m)}}},t.prototype._clear=function(){var e=this,n=this._elMap;n.each(function(i){nr(i,Ge(i).option,n,e._lastGraphicModel)}),this._elMap=De()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(Rt);function Fi(r){var t=new(W($s,r)?$s[r]:$o(r))({});return Ge(t).type=r,t}function Js(r,t,e,n){var i=Fi(e);return t.add(i),n.set(r,i),Ge(i).id=r,Ge(i).isNew=!0,i}function nr(r,t,e,n){r&&r.parent&&(r.type==="group"&&r.traverse(function(i){nr(i,t,e,n)}),Kn(r,t,n),e.removeKey(Ge(r).id))}function el(r,t,e,n){r.isGroup||R([["cursor",qt.prototype.cursor],["zlevel",n||0],["z",e||0],["z2",0]],function(i){var o=i[0];W(t,o)?r[o]=Le(t[o],i[1]):r[o]==null&&(r[o]=i[1])}),R(_e(t),function(i){if(i.indexOf("on")===0){var o=t[i];r[i]=xe(o)?o:null}}),W(t,"draggable")&&(r.draggable=t.draggable),t.name!=null&&(r.name=t.name),t.id!=null&&(r.id=t.id)}var Uf=["rect","polygon","keep","clear"];function Yf(r,t){var e=Re(r?r.brush:[]);if(e.length){var n=[];R(e,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(n=n.concat(u))});var i=r&&r.toolbox;$(i)&&(i=i[0]),i||(i={feature:{}},r.toolbox=[i]);var o=i.feature||(i.feature={}),a=o.brush||(o.brush={}),s=a.type||(a.type=[]);s.push.apply(s,n),function(l){var u={};R(l,function(d){u[d]=1}),l.length=0,R(u,function(d,h){l.push(h)})}(s),t&&!s.length&&s.push.apply(s,Uf)}}var tl={lineX:nl(0),lineY:nl(1),rect:{point:function(r,t,e){return r&&e.boundingRect.contain(r[0],r[1])},rect:function(r,t,e){return r&&e.boundingRect.intersect(r)}},polygon:{point:function(r,t,e){return r&&e.boundingRect.contain(r[0],r[1])&&on(e.range,r[0],r[1])},rect:function(r,t,e){var n=e.range;if(!r||n.length<=1)return!1;var i=r.x,o=r.y,a=r.width,s=r.height,l=n[0];return!!(on(n,i,o)||on(n,i+a,o)||on(n,i,o+s)||on(n,i+a,o+s)||Ze.create(r).contain(l[0],l[1])||Rn(i,o,i+a,o,n)||Rn(i,o,i,o+s,n)||Rn(i+a,o,i+a,o+s,n)||Rn(i,o+s,i+a,o+s,n))||void 0}}};function nl(r){var t=["x","y"],e=["width","height"];return{point:function(n,i,o){if(n){var a=o.range;return gn(n[r],a)}},rect:function(n,i,o){if(n){var a=o.range,s=[n[t[r]],n[t[r]]+n[e[r]]];return s[1]<s[0]&&s.reverse(),gn(s[0],a)||gn(s[1],a)||gn(a[0],s)||gn(a[1],s)}}}}function gn(r,t){return t[0]<=r&&r<=t[1]}var rl=["inBrush","outOfBrush"],Wi="__ecBrushSelect",Hi="__ecInBrushSelectEvent";function il(r){r.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new Nd(t.option,r)).setInputRanges(t.areas,r)})}function Xf(r,t,e){var n,i,o=[];r.eachComponent({mainType:"brush"},function(a){e&&e.type==="takeGlobalCursor"&&a.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),il(r),r.eachComponent({mainType:"brush"},function(a,s){var l={brushId:a.id,brushIndex:s,brushName:a.name,areas:St(a.areas),selected:[]};o.push(l);var u=a.option,d=u.brushLink,h=[],c=[],g=[],f=!1;s||(n=u.throttleType,i=u.throttleDelay);var p=Q(a.areas,function(m){var v=jf[m.brushType],b=Se({boundingRect:v?v(m):void 0},m);return b.selectors=function(x){var I=x.brushType,w={point:function(M){return tl[I].point(M,w,x)},rect:function(M){return tl[I].rect(M,w,x)}};return w}(b),b}),y=Td(a.option,rl,function(m){m.mappingMethod="fixed"});function _(m){return d==="all"||!!h[m]}function S(m){return!!m.length}$(d)&&R(d,function(m){h[m]=1}),r.eachSeries(function(m,v){var b=g[v]=[];m.subType==="parallel"?function(x,I){var w=x.coordinateSystem;f=f||w.hasAxisBrushed(),_(I)&&w.eachActiveState(x.getData(),function(M,D){M==="active"&&(c[D]=1)})}(m,v):function(x,I,w){if(!(!x.brushSelector||function(D,C){var L=D.option.seriesIndex;return L!=null&&L!=="all"&&($(L)?ze(L,C)<0:C!==L)}(a,I))&&(R(p,function(D){a.brushTargetManager.controlSeries(D,x,r)&&w.push(D),f=f||S(w)}),_(I)&&S(w))){var M=x.getData();M.each(function(D){ol(x,w,M,D)&&(c[D]=1)})}}(m,v,b)}),r.eachSeries(function(m,v){var b={seriesId:m.id,seriesIndex:v,seriesName:m.name,dataIndex:[]};l.selected.push(b);var x=g[v],I=m.getData(),w=_(v)?function(M){return c[M]?(b.dataIndex.push(I.getRawIndex(M)),"inBrush"):"outOfBrush"}:function(M){return ol(m,x,I,M)?(b.dataIndex.push(I.getRawIndex(M)),"inBrush"):"outOfBrush"};(_(v)?f:S(x))&&Ad(rl,y,I,w)})}),function(a,s,l,u,d){if(d){var h=a.getZr();if(!h[Hi]){h[Wi]||(h[Wi]=Zf);var c=Pd(h,Wi,l,s);c(a,u)}}}(t,n,i,o,e)}function Zf(r,t){if(!r.isDisposed()){var e=r.getZr();e[Hi]=!0,r.dispatchAction({type:"brushSelect",batch:t}),e[Hi]=!1}}function ol(r,t,e,n){for(var i=0,o=t.length;i<o;i++){var a=t[i];if(r.brushSelector(n,e,a.selectors,a))return!0}}var jf={rect:function(r){return al(r.range)},polygon:function(r){for(var t,e=r.range,n=0,i=e.length;n<i;n++){t=t||[[1/0,-1/0],[1/0,-1/0]];var o=e[n];o[0]<t[0][0]&&(t[0][0]=o[0]),o[0]>t[0][1]&&(t[0][1]=o[0]),o[1]<t[1][0]&&(t[1][0]=o[1]),o[1]>t[1][1]&&(t[1][1]=o[1])}return t&&al(t)}};function al(r){return new Ze(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var qf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(e,n){this.ecModel=e,this.api=n,this.model,(this._brushController=new kd(n.getZr())).on("brush",le(this._onBrush,this)).mount()},t.prototype.render=function(e,n,i,o){this.model=e,this._updateController(e,n,i,o)},t.prototype.updateTransform=function(e,n,i,o){il(n),this._updateController(e,n,i,o)},t.prototype.updateVisual=function(e,n,i,o){this.updateTransform(e,n,i,o)},t.prototype.updateView=function(e,n,i,o){this._updateController(e,n,i,o)},t.prototype._updateController=function(e,n,i,o){(!o||o.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(i)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var n=this.model.id,i=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:St(i),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:St(i),$from:n})},t.type="brush",t}(Rt),Kf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.areas=[],e.brushOption={},e}return U(t,r),t.prototype.optionUpdated=function(e,n){var i=this.option;!n&&Vd(i,e,["inBrush","outOfBrush"]);var o=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:"#ddd"},o.hasOwnProperty("liftZ")||(o.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=Q(e,function(n){return sl(this.option,n)},this))},t.prototype.setBrushOption=function(e){this.brushOption=sl(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(zt);function sl(r,t){return rn({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new dt(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},t,!0)}var Qf=["rect","polygon","lineX","lineY","keep","clear"],$f=function(r){function t(){return r!==null&&r.apply(this,arguments)||this}return U(t,r),t.prototype.render=function(e,n,i){var o,a,s;n.eachComponent({mainType:"brush"},function(l){o=l.brushType,a=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=o,this._brushMode=a,R(e.get("type",!0),function(l){e.setIconStatus(l,(l==="keep"?a==="multiple":l==="clear"?s:l===o)?"emphasis":"normal")})},t.prototype.updateView=function(e,n,i){this.render(e,n,i)},t.prototype.getIcons=function(){var e=this.model,n=e.get("icon",!0),i={};return R(e.get("type",!0),function(o){n[o]&&(i[o]=n[o])}),i},t.prototype.onclick=function(e,n,i){var o=this._brushType,a=this._brushMode;i==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?o:o!==i&&i,brushMode:i==="keep"?a==="multiple"?"single":"multiple":a}})},t.getDefaultOption=function(e){return{show:!0,type:Qf.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])}},t}(Ed),ll=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return U(t,r),t.prototype.init=function(e,n,i){this.mergeDefaultAndTheme(e,i),this._initData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var n=this._data.count();this.option.loop?e=(e%n+n)%n:(e>=n&&(e=n-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e,n=this.option,i=n.data||[],o=n.axisType,a=this._names=[];o==="category"?(e=[],R(i,function(l,u){var d,h=rt(Rd(l),"");$t(l)?(d=St(l)).value=u:d=u,e.push(d),a.push(h)})):e=i;var s={category:"ordinal",time:"time",value:"number"}[o]||"number";(this._data=new Ee([{name:"value",type:s}],this)).initData(e,a)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(zt),ul=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.type="timeline.slider",t.defaultOption=Od(ll.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(ll);bt(ul,Br.prototype);var Jf=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.type="timeline",t}(Rt),eg=function(r){function t(e,n,i,o){var a=r.call(this,e,n,i)||this;return a.type=o||"value",a}return U(t,r),t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(ea),Ui=Math.PI,dl=Ve(),tg=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(e,n){this.api=n},t.prototype.render=function(e,n,i){if(this.model=e,this.api=i,this.ecModel=n,this.group.removeAll(),e.get("show",!0)){var o=this._layout(e,i),a=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(o,e);e.formatTooltip=function(u){var d=l.scale.getLabel({value:u});return je("nameValue",{noName:!0,value:d})},R(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](o,a,l,e)},this),this._renderAxisLabel(o,s,l,e),this._position(o,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,n){var i,o,a,s,l=e.get(["label","position"]),u=e.get("orient"),d=function(L,T){return ut(L.getBoxLayoutParams(),{width:T.getWidth(),height:T.getHeight()},L.get("padding"))}(e,n),h={horizontal:"center",vertical:(i=l==null||l==="auto"?u==="horizontal"?d.y+d.height/2<n.getHeight()/2?"-":"+":d.x+d.width/2<n.getWidth()/2?"+":"-":ue(l)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[u][l]:l)>=0||i==="+"?"left":"right"},c={horizontal:i>=0||i==="+"?"top":"bottom",vertical:"middle"},g={horizontal:0,vertical:Ui/2},f=u==="vertical"?d.height:d.width,p=e.getModel("controlStyle"),y=p.get("show",!0),_=y?p.get("itemSize"):0,S=y?p.get("itemGap"):0,m=_+S,v=e.get(["label","rotate"])||0;v=v*Ui/180;var b=p.get("position",!0),x=y&&p.get("showPlayBtn",!0),I=y&&p.get("showPrevBtn",!0),w=y&&p.get("showNextBtn",!0),M=0,D=f;b==="left"||b==="bottom"?(x&&(o=[0,0],M+=m),I&&(a=[M,0],M+=m),w&&(s=[D-_,0],D-=m)):(x&&(o=[D-_,0],D-=m),I&&(a=[0,0],M+=m),w&&(s=[D-_,0],D-=m));var C=[M,D];return e.get("inverse")&&C.reverse(),{viewRect:d,mainLength:f,orient:u,rotation:g[u],labelRotation:v,labelPosOpt:i,labelAlign:e.get(["label","align"])||h[u],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||c[u],playPosition:o,prevBtnPosition:a,nextBtnPosition:s,axisExtent:C,controlSize:_,controlGap:S}},t.prototype._position=function(e,n){var i=this._mainGroup,o=this._labelGroup,a=e.viewRect;if(e.orient==="vertical"){var s=No(),l=a.x,u=a.y+a.height;Dn(s,s,[-l,-u]),Bd(s,s,-Ui/2),Dn(s,s,[l,u]),(a=a.clone()).applyTransform(s)}var d=S(a),h=S(i.getBoundingRect()),c=S(o.getBoundingRect()),g=[i.x,i.y],f=[o.x,o.y];f[0]=g[0]=d[0][0];var p,y=e.labelPosOpt;y==null||ue(y)?(m(g,h,d,1,p=y==="+"?0:1),m(f,c,d,1,1-p)):(m(g,h,d,1,p=y>=0?0:1),f[1]=g[1]+y);function _(v){v.originX=d[0][0]-v.x,v.originY=d[1][0]-v.y}function S(v){return[[v.x,v.x+v.width],[v.y,v.y+v.height]]}function m(v,b,x,I,w){v[I]+=x[I][w]-b[I][w]}i.setPosition(g),o.setPosition(f),i.rotation=o.rotation=e.rotation,_(i),_(o)},t.prototype._createAxis=function(e,n){var i=n.getData(),o=n.get("axisType"),a=function(u,d){if(d=d||u.get("type"),d)switch(d){case"category":return new Ud({ordinalMeta:u.getCategories(),extent:[1/0,-1/0]});case"time":return new Hd({locale:u.ecModel.getLocaleModel(),useUTC:u.ecModel.get("useUTC")});default:return new Wd}}(n,o);a.getTicks=function(){return i.mapArray(["value"],function(u){return{value:u}})};var s=i.getDataExtent("value");a.setExtent(s[0],s[1]),a.calcNiceTicks();var l=new eg("value",a,e.axisExtent,o);return l.model=n,l},t.prototype._createGroup=function(e){var n=this[e]=new ce;return this.group.add(n),n},t.prototype._renderAxisLine=function(e,n,i,o){var a=i.getExtent();if(o.get(["lineStyle","show"])){var s=new Tn({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:J({lineCap:"round"},o.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(s);var l=this._progressLine=new Tn({shape:{x1:a[0],x2:this._currentPointer?this._currentPointer.x:a[0],y1:0,y2:0},style:Se({lineCap:"round",lineWidth:s.style.lineWidth},o.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},t.prototype._renderAxisTick=function(e,n,i,o){var a=this,s=o.getData(),l=i.scale.getTicks();this._tickSymbols=[],R(l,function(u){var d=i.dataToCoord(u.value),h=s.getItemModel(u.value),c=h.getModel("itemStyle"),g=h.getModel(["emphasis","itemStyle"]),f=h.getModel(["progress","itemStyle"]),p={x:d,y:0,onclick:le(a._changeTimeline,a,u.value)},y=hl(h,c,n,p);y.ensureState("emphasis").style=g.getItemStyle(),y.ensureState("progress").style=f.getItemStyle(),Gr(y);var _=ve(y);h.get("tooltip")?(_.dataIndex=u.value,_.dataModel=o):_.dataIndex=_.dataModel=null,a._tickSymbols.push(y)})},t.prototype._renderAxisLabel=function(e,n,i,o){var a=this;if(i.getLabelModel().get("show")){var s=o.getData(),l=i.getViewLabels();this._tickLabels=[],R(l,function(u){var d=u.tickValue,h=s.getItemModel(d),c=h.getModel("label"),g=h.getModel(["emphasis","label"]),f=h.getModel(["progress","label"]),p=i.dataToCoord(u.tickValue),y=new Ue({x:p,y:0,rotation:e.labelRotation-e.rotation,onclick:le(a._changeTimeline,a,d),silent:!1,style:Ye(c,{text:u.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});y.ensureState("emphasis").style=Ye(g),y.ensureState("progress").style=Ye(f),n.add(y),Gr(y),dl(y).dataIndex=d,a._tickLabels.push(y)})}},t.prototype._renderControl=function(e,n,i,o){var a=e.controlSize,s=e.rotation,l=o.getModel("controlStyle").getItemStyle(),u=o.getModel(["emphasis","controlStyle"]).getItemStyle(),d=o.getPlayState(),h=o.get("inverse",!0);function c(g,f,p,y){if(g){var _=Gd(Le(o.get(["controlStyle",f+"BtnSize"]),a),a),S=function(m,v,b,x){var I=x.style,w=Yd(m.get(["controlStyle",v]),x||{},new Ze(b[0],b[1],b[2],b[3]));return I&&w.setStyle(I),w}(o,f+"Icon",[0,-_/2,_,_],{x:g[0],y:g[1],originX:a/2,originY:0,rotation:y?-s:0,rectHover:!0,style:l,onclick:p});S.ensureState("emphasis").style=u,n.add(S),Gr(S)}}c(e.nextBtnPosition,"next",le(this._changeTimeline,this,h?"-":"+")),c(e.prevBtnPosition,"prev",le(this._changeTimeline,this,h?"+":"-")),c(e.playPosition,d?"stop":"play",le(this._handlePlayClick,this,!d),!0)},t.prototype._renderCurrentPointer=function(e,n,i,o){var a=o.getData(),s=o.getCurrentIndex(),l=a.getItemModel(s).getModel("checkpointStyle"),u=this,d={onCreate:function(h){h.draggable=!0,h.drift=le(u._handlePointerDrag,u),h.ondragend=le(u._handlePointerDragend,u),cl(h,u._progressLine,s,i,o,!0)},onUpdate:function(h){cl(h,u._progressLine,s,i,o)}};this._currentPointer=hl(l,l,this._mainGroup,{},this._currentPointer,d)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,n,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,n){var i=this._toAxisCoord(e)[0],o=this._axis,a=Vn(o.getExtent().slice());i>a[1]&&(i=a[1]),i<a[0]&&(i=a[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),u=this.model;(n||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=e.model;e._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){var n=this._mainGroup.getLocalTransform();return Fd(e,n,!0)},t.prototype._findNearestTick=function(e){var n,i=this.model.getData(),o=1/0,a=this._axis;return i.each(["value"],function(s,l){var u=a.dataToCoord(s),d=Math.abs(u-e);d<o&&(o=d,n=l)}),n},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var n=this.model.getCurrentIndex();e==="+"?e=n+1:e==="-"&&(e=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),n=this._tickSymbols,i=this._tickLabels;if(n)for(var o=0;o<n.length;o++)n&&n[o]&&n[o].toggleState("progress",o<e);if(i)for(o=0;o<i.length;o++)i&&i[o]&&i[o].toggleState("progress",dl(i[o]).dataIndex<=e)},t.type="timeline.slider",t}(Jf);function hl(r,t,e,n,i,o){var a=t.get("color");if(i)i.setColor(a),e.add(i),o&&o.onUpdate(i);else{var s=r.get("symbol");(i=Zt(s,-1,-1,2,2,a)).setStyle("strokeNoScale",!0),e.add(i),o&&o.onCreate(i)}var l=t.getItemStyle(["color"]);i.setStyle(l),n=rn({rectHover:!0,z2:100},n,!0);var u=An(r.get("symbolSize"));n.scaleX=u[0]/2,n.scaleY=u[1]/2;var d=Nn(r.get("symbolOffset"),u);d&&(n.x=(n.x||0)+d[0],n.y=(n.y||0)+d[1]);var h=r.get("symbolRotate");return n.rotation=(h||0)*Math.PI/180||0,i.attr(n),i.updateTransform(),i}function cl(r,t,e,n,i,o){if(!r.dragging){var a=i.getModel("checkpointStyle"),s=n.dataToCoord(i.getData().get("value",e));if(o||!a.get("animation",!0))r.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}function ng(r){var t=r&&r.timeline;$(t)||(t=t?[t]:[]),R(t,function(e){e&&function(n){var i=n.type,o={number:"value",time:"time"};if(o[i]&&(n.axisType=o[i],delete n.type),pl(n),Dt(n,"controlPosition")){var a=n.controlStyle||(n.controlStyle={});Dt(a,"position")||(a.position=n.controlPosition),a.position!=="none"||Dt(a,"show")||(a.show=!1,delete a.position),delete n.controlPosition}R(n.data||[],function(s){$t(s)&&!$(s)&&(!Dt(s,"value")&&Dt(s,"name")&&(s.value=s.name),pl(s))})}(e)})}function pl(r){var t=r.itemStyle||(r.itemStyle={}),e=t.emphasis||(t.emphasis={}),n=r.label||r.label||{},i=n.normal||(n.normal={}),o={normal:1,emphasis:1};R(n,function(a,s){o[s]||Dt(i,s)||(i[s]=a)}),e.label&&!Dt(n,"emphasis")&&(n.emphasis=e.label,delete e.label)}function Dt(r,t){return r.hasOwnProperty(t)}function Yi(r,t){if(!r)return!1;for(var e=$(r)?r:[r],n=0;n<e.length;n++)if(e[n]&&e[n][t])return!0;return!1}function rr(r){Ar(r,"label",["show"])}var ir=Ve(),lt=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return U(t,r),t.prototype.init=function(e,n,i){this.mergeDefaultAndTheme(e,i),this._mergeOption(e,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Xd.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,n){this._mergeOption(e,n,!1,!1)},t.prototype._mergeOption=function(e,n,i,o){var a=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=ir(s)[a];l&&l.data?(u?u._mergeOption(l,n,!0):(o&&rr(l),R(l.data,function(d){d instanceof Array?(rr(d[0]),rr(d[1])):rr(d)}),u=this.createMarkerModelFromSeries(l,this,n),J(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),ir(s)[a]=u):ir(s)[a]=null},this)},t.prototype.formatTooltip=function(e,n,i){var o=this.getData(),a=this.getRawValue(e),s=o.getName(e);return je("section",{header:this.name,blocks:[je("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.prototype.getDataParams=function(e,n){var i=Br.prototype.getDataParams.call(this,e,n),o=this.__hostSeries;return o&&(i.seriesId=o.id,i.seriesName=o.name,i.seriesType=o.subType),i},t.getMarkerModelFromSeries=function(e,n){return ir(e)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(zt);bt(lt,Br.prototype);var rg=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.createMarkerModelFromSeries=function(e,n,i){return new t(e,n,i)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(lt);function Xi(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function or(r,t,e,n,i,o){var a=[],s=Zd(t,n)?t.getCalculationInfo("stackResultDimension"):n,l=ji(t,s,r),u=t.indicesOfNearest(s,l)[0];a[i]=t.get(e,u),a[o]=t.get(s,u);var d=t.get(n,u),h=jd(t.get(n,u));return(h=Math.min(h,20))>=0&&(a[o]=+a[o].toFixed(h)),[a,d]}var Zi={min:pe(or,"min"),max:pe(or,"max"),average:pe(or,"average"),median:pe(or,"median")};function yn(r,t){if(t){var e=r.getData(),n=r.coordinateSystem,i=n&&n.dimensions;if(!function(h){return!isNaN(parseFloat(h.x))&&!isNaN(parseFloat(h.y))}(t)&&!$(t.coord)&&$(i)){var o=fl(t,e,n,r);if((t=St(t)).type&&Zi[t.type]&&o.baseAxis&&o.valueAxis){var a=ze(i,o.baseAxis.dim),s=ze(i,o.valueAxis.dim),l=Zi[t.type](e,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord!=null&&$(i))for(var u=t.coord,d=0;d<2;d++)Zi[u[d]]&&(u[d]=ji(e,e.mapDimension(i[d]),u[d]));else t.coord=[];return t}}function fl(r,t,e,n){var i={};return r.valueIndex!=null||r.valueDim!=null?(i.valueDataDim=r.valueIndex!=null?t.getDimension(r.valueIndex):r.valueDim,i.valueAxis=e.getAxis(function(o,a){var s=o.getData().getDimensionInfo(a);return s&&s.coordDim}(n,i.valueDataDim)),i.baseAxis=e.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=e.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function vn(r,t){return!(r&&r.containData&&t.coord&&!Xi(t))||r.containData(t.coord)}function gl(r,t){return r?function(e,n,i,o){var a=o<2?e.coord&&e.coord[o]:e.value;return On(a,t[o])}:function(e,n,i,o){return On(e.value,t[o])}}function ji(r,t,e){if(e==="average"){var n=0,i=0;return r.each(t,function(o,a){isNaN(o)||(n+=o,i++)}),n/i}return e==="median"?r.getMedian(t):r.getDataExtent(t)[e==="max"?1:0]}var qi=Ve(),Ki=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.init=function(){this.markerGroupMap=De()},t.prototype.render=function(e,n,i){var o=this,a=this.markerGroupMap;a.each(function(s){qi(s).keep=!1}),n.eachSeries(function(s){var l=lt.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,n,i)}),a.each(function(s){!qi(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(e){qi(e).keep=!0},t.prototype.toggleBlurSeries=function(e,n){var i=this;R(e,function(o){var a=lt.getMarkerModelFromSeries(o,i.type);a&&a.getData().eachItemGraphicEl(function(s){s&&(n?qd(s):Kd(s))})})},t.type="marker",t}(Rt);function yl(r,t,e){var n=t.coordinateSystem;r.each(function(i){var o,a=r.getItemModel(i),s=ne(a.get("x"),e.getWidth()),l=ne(a.get("y"),e.getHeight());if(isNaN(s)||isNaN(l)){if(t.getMarkerPosition)o=t.getMarkerPosition(r.getValues(r.dimensions,i));else if(n){var u=r.get(n.dimensions[0],i),d=r.get(n.dimensions[1],i);o=n.dataToPoint([u,d])}}else o=[s,l];isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),r.setItemLayout(i,o)})}var ig=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.updateTransform=function(e,n,i){n.eachSeries(function(o){var a=lt.getMarkerModelFromSeries(o,"markPoint");a&&(yl(a.getData(),o,i),this.markerGroupMap.get(o.id).updateLayout())},this)},t.prototype.renderSeries=function(e,n,i,o){var a=e.coordinateSystem,s=e.id,l=e.getData(),u=this.markerGroupMap,d=u.get(s)||u.set(s,new Sn),h=function(c,g,f){var p;p=c?Q(c&&c.dimensions,function(m){var v=g.getData().getDimensionInfo(g.getData().mapDimension(m))||{};return J(J({},v),{name:m,ordinalMeta:null})}):[{name:"value",type:"float"}];var y=new Ee(p,f),_=Q(f.get("data"),pe(yn,g));c&&(_=Xe(_,pe(vn,c)));var S=gl(!!c,p);return y.initData(_,null,S),y}(a,e,n);n.setData(h),yl(n.getData(),e,o),h.each(function(c){var g=h.getItemModel(c),f=g.getShallow("symbol"),p=g.getShallow("symbolSize"),y=g.getShallow("symbolRotate"),_=g.getShallow("symbolOffset"),S=g.getShallow("symbolKeepAspect");if(xe(f)||xe(p)||xe(y)||xe(_)){var m=n.getRawValue(c),v=n.getDataParams(c);xe(f)&&(f=f(m,v)),xe(p)&&(p=p(m,v)),xe(y)&&(y=y(m,v)),xe(_)&&(_=_(m,v))}var b=g.getModel("itemStyle").getItemStyle(),x=Fr(l,"color");b.fill||(b.fill=x),h.setItemVisual(c,{symbol:f,symbolSize:p,symbolRotate:y,symbolOffset:_,symbolKeepAspect:S,style:b})}),d.updateData(h),this.group.add(d.group),h.eachItemGraphicEl(function(c){c.traverse(function(g){ve(g).dataModel=n})}),this.markKeep(d),d.group.silent=n.get("silent")||e.get("silent")},t.type="markPoint",t}(Ki),og=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.createMarkerModelFromSeries=function(e,n,i){return new t(e,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(lt),ar=Ve(),ag=function(r,t,e,n){var i,o=r.getData();if($(n))i=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=Ke(n.yAxis,n.xAxis);else{var u=fl(n,o,t,r);s=u.valueAxis,l=ji(o,Qd(o,u.valueDataDim),a)}var d=s.dim==="x"?0:1,h=1-d,c=St(n),g={coord:[]};c.type=null,c.coord=[],c.coord[h]=-1/0,g.coord[h]=1/0;var f=e.get("precision");f>=0&&ot(l)&&(l=+l.toFixed(Math.min(f,20))),c.coord[d]=g.coord[d]=l,i=[c,g,{type:a,valueIndex:n.valueIndex,value:l}]}else i=[]}var p=[yn(r,i[0]),yn(r,i[1]),J({},i[2])];return p[2].type=p[2].type||null,rn(p[2],p[0]),rn(p[2],p[1]),p};function sr(r){return!isNaN(r)&&!isFinite(r)}function vl(r,t,e,n){var i=1-r,o=n.dimensions[r];return sr(t[i])&&sr(e[i])&&t[r]===e[r]&&n.getAxis(o).containData(t[r])}function sg(r,t){if(r.type==="cartesian2d"){var e=t[0].coord,n=t[1].coord;if(e&&n&&(vl(1,e,n,r)||vl(0,e,n,r)))return!0}return vn(r,t[0])&&vn(r,t[1])}function Qi(r,t,e,n,i){var o,a=n.coordinateSystem,s=r.getItemModel(t),l=ne(s.get("x"),i.getWidth()),u=ne(s.get("y"),i.getHeight());if(isNaN(l)||isNaN(u)){if(n.getMarkerPosition)o=n.getMarkerPosition(r.getValues(r.dimensions,t));else{var d=a.dimensions,h=r.get(d[0],t),c=r.get(d[1],t);o=a.dataToPoint([h,c])}if(En(a,"cartesian2d")){var g=a.getAxis("x"),f=a.getAxis("y");d=a.dimensions,sr(r.get(d[0],t))?o[0]=g.toGlobalCoord(g.getExtent()[e?0:1]):sr(r.get(d[1],t))&&(o[1]=f.toGlobalCoord(f.getExtent()[e?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}else o=[l,u];r.setItemLayout(t,o)}var lg=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.updateTransform=function(e,n,i){n.eachSeries(function(o){var a=lt.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=ar(a).from,u=ar(a).to;l.each(function(d){Qi(l,d,!0,o,i),Qi(u,d,!1,o,i)}),s.each(function(d){s.setItemLayout(d,[l.getItemLayout(d),u.getItemLayout(d)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,n,i,o){var a=e.coordinateSystem,s=e.id,l=e.getData(),u=this.markerGroupMap,d=u.get(s)||u.set(s,new ci);this.group.add(d.group);var h=function(v,b,x){var I;I=v?Q(v&&v.dimensions,function(T){var A=b.getData().getDimensionInfo(b.getData().mapDimension(T))||{};return J(J({},A),{name:T,ordinalMeta:null})}):[{name:"value",type:"float"}];var w=new Ee(I,x),M=new Ee(I,x),D=new Ee([],x),C=Q(x.get("data"),pe(ag,b,v,x));v&&(C=Xe(C,pe(sg,v)));var L=gl(!!v,I);return w.initData(Q(C,function(T){return T[0]}),null,L),M.initData(Q(C,function(T){return T[1]}),null,L),D.initData(Q(C,function(T){return T[2]})),D.hasItemOption=!0,{from:w,to:M,line:D}}(a,e,n),c=h.from,g=h.to,f=h.line;ar(n).from=c,ar(n).to=g,n.setData(f);var p=n.get("symbol"),y=n.get("symbolSize"),_=n.get("symbolRotate"),S=n.get("symbolOffset");function m(v,b,x){var I=v.getItemModel(b);Qi(v,b,x,e,o);var w=I.getModel("itemStyle").getItemStyle();w.fill==null&&(w.fill=Fr(l,"color")),v.setItemVisual(b,{symbolKeepAspect:I.get("symbolKeepAspect"),symbolOffset:Le(I.get("symbolOffset",!0),S[x?0:1]),symbolRotate:Le(I.get("symbolRotate",!0),_[x?0:1]),symbolSize:Le(I.get("symbolSize"),y[x?0:1]),symbol:Le(I.get("symbol",!0),p[x?0:1]),style:w})}$(p)||(p=[p,p]),$(y)||(y=[y,y]),$(_)||(_=[_,_]),$(S)||(S=[S,S]),h.from.each(function(v){m(c,v,!0),m(g,v,!1)}),f.each(function(v){var b=f.getItemModel(v).getModel("lineStyle").getLineStyle();f.setItemLayout(v,[c.getItemLayout(v),g.getItemLayout(v)]),b.stroke==null&&(b.stroke=c.getItemVisual(v,"style").fill),f.setItemVisual(v,{fromSymbolKeepAspect:c.getItemVisual(v,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(v,"symbolOffset"),fromSymbolRotate:c.getItemVisual(v,"symbolRotate"),fromSymbolSize:c.getItemVisual(v,"symbolSize"),fromSymbol:c.getItemVisual(v,"symbol"),toSymbolKeepAspect:g.getItemVisual(v,"symbolKeepAspect"),toSymbolOffset:g.getItemVisual(v,"symbolOffset"),toSymbolRotate:g.getItemVisual(v,"symbolRotate"),toSymbolSize:g.getItemVisual(v,"symbolSize"),toSymbol:g.getItemVisual(v,"symbol"),style:b})}),d.updateData(f),h.line.eachItemGraphicEl(function(v){ve(v).dataModel=n,v.traverse(function(b){ve(b).dataModel=n})}),this.markKeep(d),d.group.silent=n.get("silent")||e.get("silent")},t.type="markLine",t}(Ki),ug=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.createMarkerModelFromSeries=function(e,n,i){return new t(e,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(lt),lr=Ve(),dg=function(r,t,e,n){var i=n[0],o=n[1];if(i&&o){var a=yn(r,i),s=yn(r,o),l=a.coord,u=s.coord;l[0]=Ke(l[0],-1/0),l[1]=Ke(l[1],-1/0),u[0]=Ke(u[0],1/0),u[1]=Ke(u[1],1/0);var d=Uo([{},a,s]);return d.coord=[a.coord,s.coord],d.x0=a.x,d.y0=a.y,d.x1=s.x,d.y1=s.y,d}};function ur(r){return!isNaN(r)&&!isFinite(r)}function ml(r,t,e,n){var i=1-r;return ur(t[i])&&ur(e[i])}function hg(r,t){var e=t.coord[0],n=t.coord[1],i={coord:e,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return En(r,"cartesian2d")?!(!e||!n||!ml(1,e,n)&&!ml(0,e,n))||function(a,s,l){return!(a&&a.containZone&&s.coord&&l.coord&&!Xi(s)&&!Xi(l))||a.containZone(s.coord,l.coord)}(r,i,o):vn(r,i)||vn(r,o)}function xl(r,t,e,n,i){var o,a=n.coordinateSystem,s=r.getItemModel(t),l=ne(s.get(e[0]),i.getWidth()),u=ne(s.get(e[1]),i.getHeight());if(isNaN(l)||isNaN(u)){if(n.getMarkerPosition){var d=r.getValues(["x0","y0"],t),h=r.getValues(["x1","y1"],t),c=a.clampData(d),g=a.clampData(h),f=[];e[0]==="x0"?f[0]=c[0]>g[0]?h[0]:d[0]:f[0]=c[0]>g[0]?d[0]:h[0],e[1]==="y0"?f[1]=c[1]>g[1]?h[1]:d[1]:f[1]=c[1]>g[1]?d[1]:h[1],o=n.getMarkerPosition(f,e,!0)}else{var p=[S=r.get(e[0],t),m=r.get(e[1],t)];a.clampData&&a.clampData(p,p),o=a.dataToPoint(p,!0)}if(En(a,"cartesian2d")){var y=a.getAxis("x"),_=a.getAxis("y"),S=r.get(e[0],t),m=r.get(e[1],t);ur(S)?o[0]=y.toGlobalCoord(y.getExtent()[e[0]==="x0"?0:1]):ur(m)&&(o[1]=_.toGlobalCoord(_.getExtent()[e[1]==="y0"?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}else o=[l,u];return o}var _l=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],cg=function(r){function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return U(t,r),t.prototype.updateTransform=function(e,n,i){n.eachSeries(function(o){var a=lt.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var u=Q(_l,function(d){return xl(s,l,d,o,i)});s.setItemLayout(l,u),s.getItemGraphicEl(l).setShape("points",u)})}},this)},t.prototype.renderSeries=function(e,n,i,o){var a=e.coordinateSystem,s=e.id,l=e.getData(),u=this.markerGroupMap,d=u.get(s)||u.set(s,{group:new ce});this.group.add(d.group),this.markKeep(d);var h=function(c,g,f){var p,y,_=["x0","y0","x1","y1"];if(c){var S=Q(c&&c.dimensions,function(b){var x=g.getData(),I=x.getDimensionInfo(x.mapDimension(b))||{};return J(J({},I),{name:b,ordinalMeta:null})});y=Q(_,function(b,x){return{name:b,type:S[x%2].type}}),p=new Ee(y,f)}else p=new Ee(y=[{name:"value",type:"float"}],f);var m=Q(f.get("data"),pe(dg,g,c,f));c&&(m=Xe(m,pe(hg,c)));var v=c?function(b,x,I,w){var M=b.coord[Math.floor(w/2)][w%2];return On(M,y[w])}:function(b,x,I,w){return On(b.value,y[w])};return p.initData(m,null,v),p.hasItemOption=!0,p}(a,e,n);n.setData(h),h.each(function(c){var g=Q(_l,function(I){return xl(h,c,I,e,o)}),f=a.getAxis("x").scale,p=a.getAxis("y").scale,y=f.getExtent(),_=p.getExtent(),S=[f.parse(h.get("x0",c)),f.parse(h.get("x1",c))],m=[p.parse(h.get("y0",c)),p.parse(h.get("y1",c))];Vn(S),Vn(m);var v=y[0]>S[1]||y[1]<S[0]||_[0]>m[1]||_[1]<m[0];h.setItemLayout(c,{points:g,allClipped:v});var b=h.getItemModel(c).getModel("itemStyle").getItemStyle(),x=Fr(l,"color");b.fill||(b.fill=x,ue(b.fill)&&(b.fill=wr(b.fill,.4))),b.stroke||(b.stroke=x),h.setItemVisual(c,"style",b)}),h.diff(lr(d).data).add(function(c){var g=h.getItemLayout(c);if(!g.allClipped){var f=new jt({shape:{points:g.points}});h.setItemGraphicEl(c,f),d.group.add(f)}}).update(function(c,g){var f=lr(d).data.getItemGraphicEl(g),p=h.getItemLayout(c);p.allClipped?f&&d.group.remove(f):(f?Te(f,{shape:{points:p.points}},n,c):f=new jt({shape:{points:p.points}}),h.setItemGraphicEl(c,f),d.group.add(f))}).remove(function(c){var g=lr(d).data.getItemGraphicEl(c);d.group.remove(g)}).execute(),h.eachItemGraphicEl(function(c,g){var f=h.getItemModel(g),p=h.getItemVisual(g,"style");c.useStyle(h.getItemVisual(g,"style")),ht(c,qe(f),{labelFetcher:n,labelDataIndex:g,defaultText:h.getName(g)||"",inheritColor:ue(p.fill)?wr(p.fill,1):"#000"}),nt(c,f),Ae(c,null,null,f.get(["emphasis","disabled"])),ve(c).dataModel=n}),lr(d).data=h,d.group.silent=n.get("silent")||e.get("silent")},t.type="markArea",t}(Ki),bl={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},pg=function(){function r(t){(this._condVal=ue(t)?new RegExp(t):Jd(t)?t:null)==null&&de("")}return r.prototype.evaluate=function(t){var e=typeof t;return ue(e)?this._condVal.test(t):!!ot(e)&&this._condVal.test(t+"")},r}(),fg=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),gg=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},r}(),yg=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},r}(),vg=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),mg=function(){function r(){}return r.prototype.evaluate=function(){for(var t=!!this.valueParser,e=(0,this.getValue)(this.valueGetterParam),n=t?this.valueParser(e):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(t?n:e))return!1;return!0},r}();function $i(r,t){if(r===!0||r===!1){var e=new fg;return e.value=r,e}return Il(r)||de(""),r.and?Sl("and",r,t):r.or?Sl("or",r,t):r.not?function(n,i){var o=n.not,a="";Il(o)||de(a);var s=new vg;return s.child=$i(o,i),s.child||de(a),s}(r,t):function(n,i){for(var o="",a=i.prepareGetValue(n),s=[],l=_e(n),u=n.parser,d=u?ia(u):null,h=0;h<l.length;h++){var c=l[h];if(c!=="parser"&&!i.valueGetterAttrMap.get(c)){var g=W(bl,c)?bl[c]:c,f=n[c],p=d?d(f):f,y=$d(g,p)||g==="reg"&&new pg(p);y||de(o),s.push(y)}}s.length||de(o);var _=new mg;return _.valueGetterParam=a,_.valueParser=d,_.getValue=i.getValue,_.subCondList=s,_}(r,t)}function Sl(r,t,e){var n=t[r];$(n)||de(""),n.length||de("");var i=r==="and"?new gg:new yg;return i.children=Q(n,function(o){return $i(o,e)}),i.children.length||de(""),i}function Il(r){return $t(r)&&!qo(r)}var xg=function(){function r(t,e){this._cond=$i(t,e)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}(),_g={type:"echarts:filter",transform:function(r){for(var t,e,n,i=r.upstream,o=(e=r.config,n={valueGetterAttrMap:De({dimension:!0}),prepareGetValue:function(u){var d=u.dimension;W(u,"dimension")||de("");var h=i.getDimensionInfo(d);return h||de(""),{dimIdx:h.index}},getValue:function(u){return i.retrieveValueFromItem(t,u.dimIdx)}},new xg(e,n)),a=[],s=0,l=i.count();s<l;s++)t=i.getRawDataItem(s),o.evaluate()&&a.push(t);return{data:a}}},bg={type:"echarts:sort",transform:function(r){var t=r.upstream,e=r.config,n="",i=Re(e);i.length||de(n);var o=[];R(i,function(d){var h=d.dimension,c=d.order,g=d.parser,f=d.incomparable;h==null&&de(n),c!=="asc"&&c!=="desc"&&de(n),f&&f!=="min"&&f!=="max"&&de(""),c!=="asc"&&c!=="desc"&&de("");var p=t.getDimensionInfo(h);p||de(n);var y=g?ia(g):null;g&&!y&&de(n),o.push({dimIdx:p.index,parser:y,comparator:new eh(c,f)})});var a=t.sourceFormat;a!==Wo&&a!==th&&de(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(d,h){for(var c=0;c<o.length;c++){var g=o[c],f=t.retrieveValueFromItem(d,g.dimIdx),p=t.retrieveValueFromItem(h,g.dimIdx);g.parser&&(f=g.parser(f),p=g.parser(p));var y=g.comparator.evaluate(f,p);if(y!==0)return y}return 0}),{data:s}}},Ji=Math.sin,eo=Math.cos,wl=Math.PI,Lt=2*Math.PI,Sg=180/wl,Ml=function(){function r(){}return r.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},r.prototype.moveTo=function(t,e){this._add("M",t,e)},r.prototype.lineTo=function(t,e){this._add("L",t,e)},r.prototype.bezierCurveTo=function(t,e,n,i,o,a){this._add("C",t,e,n,i,o,a)},r.prototype.quadraticCurveTo=function(t,e,n,i){this._add("Q",t,e,n,i)},r.prototype.arc=function(t,e,n,i,o,a){this.ellipse(t,e,n,n,0,i,o,a)},r.prototype.ellipse=function(t,e,n,i,o,a,s,l){var u=s-a,d=!l,h=Math.abs(u),c=gt(h-Lt)||(d?u>=Lt:-u>=Lt),g=u>0?u%Lt:u%Lt+Lt,f=!1;f=!!c||!gt(h)&&g>=wl==!!d;var p=t+n*eo(a),y=e+i*Ji(a);this._start&&this._add("M",p,y);var _=Math.round(o*Sg);if(c){var S=1/this._p,m=(d?1:-1)*(Lt-S);this._add("A",n,i,_,1,+d,t+n*eo(a+m),e+i*Ji(a+m)),S>.01&&this._add("A",n,i,_,0,+d,p,y)}else{var v=t+n*eo(s),b=e+i*Ji(s);this._add("A",n,i,_,+f,+d,v,b)}},r.prototype.rect=function(t,e,n,i){this._add("M",t,e),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(t,e,n,i,o,a,s,l,u){for(var d=[],h=this._p,c=1;c<arguments.length;c++){var g=arguments[c];if(isNaN(g))return void(this._invalid=!0);d.push(Math.round(g*h)/h)}this._d.push(t+d.join(" ")),this._start=t==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}(),to="none",Ig=Math.round,no=["lineCap","miterLimit","lineJoin"],wg=Q(no,function(r){return"stroke-"+r.toLowerCase()});function Mg(r,t,e,n){var i=t.opacity==null?1:t.opacity;if(e instanceof en)r("opacity",i);else{if(function(S){var m=S.fill;return m!=null&&m!==to}(t)){var o=an(t.fill);r("fill",o.color);var a=t.fillOpacity!=null?t.fillOpacity*o.opacity*i:o.opacity*i;a<1&&r("fill-opacity",a)}else r("fill",to);if(function(S){var m=S.stroke;return m!=null&&m!==to}(t)){var s=an(t.stroke);r("stroke",s.color);var l=t.strokeNoScale?e.getLineScale():1,u=l?(t.lineWidth||0)/l:0,d=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*i:s.opacity*i,h=t.strokeFirst;if(u!==1&&r("stroke-width",u),h&&r("paint-order",h?"stroke":"fill"),d<1&&r("stroke-opacity",d),t.lineDash){var c=nh(e),g=c[0],f=c[1];g&&(f=Ig(f||0),r("stroke-dasharray",g.join(",")),(f||n)&&r("stroke-dashoffset",f))}for(var p=0;p<no.length;p++){var y=no[p];if(t[y]!==oa[y]){var _=t[y]||oa[y];_&&r(wg[p],_)}}}}}var Dl="http://www.w3.org/2000/svg",Ll="http://www.w3.org/1999/xlink",Dg="http://www.w3.org/2000/xmlns/",Lg="http://www.w3.org/XML/1998/namespace",Cl="ecmeta_";function Tl(r){return document.createElementNS(Dl,r)}function me(r,t,e,n,i){return{tag:r,attrs:e||{},children:n,text:i,key:t}}function ro(r,t){var e=(t=t||{}).newline?`
`:"";return function n(i){var o=i.children,a=i.tag,s=i.attrs,l=i.text;return function(u,d){var h=[];if(d)for(var c in d){var g=d[c],f=c;g!==!1&&(g!==!0&&g!=null&&(f+='="'+g+'"'),h.push(f))}return"<"+u+" "+h.join(" ")+">"}(a,s)+(a!=="style"?rh(l):l||"")+(o?""+e+Q(o,function(u){return n(u)}).join(e)+e:"")+("</"+a+">")}(r)}function io(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Al(r,t,e,n){return me("svg","root",{width:r,height:t,xmlns:Dl,"xmlns:xlink":Ll,version:"1.1",baseProfile:"full",viewBox:!!n&&"0 0 "+r+" "+t},e)}var Cg=0;function Nl(){return Cg++}var Pl={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Ct="transform-origin";function Tg(r,t,e){var n=J({},r.shape);J(n,t),r.buildPath(e,n);var i=new Ml;return i.reset(sa(r)),e.rebuildPath(i,1),i.generateStr(),i.getStr()}function Ag(r,t){var e=t.originX,n=t.originY;(e||n)&&(r[Ct]=e+"px "+n+"px")}var Ng={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function kl(r,t){var e=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[e]=r,e}function Vl(r){return ue(r)?Pl[r]?"cubic-bezier("+Pl[r]+")":oh(r)?r:"":""}function dr(r,t,e,n){var i=r.animators,o=i.length,a=[];if(r instanceof ih){var s=function(S,m,v){var b,x,I=S.shape.paths,w={};if(R(I,function(D){var C=io(v.zrId);C.animation=!0,dr(D,{},C,!0);var L=C.cssAnims,T=C.cssNodes,A=_e(L),k=A.length;if(k){var N=L[x=A[k-1]];for(var V in N){var P=N[V];w[V]=w[V]||{d:""},w[V].d+=P.d||""}for(var z in T){var E=T[z].animation;E.indexOf(x)>=0&&(b=E)}}}),b){m.d=!1;var M=kl(w,v);return b.replace(x,M)}}(r,t,e);if(s)a.push(s);else if(!o)return}else if(!o)return;for(var l={},u=0;u<o;u++){var d=i[u],h=[d.getMaxTime()/1e3+"s"],c=Vl(d.getClip().easing),g=d.getDelay();c?h.push(c):h.push("linear"),g&&h.push(g/1e3+"s"),d.getLoop()&&h.push("infinite");var f=h.join(" ");l[f]=l[f]||[f,[]],l[f][1].push(d)}function p(S){var m,v=S[1],b=v.length,x={},I={},w={},M="animation-timing-function";function D(H,j,q){for(var X=H.getTracks(),K=H.getMaxTime(),re=0;re<X.length;re++){var Ie=X[re];if(Ie.needsAnimate()){var Fe=Ie.keyframes,Pe=Ie.propName;if(q&&(Pe=q(Pe)),Pe)for(var ae=0;ae<Fe.length;ae++){var ie=Fe[ae],fe=Math.round(ie.time/K*100)+"%",We=Vl(ie.easing),et=ie.rawValue;(ue(et)||ot(et))&&(j[fe]=j[fe]||{},j[fe][Pe]=ie.rawValue,We&&(j[fe][M]=We))}}}}for(var C=0;C<b;C++)(B=(E=v[C]).targetName)?B==="shape"&&D(E,I):!n&&D(E,x);for(var L in x){var T={};ah(T,r),J(T,x[L]);var A=aa(T),k=x[L][M];w[L]=A?{transform:A}:{},Ag(w[L],T),k&&(w[L][M]=k)}var N=!0;for(var L in I){w[L]=w[L]||{};var V=!m;k=I[L][M],V&&(m=new la);var P=m.len();m.reset(),w[L].d=Tg(r,I[L],m);var z=m.len();if(!V&&P!==z){N=!1;break}k&&(w[L][M]=k)}if(!N)for(var L in w)delete w[L].d;if(!n)for(C=0;C<b;C++){var E,B;(B=(E=v[C]).targetName)==="style"&&D(E,w,function(H){return Ng[H]})}var G,Z=_e(w),O=!0;for(C=1;C<Z.length;C++){var F=Z[C-1],Y=Z[C];if(w[F][Ct]!==w[Y][Ct]){O=!1;break}G=w[F][Ct]}if(O&&G){for(var L in w)w[L][Ct]&&delete w[L][Ct];t[Ct]=G}if(Xe(Z,function(H){return _e(w[H]).length>0}).length)return kl(w,e)+" "+S[0]+" both"}for(var y in l)(s=p(l[y]))&&a.push(s);if(a.length){var _=e.zrId+"-cls-"+Nl();e.cssNodes["."+_]={animation:a.join(",")},t.class=_}}function El(r,t,e,n){var i=JSON.stringify(r),o=e.cssStyleCache[i];o||(o=e.zrId+"-cls-"+Nl(),e.cssStyleCache[i]=o,e.cssNodes["."+o+":hover"]=r),t.class=t.class?t.class+" "+o:o}var mn=Math.round;function zl(r){return r&&ue(r.src)}function Rl(r){return r&&xe(r.toDataURL)}function oo(r,t,e,n){Mg(function(i,o){var a=i==="fill"||i==="stroke";a&&ua(o)?Ul(t,r,i,n):a&&Wr(o)?Yl(e,r,i,n):r[i]=a&&o==="none"?"transparent":o},t,e,!1),function(i,o,a){var s=i.style;if(Ih(s)){var l=wh(i),u=a.shadowCache,d=u[l];if(!d){var h=i.getGlobalScale(),c=h[0],g=h[1];if(!c||!g)return;var f=s.shadowOffsetX||0,p=s.shadowOffsetY||0,y=s.shadowBlur,_=an(s.shadowColor),S=_.opacity,m=_.color,v=y/2/c+" "+y/2/g;d=a.zrId+"-s"+a.shadowIdx++,a.defs[d]=me("filter",d,{id:d,x:"-100%",y:"-100%",width:"300%",height:"300%"},[me("feDropShadow","",{dx:f/c,dy:p/g,stdDeviation:v,"flood-color":m,"flood-opacity":S})]),u[l]=d}o.filter=Bn(d)}}(e,r,n)}function ao(r,t){var e=bh(t);e&&(e.each(function(n,i){n!=null&&(r[(Cl+i).toLowerCase()]=n+"")}),t.isSilent()&&(r[Cl+"silent"]="true"))}function Ol(r){return gt(r[0]-1)&&gt(r[1])&&gt(r[2])&&gt(r[3]-1)}function so(r,t,e){if(t&&(!function(i){return gt(i[4])&&gt(i[5])}(t)||!Ol(t))){var n=1e4;r.transform=Ol(t)?"translate("+mn(t[4]*n)/n+" "+mn(t[5]*n)/n+")":Sh(t)}}function Bl(r,t,e){for(var n=r.points,i=[],o=0;o<n.length;o++)i.push(mn(n[o][0]*e)/e),i.push(mn(n[o][1]*e)/e);t.points=i.join(" ")}function Gl(r){return!r.smooth}var Fl,lo,Pg={circle:[(Fl=["cx","cy","r"],lo=Q(Fl,function(r){return typeof r=="string"?[r,r]:r}),function(r,t,e){for(var n=0;n<lo.length;n++){var i=lo[n],o=r[i[0]];o!=null&&(t[i[1]]=mn(o*e)/e)}})],polyline:[Bl,Gl],polygon:[Bl,Gl]};function Wl(r,t){var e=r.style,n=r.shape,i=Pg[r.type],o={},a=t.animation,s="path",l=r.style.strokePercent,u=t.compress&&sa(r)||4;if(!i||t.willUpdate||i[1]&&!i[1](n)||a&&function(y){for(var _=y.animators,S=0;S<_.length;S++)if(_[S].targetName==="shape")return!0;return!1}(r)||l<1){var d=!r.path||r.shapeChanged();r.path||r.createPathProxy();var h=r.path;d&&(h.beginPath(),r.buildPath(h,r.shape),r.pathUpdated());var c=h.getVersion(),g=r,f=g.__svgPathBuilder;g.__svgPathVersion===c&&f&&l===g.__svgPathStrokePercent||(f||(f=g.__svgPathBuilder=new Ml),f.reset(u),h.rebuildPath(f,l),f.generateStr(),g.__svgPathVersion=c,g.__svgPathStrokePercent=l),o.d=f.getStr()}else{s=r.type;var p=Math.pow(10,u);i[0](n,o,p)}return so(o,r.transform),oo(o,e,r,t),ao(o,r),t.animation&&dr(r,o,t),t.emphasis&&function(y,_,S){if(!y.ignore)if(y.isSilent())El(M={"pointer-events":"none"},_,S);else{var m=y.states.emphasis&&y.states.emphasis.style?y.states.emphasis.style:{},v=m.fill;if(!v){var b=y.style&&y.style.fill,x=y.states.select&&y.states.select.style&&y.states.select.style.fill,I=y.currentStates.indexOf("select")>=0&&x||b;I&&(v=sh(I))}var w=m.lineWidth;w&&(w/=!m.strokeNoScale&&y.transform?y.transform[0]:1);var M={cursor:"pointer"};v&&(M.fill=v),m.stroke&&(M.stroke=m.stroke),w&&(M["stroke-width"]=w),El(M,_,S)}}(r,o,t),me(s,r.id+"",o)}function Hl(r,t){return r instanceof be?Wl(r,t):r instanceof en?function(e,n){var i=e.style,o=i.image;if(o&&!ue(o)&&(zl(o)?o=o.src:Rl(o)&&(o=o.toDataURL())),o){var a=i.x||0,s=i.y||0,l={href:o,width:i.width,height:i.height};return a&&(l.x=a),s&&(l.y=s),so(l,e.transform),oo(l,i,e,n),ao(l,e),n.animation&&dr(e,l,n),me("image",e.id+"",l)}}(r,t):r instanceof lh?function(e,n){var i=e.style,o=i.text;if(o!=null&&(o+=""),o&&!isNaN(i.x)&&!isNaN(i.y)){var a=i.font||fh,s=i.x||0,l=gh(i.y||0,yh(a),i.textBaseline),u={"dominant-baseline":"central","text-anchor":vh[i.textAlign]||i.textAlign};if(mh(i)){var d="",h=i.fontStyle,c=xh(i.fontSize);if(!parseFloat(c))return;var g=i.fontFamily||_h,f=i.fontWeight;d+="font-size:"+c+";font-family:"+g+";",h&&h!=="normal"&&(d+="font-style:"+h+";"),f&&f!=="normal"&&(d+="font-weight:"+f+";"),u.style=d}else u.style="font: "+a;return o.match(/\s/)&&(u["xml:space"]="preserve"),s&&(u.x=s),l&&(u.y=l),so(u,e.transform),oo(u,i,e,n),ao(u,e),n.animation&&dr(e,u,n),me("text",e.id+"",u,void 0,o)}}(r,t):void 0}function Ul(r,t,e,n){var i,o=r[e],a={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if(uh(o))i="linearGradient",a.x1=o.x,a.y1=o.y,a.x2=o.x2,a.y2=o.y2;else{if(!dh(o))return;i="radialGradient",a.cx=Le(o.x,.5),a.cy=Le(o.y,.5),a.r=Le(o.r,.5)}for(var s=o.colorStops,l=[],u=0,d=s.length;u<d;++u){var h=100*hh(s[u].offset)+"%",c=s[u].color,g=an(c),f=g.color,p=g.opacity,y={offset:h};y["stop-color"]=f,p<1&&(y["stop-opacity"]=p),l.push(me("stop",u+"",y))}var _=ro(me(i,"",a,l)),S=n.gradientCache,m=S[_];m||(m=n.zrId+"-g"+n.gradientIdx++,S[_]=m,a.id=m,n.defs[m]=me(i,m,a,l)),t[e]=Bn(m)}function Yl(r,t,e,n){var i,o=r.style[e],a=r.getBoundingRect(),s={},l=o.repeat,u=l==="no-repeat",d=l==="repeat-x",h=l==="repeat-y";if(ch(o)){var c=o.imageWidth,g=o.imageHeight,f=void 0,p=o.image;if(ue(p)?f=p:zl(p)?f=p.src:Rl(p)&&(f=p.toDataURL()),typeof Image>"u"){var y="Image width/height must been given explictly in svg-ssr renderer.";Sr(c,y),Sr(g,y)}else if(c==null||g==null){var _=function(D,C){if(D){var L=D.elm,T=c||C.width,A=g||C.height;D.tag==="pattern"&&(d?(A=1,T/=a.width):h&&(T=1,A/=a.height)),D.attrs.width=T,D.attrs.height=A,L&&(L.setAttribute("width",T),L.setAttribute("height",A))}},S=ph(f,null,r,function(D){u||_(x,D),_(i,D)});S&&S.width&&S.height&&(c=c||S.width,g=g||S.height)}i=me("image","img",{href:f,width:c,height:g}),s.width=c,s.height=g}else o.svgElement&&(i=St(o.svgElement),s.width=o.svgWidth,s.height=o.svgHeight);if(i){var m,v;u?m=v=1:d?(v=1,m=s.width/a.width):h?(m=1,v=s.height/a.height):s.patternUnits="userSpaceOnUse",m==null||isNaN(m)||(s.width=m),v==null||isNaN(v)||(s.height=v);var b=aa(o);b&&(s.patternTransform=b);var x=me("pattern","",s,[i]),I=ro(x),w=n.patternCache,M=w[I];M||(M=n.zrId+"-p"+n.patternIdx++,w[I]=M,s.id=M,x=n.defs[M]=me("pattern",M,s,[i])),t[e]=Bn(M)}}function kg(r,t,e){var n=e.clipPathCache,i=e.defs,o=n[r.id];if(!o){var a={id:o=e.zrId+"-c"+e.clipPathIdx++};n[r.id]=o,i[o]=me("clipPath",o,a,[Wl(r,e)])}t["clip-path"]=Bn(o)}function Xl(r){return document.createTextNode(r)}function Wt(r,t,e){r.insertBefore(t,e)}function Zl(r,t){r.removeChild(t)}function jl(r,t){r.appendChild(t)}function ql(r){return r.parentNode}function Kl(r){return r.nextSibling}function uo(r,t){r.textContent=t}var Ql=58,Vg=120,Eg=me("","");function ho(r){return r===void 0}function $e(r){return r!==void 0}function zg(r,t,e){for(var n={},i=t;i<=e;++i){var o=r[i].key;o!==void 0&&(n[o]=i)}return n}function xn(r,t){var e=r.key===t.key;return r.tag===t.tag&&e}function hr(r){var t,e=r.children,n=r.tag;if($e(n)){var i=r.elm=Tl(n);if(co(Eg,r),$(e))for(t=0;t<e.length;++t){var o=e[t];o!=null&&jl(i,hr(o))}else $e(r.text)&&!$t(r.text)&&jl(i,Xl(r.text))}else r.elm=Xl(r.text);return r.elm}function $l(r,t,e,n,i){for(;n<=i;++n){var o=e[n];o!=null&&Wt(r,hr(o),t)}}function cr(r,t,e,n){for(;e<=n;++e){var i=t[e];i!=null&&($e(i.tag)?Zl(ql(i.elm),i.elm):Zl(r,i.elm))}}function co(r,t){var e,n=t.elm,i=r&&r.attrs||{},o=t.attrs||{};if(i!==o){for(e in o){var a=o[e];i[e]!==a&&(a===!0?n.setAttribute(e,""):a===!1?n.removeAttribute(e):e==="style"?n.style.cssText=a:e.charCodeAt(0)!==Vg?n.setAttribute(e,a):e==="xmlns:xlink"||e==="xmlns"?n.setAttributeNS(Dg,e,a):e.charCodeAt(3)===Ql?n.setAttributeNS(Lg,e,a):e.charCodeAt(5)===Ql?n.setAttributeNS(Ll,e,a):n.setAttribute(e,a))}for(e in i)e in o||n.removeAttribute(e)}}function Ht(r,t){var e=t.elm=r.elm,n=r.children,i=t.children;r!==t&&(co(r,t),ho(t.text)?$e(n)&&$e(i)?n!==i&&function(o,a,s){for(var l,u,d,h=0,c=0,g=a.length-1,f=a[0],p=a[g],y=s.length-1,_=s[0],S=s[y];h<=g&&c<=y;)f==null?f=a[++h]:p==null?p=a[--g]:_==null?_=s[++c]:S==null?S=s[--y]:xn(f,_)?(Ht(f,_),f=a[++h],_=s[++c]):xn(p,S)?(Ht(p,S),p=a[--g],S=s[--y]):xn(f,S)?(Ht(f,S),Wt(o,f.elm,Kl(p.elm)),f=a[++h],S=s[--y]):xn(p,_)?(Ht(p,_),Wt(o,p.elm,f.elm),p=a[--g],_=s[++c]):(ho(l)&&(l=zg(a,h,g)),ho(u=l[_.key])||(d=a[u]).tag!==_.tag?Wt(o,hr(_),f.elm):(Ht(d,_),a[u]=void 0,Wt(o,d.elm,f.elm)),_=s[++c]);(h<=g||c<=y)&&(h>g?$l(o,s[y+1]==null?null:s[y+1].elm,s,c,y):cr(o,a,h,g))}(e,n,i):$e(i)?($e(r.text)&&uo(e,""),$l(e,null,i,0,i.length-1)):$e(n)?cr(e,n,0,n.length-1):$e(r.text)&&uo(e,""):r.text!==t.text&&($e(n)&&cr(e,n,0,n.length-1),uo(e,t.text)))}var Rg=0,Og=function(){function r(t,e,n){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=e,this._opts=n=J({},n),this.root=t,this._id="zr"+Rg++,this._oldVNode=Al(n.width,n.height),t&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=Tl("svg");co(null,this._oldVNode),i.appendChild(o),t.appendChild(i)}this.resize(n.width,n.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",function(e,n){if(xn(e,n))Ht(e,n);else{var i=e.elm,o=ql(i);hr(n),o!==null&&(Wt(o,n.elm,Kl(i)),cr(o,[e],0,0))}}(this._oldVNode,t),this._oldVNode=t}},r.prototype.renderOneToVNode=function(t){return Hl(t,io(this._id))},r.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),n=this._width,i=this._height,o=io(this._id);o.animation=t.animation,o.willUpdate=t.willUpdate,o.compress=t.compress,o.emphasis=t.emphasis;var a=[],s=this._bgVNode=function(c,g,f,p){var y;if(f&&f!=="none")if(y=me("rect","bg",{width:c,height:g,x:"0",y:"0"}),ua(f))Ul({fill:f},y.attrs,"fill",p);else if(Wr(f))Yl({style:{fill:f},dirty:Pt,getBoundingRect:function(){return{width:c,height:g}}},y.attrs,"fill",p);else{var _=an(f),S=_.color,m=_.opacity;y.attrs.fill=S,m<1&&(y.attrs["fill-opacity"]=m)}return y}(n,i,this._backgroundColor,o);s&&a.push(s);var l=t.compress?null:this._mainVNode=me("g","main",{},[]);this._paintList(e,o,l?l.children:a),l&&a.push(l);var u=Q(_e(o.defs),function(c){return o.defs[c]});if(u.length&&a.push(me("defs","defs",{},u)),t.animation){var d=function(c,g,f){var p=(f=f||{}).newline?`
`:"",y=" {"+p,_=p+"}",S=Q(_e(c),function(v){return v+y+Q(_e(c[v]),function(b){return b+":"+c[v][b]+";"}).join(p)+_}).join(p),m=Q(_e(g),function(v){return"@keyframes "+v+y+Q(_e(g[v]),function(b){return b+y+Q(_e(g[v][b]),function(x){var I=g[v][b][x];return x==="d"&&(I='path("'+I+'")'),x+":"+I+";"}).join(p)+_}).join(p)+_}).join(p);return S||m?["<![CDATA[",S,m,"]]>"].join(p):""}(o.cssNodes,o.cssAnims,{newline:!0});if(d){var h=me("style","stl",{},[],d);a.push(h)}}return Al(n,i,a,t.useViewBox)},r.prototype.renderToString=function(t){return t=t||{},ro(this.renderToVNode({animation:Le(t.cssAnimation,!0),emphasis:Le(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Le(t.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(t,e,n){for(var i,o,a=t.length,s=[],l=0,u=0,d=0;d<a;d++){var h=t[d];if(!h.invisible){var c=h.__clipPaths,g=c&&c.length||0,f=o&&o.length||0,p=void 0;for(p=Math.max(g-1,f-1);p>=0&&(!c||!o||c[p]!==o[p]);p--);for(var y=f-1;y>p;y--)i=s[--l-1];for(var _=p+1;_<g;_++){var S={};kg(c[_],S,e);var m=me("g","clip-g-"+u++,S,[]);(i?i.children:n).push(m),s[l++]=m,i=m}o=c;var v=Hl(h,e);v&&(i?i.children:n).push(v)}}},r.prototype.resize=function(t,e){var n=this._opts,i=this.root,o=this._viewport;if(t!=null&&(n.width=t),e!=null&&(n.height=e),i&&o&&(o.style.display="none",t=da(i,0,n),e=da(i,1,n),o.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,o){var a=o.style;a.width=t+"px",a.height=e+"px"}if(Wr(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",e));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",e))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(t){var e=this.renderToString(),n="data:image/svg+xml;";return t?(e=Mh(e))&&n+"base64,"+e:n+"charset=UTF-8,"+encodeURIComponent(e)},r}(),Je=la.CMD;function Ut(r,t){return Math.abs(r-t)<1e-5}function po(r){var t,e,n,i,o,a=r.data,s=r.len(),l=[],u=0,d=0,h=0,c=0;function g(L,T){t&&t.length>2&&l.push(t),t=[L,T]}function f(L,T,A,k){Ut(L,A)&&Ut(T,k)||t.push(L,T,A,k,A,k)}function p(L,T,A,k,N,V){var P=Math.abs(T-L),z=4*Math.tan(P/4)/3,E=T<L?-1:1,B=Math.cos(L),G=Math.sin(L),Z=Math.cos(T),O=Math.sin(T),F=B*N+A,Y=G*V+k,H=Z*N+A,j=O*V+k,q=N*z*E,X=V*z*E;t.push(F-q*G,Y+X*B,H+q*O,j-X*Z,H,j)}for(var y=0;y<s;){var _=a[y++],S=y===1;switch(S&&(h=u=a[y],c=d=a[y+1],_!==Je.L&&_!==Je.C&&_!==Je.Q||(t=[h,c])),_){case Je.M:u=h=a[y++],d=c=a[y++],g(h,c);break;case Je.L:f(u,d,e=a[y++],n=a[y++]),u=e,d=n;break;case Je.C:t.push(a[y++],a[y++],a[y++],a[y++],u=a[y++],d=a[y++]);break;case Je.Q:e=a[y++],n=a[y++],i=a[y++],o=a[y++],t.push(u+2/3*(e-u),d+2/3*(n-d),i+2/3*(e-i),o+2/3*(n-o),i,o),u=i,d=o;break;case Je.A:var m=a[y++],v=a[y++],b=a[y++],x=a[y++],I=a[y++],w=a[y++]+I;y+=1;var M=!a[y++];e=Math.cos(I)*b+m,n=Math.sin(I)*x+v,S?g(h=e,c=n):f(u,d,e,n),u=Math.cos(w)*b+m,d=Math.sin(w)*x+v;for(var D=(M?-1:1)*Math.PI/2,C=I;M?C>w:C<w;C+=D)p(C,M?Math.max(C+D,w):Math.min(C+D,w),m,v,b,x);break;case Je.R:h=u=a[y++],c=d=a[y++],e=h+a[y++],n=c+a[y++],g(e,c),f(e,c,e,n),f(e,n,h,n),f(h,n,h,c),f(h,c,e,c);break;case Je.Z:t&&f(u,d,h,c),u=h,d=c}}return t&&t.length>2&&l.push(t),l}function fo(r,t,e,n,i,o,a,s,l,u){if(Ut(r,e)&&Ut(t,n)&&Ut(i,a)&&Ut(o,s))l.push(a,s);else{var d=2/u,h=d*d,c=a-r,g=s-t,f=Math.sqrt(c*c+g*g);c/=f,g/=f;var p=e-r,y=n-t,_=i-a,S=o-s,m=p*p+y*y,v=_*_+S*S;if(m<h&&v<h)l.push(a,s);else{var b=c*p+g*y,x=-c*_-g*S;if(m-b*b<h&&b>=0&&v-x*x<h&&x>=0)l.push(a,s);else{var I=[],w=[];Gn(r,e,i,a,.5,I),Gn(t,n,o,s,.5,w),fo(I[0],w[0],I[1],w[1],I[2],w[2],I[3],w[3],l,u),fo(I[4],w[4],I[5],w[5],I[6],w[6],I[7],w[7],l,u)}}}}function Jl(r,t,e){var n=r[t],i=r[1-t],o=Math.abs(n/i),a=Math.ceil(Math.sqrt(o*e)),s=Math.floor(e/a);s===0&&(s=1,a=e);for(var l=[],u=0;u<a;u++)l.push(s);var d=e-a*s;if(d>0)for(u=0;u<d;u++)l[u%a]+=1;return l}function eu(r,t,e){for(var n=r.r0,i=r.r,o=r.startAngle,a=r.endAngle,s=Math.abs(a-o),l=s*i,u=i-n,d=l>Math.abs(u),h=Jl([l,u],d?0:1,t),c=(d?s:u)/h.length,g=0;g<h.length;g++)for(var f=(d?u:s)/h[g],p=0;p<h[g];p++){var y={};d?(y.startAngle=o+c*g,y.endAngle=o+c*(g+1),y.r0=n+f*p,y.r=n+f*(p+1)):(y.startAngle=o+f*p,y.endAngle=o+f*(p+1),y.r0=n+c*g,y.r=n+c*(g+1)),y.clockwise=r.clockwise,y.cx=r.cx,y.cy=r.cy,e.push(y)}}function tu(r,t,e,n){return r*n-e*t}function Bg(r,t,e,n,i,o,a,s){var l=e-r,u=n-t,d=a-i,h=s-o,c=tu(d,h,l,u);if(Math.abs(c)<1e-6)return null;var g=tu(r-i,t-o,d,h)/c;return g<0||g>1?null:new ft(g*l+r,g*u+t)}function Gg(r,t,e){var n=new ft;ft.sub(n,e,t),n.normalize();var i=new ft;return ft.sub(i,r,t),i.dot(n)}function Yt(r,t){var e=r[r.length-1];e&&e[0]===t[0]&&e[1]===t[1]||r.push(t)}function nu(r){var t=r.points,e=[],n=[];In(t,e,n);var i=new Ze(e[0],e[1],n[0]-e[0],n[1]-e[1]),o=i.width,a=i.height,s=i.x,l=i.y,u=new ft,d=new ft;return o>a?(u.x=d.x=s+o/2,u.y=l,d.y=l+a):(u.y=d.y=l+a/2,u.x=s,d.x=s+o),function(h,c,g){for(var f=h.length,p=[],y=0;y<f;y++){var _=h[y],S=h[(y+1)%f],m=Bg(_[0],_[1],S[0],S[1],c.x,c.y,g.x,g.y);m&&p.push({projPt:Gg(m,c,g),pt:m,idx:y})}if(p.length<2)return[{points:h},{points:h}];p.sort(function(C,L){return C.projPt-L.projPt});var v=p[0],b=p[p.length-1];if(b.idx<v.idx){var x=v;v=b,b=x}var I=[v.pt.x,v.pt.y],w=[b.pt.x,b.pt.y],M=[I],D=[w];for(y=v.idx+1;y<=b.idx;y++)Yt(M,h[y].slice());for(Yt(M,w),Yt(M,I),y=b.idx+1;y<=v.idx+f;y++)Yt(D,h[y%f].slice());return Yt(D,I),Yt(D,w),[{points:M},{points:D}]}(t,u,d)}function pr(r,t,e,n){if(e===1)n.push(t);else{var i=Math.floor(e/2),o=r(t);pr(r,o[0],i,n),pr(r,o[1],e-i,n)}return n}function Fg(r,t){var e,n=[],i=r.shape;switch(r.type){case"rect":(function(m,v,b){for(var x=m.width,I=m.height,w=x>I,M=Jl([x,I],w?0:1,v),D=w?"width":"height",C=w?"height":"width",L=w?"x":"y",T=w?"y":"x",A=m[D]/M.length,k=0;k<M.length;k++)for(var N=m[C]/M[k],V=0;V<M[k];V++){var P={};P[L]=k*A,P[T]=V*N,P[D]=A,P[C]=N,P.x+=m.x,P.y+=m.y,b.push(P)}})(i,t,n),e=it;break;case"sector":eu(i,t,n),e=Or;break;case"circle":eu({r0:0,r:i.r,startAngle:0,endAngle:2*Math.PI,cx:i.cx,cy:i.cy},t,n),e=Or;break;default:var o=r.getComputedTransform(),a=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,s=Q(function(m,v){var b=po(m),x=[];v=v||1;for(var I=0;I<b.length;I++){var w=b[I],M=[],D=w[0],C=w[1];M.push(D,C);for(var L=2;L<w.length;){var T=w[L++],A=w[L++],k=w[L++],N=w[L++],V=w[L++],P=w[L++];fo(D,C,T,A,k,N,V,P,M,v),D=V,C=P}x.push(M)}return x}(r.getUpdatedPathProxy(),a),function(m){return function(v){for(var b=[],x=0;x<v.length;)b.push([v[x++],v[x++]]);return b}(m)}),l=s.length;if(l===0)pr(nu,{points:s[0]},t,n);else if(l===t)for(var u=0;u<l;u++)n.push({points:s[u]});else{var d=0,h=Q(s,function(m){var v=[],b=[];In(m,v,b);var x=(b[1]-v[1])*(b[0]-v[0]);return d+=x,{poly:m,area:x}});h.sort(function(m,v){return v.area-m.area});var c=t;for(u=0;u<l;u++){var g=h[u];if(c<=0)break;var f=u===l-1?c:Math.ceil(g.area/d*t);f<0||(pr(nu,{points:g.poly},f,n),c-=f)}}e=jt}if(!e)return function(m,v){for(var b=[],x=0;x<v;x++)b.push(Hr(m));return b}(r,t);var p,y,_=[];for(u=0;u<n.length;u++){var S=new e;S.setShape(n[u]),p=r,(y=S).setStyle(p.style),y.z=p.z,y.z2=p.z2,y.zlevel=p.zlevel,_.push(S)}return _}function Wg(r,t){var e=r.length,n=t.length;if(e===n)return[r,t];for(var i=[],o=[],a=e<n?r:t,s=Math.min(e,n),l=Math.abs(n-e)/6,u=(s-2)/6,d=Math.ceil(l/u)+1,h=[a[0],a[1]],c=l,g=2;g<s;){var f=a[g-2],p=a[g-1],y=a[g++],_=a[g++],S=a[g++],m=a[g++],v=a[g++],b=a[g++];if(c<=0)h.push(y,_,S,m,v,b);else{for(var x=Math.min(c,d-1)+1,I=1;I<=x;I++){var w=I/x;Gn(f,y,S,v,w,i),Gn(p,_,m,b,w,o),f=i[3],p=o[3],h.push(i[1],o[1],i[2],o[2],f,p),y=i[5],_=o[5],S=i[6],m=o[6]}c-=x-1}}return a===r?[h,t]:[r,h]}function ru(r,t){for(var e=r.length,n=r[e-2],i=r[e-1],o=[],a=0;a<t.length;)o[a++]=n,o[a++]=i;return o}function iu(r){for(var t=0,e=0,n=0,i=r.length,o=0,a=i-2;o<i;a=o,o+=2){var s=r[a],l=r[a+1],u=r[o],d=r[o+1],h=s*d-u*l;t+=h,e+=(s+u)*h,n+=(l+d)*h}return t===0?[r[0]||0,r[1]||0]:[e/t/3,n/t/3,t]}function Hg(r,t,e,n){for(var i=(r.length-2)/6,o=1/0,a=0,s=r.length,l=s-2,u=0;u<i;u++){for(var d=6*u,h=0,c=0;c<s;c+=2){var g=c===0?d:(d+c-2)%l+2,f=r[g]-e[0],p=r[g+1]-e[1],y=t[c]-n[0]-f,_=t[c+1]-n[1]-p;h+=y*y+_*_}h<o&&(o=h,a=u)}return a}function Ug(r){for(var t=[],e=r.length,n=0;n<e;n+=2)t[n]=r[e-n-2],t[n+1]=r[e-n-1];return t}function fr(r){return r.__isCombineMorphing}var ou="__mOriginal_";function gr(r,t,e){var n=ou+t,i=r[n]||r[t];r[n]||(r[n]=r[t]);var o=e.replace,a=e.after,s=e.before;r[t]=function(){var l,u=arguments;return s&&s.apply(this,u),l=o?o.apply(this,u):i.apply(this,u),a&&a.apply(this,u),l}}function _n(r,t){var e=ou+t;r[e]&&(r[t]=r[e],r[e]=null)}function au(r,t){for(var e=0;e<r.length;e++)for(var n=r[e],i=0;i<n.length;){var o=n[i],a=n[i+1];n[i++]=t[0]*o+t[2]*a+t[4],n[i++]=t[1]*o+t[3]*a+t[5]}}function su(r,t){var e=r.getUpdatedPathProxy(),n=t.getUpdatedPathProxy(),i=function(h,c){for(var g,f,p,y=[],_=[],S=0;S<Math.max(h.length,c.length);S++){var m=h[S],v=c[S],b=void 0,x=void 0;m?v?(f=b=(g=Wg(m,v))[0],p=x=g[1]):(x=ru(p||m,m),b=m):(b=ru(f||v,v),x=v),y.push(b),_.push(x)}return[y,_]}(po(e),po(n)),o=i[0],a=i[1],s=r.getComputedTransform(),l=t.getComputedTransform();s&&au(o,s),l&&au(a,l),gr(t,"updateTransform",{replace:function(){this.transform=null}}),t.transform=null;var u=function(h,c,g,f){for(var p,y=[],_=0;_<h.length;_++){var S=h[_],m=c[_],v=iu(S),b=iu(m);p==null&&(p=v[2]<0!=b[2]<0);var x=[],I=[],w=0,M=1/0,D=[],C=S.length;p&&(S=Ug(S));for(var L=6*Hg(S,m,v,b),T=C-2,A=0;A<T;A+=2){var k=(L+A)%T+2;x[A+2]=S[k]-v[0],x[A+3]=S[k+1]-v[1]}x[0]=S[L]-v[0],x[1]=S[L+1]-v[1];for(var N=f/g,V=-f/2;V<=f/2;V+=N){var P=Math.sin(V),z=Math.cos(V),E=0;for(A=0;A<S.length;A+=2){var B=x[A],G=x[A+1],Z=m[A]-b[0],O=m[A+1]-b[1],F=Z*z-O*P,Y=Z*P+O*z;D[A]=F,D[A+1]=Y;var H=F-B,j=Y-G;E+=H*H+j*j}if(E<M){M=E,w=V;for(var q=0;q<D.length;q++)I[q]=D[q]}}y.push({from:x,to:I,fromCp:v,toCp:b,rotation:-w})}return y}(o,a,10,Math.PI),d=[];gr(t,"buildPath",{replace:function(h){for(var c=t.__morphT,g=1-c,f=[],p=0;p<u.length;p++){var y=u[p],_=y.from,S=y.to,m=y.rotation*c,v=y.fromCp,b=y.toCp,x=Math.sin(m),I=Math.cos(m);Lh(f,v,b,c);for(var w=0;w<_.length;w+=2){var M=_[w],D=_[w+1],C=M*g+(k=S[w])*c,L=D*g+(N=S[w+1])*c;d[w]=C*I-L*x+f[0],d[w+1]=C*x+L*I+f[1]}var T=d[0],A=d[1];for(h.moveTo(T,A),w=2;w<_.length;){var k=d[w++],N=d[w++],V=d[w++],P=d[w++],z=d[w++],E=d[w++];T===k&&A===N&&V===z&&P===E?h.lineTo(z,E):h.bezierCurveTo(k,N,V,P,z,E),T=z,A=E}}}})}function go(r,t,e){if(!r||!t)return t;var n=e.done,i=e.during;return su(r,t),t.__morphT=0,t.animateTo({__morphT:1},Se({during:function(o){t.dirtyShape(),i&&i(o)},done:function(){_n(t,"buildPath"),_n(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape(),n&&n()}},e)),t}function Yg(r,t,e,n,i,o){r=i===e?0:Math.round(32767*(r-e)/(i-e)),t=o===n?0:Math.round(32767*(t-n)/(o-n));for(var a,s=0,l=32768;l>0;l/=2){var u=0,d=0;(r&l)>0&&(u=1),(t&l)>0&&(d=1),s+=l*l*(3*u^d),d===0&&(u===1&&(r=l-1-r,t=l-1-t),a=r,r=t,t=a)}return s}function yr(r){var t=1/0,e=1/0,n=-1/0,i=-1/0,o=Q(r,function(a){var s=a.getBoundingRect(),l=a.getComputedTransform(),u=s.x+s.width/2+(l?l[4]:0),d=s.y+s.height/2+(l?l[5]:0);return t=Math.min(u,t),e=Math.min(d,e),n=Math.max(u,n),i=Math.max(d,i),[u,d]});return Q(o,function(a,s){return{cp:a,z:Yg(a[0],a[1],t,e,n,i),path:r[s]}}).sort(function(a,s){return a.z-s.z}).map(function(a){return a.path})}function lu(r){return Fg(r.path,r.count)}function uu(r){return $(r[0])}function du(r,t){for(var e=[],n=r.length,i=0;i<n;i++)e.push({one:r[i],many:[]});for(i=0;i<t.length;i++){var o=t[i].length,a=void 0;for(a=0;a<o;a++)e[a%n].many.push(t[i][a])}var s=0;for(i=n-1;i>=0;i--)if(!e[i].many.length){var l=e[s].many;if(l.length<=1){if(!s)return e;s=0}o=l.length;var u=Math.ceil(o/2);e[i].many=l.slice(u,o),e[s].many=l.slice(0,u),s++}return e}var Xg={clone:function(r){for(var t=[],e=1-Math.pow(1-r.path.style.opacity,1/r.count),n=0;n<r.count;n++){var i=Hr(r.path);i.setStyle("opacity",e),t.push(i)}return t},split:null};function yo(r,t,e,n,i,o){if(r.length&&t.length){var a=nn("update",n,i);if(a&&a.duration>0){var s,l,u=n.getModel("universalTransition").get("delay"),d=Object.assign({setToFinal:!0},a);uu(r)&&(s=r,l=t),uu(t)&&(s=t,l=r);for(var h=s?s===r:r.length>t.length,c=s?du(l,s):du(h?t:r,[h?r:t]),g=0,f=0;f<c.length;f++)g+=c[f].many.length;var p=0;for(f=0;f<c.length;f++)y(c[f],h,p,g),p+=c[f].many.length}}function y(_,S,m,v,b){var x=_.many,I=_.one;if(x.length!==1||b)for(var w=Se({dividePath:Xg[e],individualDelay:u&&function(V,P,z,E){return u(V+m,v)}},d),M=S?function(V,P,z){var E=[];(function ae(ie){for(var fe=0;fe<ie.length;fe++){var We=ie[fe];fr(We)?ae(We.childrenRef()):We instanceof be&&E.push(We)}})(V);var B=E.length;if(!B)return{fromIndividuals:[],toIndividuals:[],count:0};var G=(z.dividePath||lu)({path:P,count:B});if(G.length!==B)return{fromIndividuals:[],toIndividuals:[],count:0};E=yr(E),G=yr(G);for(var Z=z.done,O=z.during,F=z.individualDelay,Y=new Dh,H=0;H<B;H++){var j=E[H],q=G[H];q.parent=P,q.copyTransform(Y),F||su(j,q)}function X(ae){for(var ie=0;ie<G.length;ie++)G[ie].addSelfToZr(ae)}function K(){P.__isCombineMorphing=!1,P.__morphT=-1,P.childrenRef=null,_n(P,"addSelfToZr"),_n(P,"removeSelfFromZr")}P.__isCombineMorphing=!0,P.childrenRef=function(){return G},gr(P,"addSelfToZr",{after:function(ae){X(ae)}}),gr(P,"removeSelfFromZr",{after:function(ae){for(var ie=0;ie<G.length;ie++)G[ie].removeSelfFromZr(ae)}});var re=G.length;if(F){var Ie=re,Fe=function(){--Ie==0&&(K(),Z&&Z())};for(H=0;H<re;H++){var Pe=F?Se({delay:(z.delay||0)+F(H,re,E[H],G[H]),done:Fe},z):z;go(E[H],G[H],Pe)}}else P.__morphT=0,P.animateTo({__morphT:1},Se({during:function(ae){for(var ie=0;ie<re;ie++){var fe=G[ie];fe.__morphT=P.__morphT,fe.dirtyShape()}O&&O(ae)},done:function(){K();for(var ae=0;ae<V.length;ae++)_n(V[ae],"updateTransform");Z&&Z()}},z));return P.__zr&&X(P.__zr),{fromIndividuals:E,toIndividuals:G,count:re}}(x,I,w):function(V,P,z){var E=P.length,B=[],G=z.dividePath||lu;if(fr(V)){(function q(X){for(var K=0;K<X.length;K++){var re=X[K];fr(re)?q(re.childrenRef()):re instanceof be&&B.push(re)}})(V.childrenRef());var Z=B.length;if(Z<E)for(var O=0,F=Z;F<E;F++)B.push(Hr(B[O++%Z]));B.length=E}else{B=G({path:V,count:E});var Y=V.getComputedTransform();for(F=0;F<B.length;F++)B[F].setLocalTransform(Y);if(B.length!==E)return{fromIndividuals:[],toIndividuals:[],count:0}}B=yr(B),P=yr(P);var H=z.individualDelay;for(F=0;F<E;F++){var j=H?Se({delay:(z.delay||0)+H(F,E,B[F],P[F])},z):z;go(B[F],P[F],j)}return{fromIndividuals:B,toIndividuals:P,count:P.length}}(I,x,w),D=M.fromIndividuals,C=M.toIndividuals,L=D.length,T=0;T<L;T++)A=u?Se({delay:u(T,L)},d):d,o(D[T],C[T],S?x[T]:_.one,S?_.one:x[T],A);else{var A,k=S?x[0]:I,N=S?I:x[0];fr(k)?y({many:[k],one:N},!0,m,v,!0):(go(k,N,A=u?Se({delay:u(m,v)},d):d),o(k,N,k,N,A))}}}function Tt(r){if(!r)return[];if($(r)){for(var t=[],e=0;e<r.length;e++)t.push(Tt(r[e]));return t}var n=[];return r.traverse(function(i){i instanceof be&&!i.disableMorphing&&!i.invisible&&!i.ignore&&n.push(i)}),n}var hu=1e4,Zg=0,cu=1,pu=2,jg=Ve();function fu(r,t,e,n){var i=function(l,u){for(var d=l.dimensions,h=0;h<d.length;h++){var c=l.getDimensionInfo(d[h]);if(c&&c.otherDims[u]===0)return d[h]}}(r,n?"itemChildGroupId":"itemGroupId");if(i){var o=function(l,u,d){var h=l.getDimensionInfo(d),c=h&&h.ordinalMeta;if(h){var g=l.get(h.name,u);return c&&c.categories[g]||g+""}}(r,t,i);return o}var a=r.getRawDataItem(t),s=n?"childGroupId":"groupId";return a&&a[s]?a[s]+"":n?void 0:e||r.getId(t)}function gu(r){var t=[];return R(r,function(e){var n=e.data,i=e.dataGroupId;if(!(n.count()>hu))for(var o=n.getIndices(),a=0;a<o.length;a++)t.push({data:n,groupId:fu(n,a,i,!1),childGroupId:fu(n,a,i,!0),divide:e.divide,dataIndex:a})}),t}function vo(r,t,e){r.traverse(function(n){n instanceof be&&pt(n,{style:{opacity:0}},t,{dataIndex:e,isFrom:!0})})}function mo(r){if(r.parent){var t=r.getComputedTransform();r.setLocalTransform(t),r.parent.remove(r)}}function Xt(r){r.stopAnimation(),r.isGroup&&r.traverse(function(t){t.stopAnimation()})}function yu(r,t,e){var n=gu(r),i=gu(t);function o(m,v,b,x,I){(b||m)&&v.animateFrom({style:b&&b!==m?J(J({},b.style),m.style):m.style},I)}var a=!1,s=Zg,l=De(),u=De();n.forEach(function(m){m.groupId&&l.set(m.groupId,!0),m.childGroupId&&u.set(m.childGroupId,!0)});for(var d=0;d<i.length;d++){var h=i[d].groupId;if(u.get(h)){s=cu;break}var c=i[d].childGroupId;if(c&&l.get(c)){s=pu;break}}function g(m,v){return function(b){var x=b.data,I=b.dataIndex;return v?x.getId(I):m?s===cu?b.childGroupId:b.groupId:s===pu?b.childGroupId:b.groupId}}var f=function(m,v){var b=m.length;if(b!==v.length)return!1;for(var x=0;x<b;x++){var I=m[x],w=v[x];if(I.data.getId(I.dataIndex)!==w.data.getId(w.dataIndex))return!1}return!0}(n,i),p={};if(!f)for(d=0;d<i.length;d++){var y=i[d],_=y.data.getItemGraphicEl(y.dataIndex);_&&(p[_.id]=!0)}function S(m,v){var b=n[v],x=i[m],I=x.data.hostModel,w=b.data.getItemGraphicEl(b.dataIndex),M=x.data.getItemGraphicEl(x.dataIndex);w!==M?w&&p[w.id]||M&&(Xt(M),w?(Xt(w),mo(w),a=!0,yo(Tt(w),Tt(M),x.divide,I,m,o)):vo(M,I,m)):M&&function(D,C,L){var T=nn("update",L,C);T&&D.traverse(function(A){if(A instanceof qt){var k=Ch(A);k&&A.animateFrom({style:k},T)}})}(M,x.dataIndex,I)}new kt(n,i,g(!0,f),g(!1,f),null,"multiple").update(S).updateManyToOne(function(m,v){var b=i[m],x=b.data,I=x.hostModel,w=x.getItemGraphicEl(b.dataIndex),M=Xe(Q(v,function(D){return n[D].data.getItemGraphicEl(n[D].dataIndex)}),function(D){return D&&D!==w&&!p[D.id]});w&&(Xt(w),M.length?(R(M,function(D){Xt(D),mo(D)}),a=!0,yo(Tt(M),Tt(w),b.divide,I,m,o)):vo(w,I,b.dataIndex))}).updateOneToMany(function(m,v){var b=n[v],x=b.data.getItemGraphicEl(b.dataIndex);if(!x||!p[x.id]){var I=Xe(Q(m,function(M){return i[M].data.getItemGraphicEl(i[M].dataIndex)}),function(M){return M&&M!==x}),w=i[m[0]].data.hostModel;I.length&&(R(I,function(M){return Xt(M)}),x?(Xt(x),mo(x),a=!0,yo(Tt(x),Tt(I),b.divide,w,m[0],o)):R(I,function(M){return vo(M,w,m[0])}))}}).updateManyToMany(function(m,v){new kt(v,m,function(b){return n[b].data.getId(n[b].dataIndex)},function(b){return i[b].data.getId(i[b].dataIndex)}).update(function(b,x){S(m[b],v[x])}).execute()}).execute(),a&&R(t,function(m){var v=m.data.hostModel,b=v&&e.getViewOfSeriesModel(v),x=nn("update",v,0);b&&v.isAnimationEnabled()&&x&&x.duration>0&&b.group.traverse(function(I){I instanceof be&&!I.animators.length&&I.animateFrom({style:{opacity:0}},x)})})}function vu(r){var t=r.getModel("universalTransition").get("seriesKey");return t||r.id}function mu(r){return $(r)?r.sort().join(","):r}function _t(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function xu(r,t){for(var e=0;e<r.length;e++)if(t.seriesIndex!=null&&t.seriesIndex===r[e].seriesIndex||t.seriesId!=null&&t.seriesId===r[e].id)return e}te([Th]),te([function(r){r.registerPainter("svg",Og)}]),te([Ah,Nh,Ph,function(r){te(Su),r.registerSeriesModel(Jh),r.registerChartView(rc),r.registerLayout(bn("scatter"))},kh,Vh,function(r){r.registerChartView(hc),r.registerSeriesModel(mc),r.registerLayout(xc),r.registerVisual(_c),function(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var o=e.dataIndex,a=i.getData().tree.getNodeByDataIndex(o);a.isExpand=!a.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,n,i){n.eachComponent({mainType:"series",subType:"tree",query:e},function(o){var a=o.coordinateSystem,s=Co(a,e,void 0,i);o.setCenter&&o.setCenter(s.center),o.setZoom&&o.setZoom(s.zoom)})})}(r)},function(r){r.registerSeriesModel(bc),r.registerChartView(Tc),r.registerVisual(Ac),r.registerLayout(Vc),function(t){for(var e=0;e<_a.length;e++)t.registerAction({type:_a[e],update:"updateView"},Pt);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,i){i.eachComponent({mainType:"series",subType:"treemap",query:n},function(o,a){var s=ln(n,["treemapZoomToNode","treemapRootToNode"],o);if(s){var l=o.getViewRoot();l&&(n.direction=Kr(l,s.node)?"rollUp":"drillDown"),o.resetViewRoot(s.node)}})})}(r)},function(r){r.registerChartView(Zc),r.registerSeriesModel(qc),r.registerProcessor(zc),r.registerVisual(Rc),r.registerVisual(Oc),r.registerLayout(Fc),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,Hc),r.registerLayout(Uc),r.registerCoordinateSystem("graphView",{dimensions:xr.dimensions,create:Yc}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Pt),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Pt),r.registerAction(Kc,function(t,e,n){e.eachComponent({mainType:"series",query:t},function(i){var o=i.coordinateSystem,a=Co(o,t,void 0,n);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})},Eh,function(r){r.registerChartView(Jc),r.registerSeriesModel(ep),r.registerLayout(tp),r.registerProcessor(Nr("funnel"))},function(r){te(Fo),r.registerChartView(np),r.registerSeriesModel(rp),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,ap)},function(r){r.registerChartView(up),r.registerSeriesModel(dp),r.registerLayout(hp),r.registerVisual(mp),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(n){n.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},function(r){r.registerSeriesModel(as),r.registerChartView(xp),r.registerLayout(Ip),r.registerTransform(wp)},function(r){r.registerChartView(Dp),r.registerSeriesModel(hs),r.registerPreprocessor(Np),r.registerVisual(Rp),r.registerLayout(Op)},function(r){r.registerChartView(Gp),r.registerSeriesModel(Fp),r.registerLayout(bn("effectScatter"))},function(r){r.registerChartView(Xp),r.registerSeriesModel(qp),r.registerLayout(ys),r.registerVisual(Kp)},function(r){r.registerChartView($p),r.registerSeriesModel(Jp)},zh,function(r){r.registerChartView(ef),r.registerSeriesModel(tf),r.registerLayout(nf),r.registerProcessor(Nr("themeRiver"))},function(r){r.registerChartView(of),r.registerSeriesModel(af),r.registerLayout(pe(sf,"sunburst")),r.registerProcessor(pe(Nr,"sunburst")),r.registerVisual(lf),function(t){t.registerAction({type:Mi,update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"sunburst",query:e},function(i,o){var a=ln(e,[Mi],i);if(a){var s=i.getViewRoot();s&&(e.direction=Kr(s,a.node)?"rollUp":"drillDown"),i.resetViewRoot(a.node)}})}),t.registerAction({type:bs,update:"none"},function(e,n,i){e=J({},e),n.eachComponent({mainType:"series",subType:"sunburst",query:e},function(o){var a=ln(e,[bs],o);a&&(e.dataIndex=a.node.dataIndex)}),i.dispatchAction(J(e,{type:"highlight"}))}),t.registerAction({type:rf,update:"updateView"},function(e,n,i){e=J({},e),i.dispatchAction(J(e,{type:"downplay"}))})}(r)},function(r){r.registerChartView(Sf),r.registerSeriesModel(df)}]),te(Rh),te(Oh),te(Bh),te(function(r){te(ta),Jo.registerAxisPointerClass("SingleAxisPointer",Ef),r.registerComponentView(Rf),r.registerComponentView(Tf),r.registerComponentModel(Jn),_d(r,"single",Jn,Jn.defaultOption),r.registerCoordinateSystem("single",kf)}),te(Fo),te(function(r){r.registerComponentModel(Of),r.registerComponentView(Bf),r.registerCoordinateSystem("calendar",Gf)}),te(function(r){r.registerComponentModel(Wf),r.registerComponentView(Hf),r.registerPreprocessor(function(t){var e=t.graphic;$(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}),te(Gh),te(Fh),te(ta),te(function(r){r.registerComponentView(qf),r.registerComponentModel(Kf),r.registerPreprocessor(Yf),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,Xf),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(n){n.setAreas(t.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Pt),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Pt),zd("brush",$f)}),te(Wh),te(function(r){r.registerComponentModel(ul),r.registerComponentView(tg),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),function(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,n,i){var o=n.getComponent("timeline");return o&&e.currentIndex!=null&&(o.setCurrentIndex(e.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),n.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),Se({currentIndex:o.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,n){var i=n.getComponent("timeline");i&&e.playState!=null&&i.setPlayState(e.playState)})}(r),r.registerPreprocessor(ng)}),te(function(r){r.registerComponentModel(rg),r.registerComponentView(ig),r.registerPreprocessor(function(t){Yi(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}),te(function(r){r.registerComponentModel(og),r.registerComponentView(lg),r.registerPreprocessor(function(t){Yi(t.series,"markLine")&&(t.markLine=t.markLine||{})})}),te(function(r){r.registerComponentModel(ug),r.registerComponentView(cg),r.registerPreprocessor(function(t){Yi(t.series,"markArea")&&(t.markArea=t.markArea||{})})}),te(Hh),te(Kh),te(Qh),te($h),te(Uh),te(Yh),te(Xh),te(Zh),te(function(r){r.registerTransform(_g),r.registerTransform(bg)}),te(jh),te(function(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,e,n){R(Re(n.seriesTransition),function(i){R(Re(i.to),function(o){for(var a=n.updatedSeries,s=0;s<a.length;s++)(o.seriesIndex!=null&&o.seriesIndex===a[s].seriesIndex||o.seriesId!=null&&o.seriesId===a[s].id)&&(a[s][Ur]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(t,e,n){var i=jg(e);if(i.oldSeries&&n.updatedSeries&&n.optionChanged){var o=n.seriesTransition;if(o)R(Re(o),function(g){(function(f,p,y,_){var S=[],m=[];R(Re(f.from),function(v){var b=xu(p.oldSeries,v);b>=0&&S.push({dataGroupId:p.oldDataGroupIds[b],data:p.oldData[b],divide:_t(p.oldData[b]),groupIdDim:v.dimension})}),R(Re(f.to),function(v){var b=xu(y.updatedSeries,v);if(b>=0){var x=y.updatedSeries[b].getData();m.push({dataGroupId:p.oldDataGroupIds[b],data:x,divide:_t(x),groupIdDim:v.dimension})}}),S.length>0&&m.length>0&&yu(S,m,_)})(g,i,n,e)});else{var a=function(g,f){var p=De(),y=De(),_=De();return R(g.oldSeries,function(S,m){var v=g.oldDataGroupIds[m],b=g.oldData[m],x=vu(S),I=mu(x);y.set(I,{dataGroupId:v,data:b}),$(x)&&R(x,function(w){_.set(w,{key:I,dataGroupId:v,data:b})})}),R(f.updatedSeries,function(S){if(S.isUniversalTransitionEnabled()&&S.isAnimationEnabled()){var m=S.get("dataGroupId"),v=S.getData(),b=vu(S),x=mu(b),I=y.get(x);if(I)p.set(x,{oldSeries:[{dataGroupId:I.dataGroupId,divide:_t(I.data),data:I.data}],newSeries:[{dataGroupId:m,divide:_t(v),data:v}]});else if($(b)){var w=[];R(b,function(C){var L=y.get(C);L.data&&w.push({dataGroupId:L.dataGroupId,divide:_t(L.data),data:L.data})}),w.length&&p.set(x,{oldSeries:w,newSeries:[{dataGroupId:m,data:v,divide:_t(v)}]})}else{var M=_.get(b);if(M){var D=p.get(M.key);D||(D={oldSeries:[{dataGroupId:M.dataGroupId,data:M.data,divide:_t(M.data)}],newSeries:[]},p.set(M.key,D)),D.newSeries.push({dataGroupId:m,data:v,divide:_t(v)})}}}}),p}(i,n);R(a.keys(),function(g){var f=a.get(g);yu(f.oldSeries,f.newSeries,e)})}R(n.updatedSeries,function(g){g[Ur]&&(g[Ur]=!1)})}for(var s=t.getSeries(),l=i.oldSeries=[],u=i.oldDataGroupIds=[],d=i.oldData=[],h=0;h<s.length;h++){var c=s[h].getData();c.count()<hu&&(l.push(s[h]),u.push(s[h].get("dataGroupId")),d.push(c))}})}),te(qh);
