import{d as O,u as Q,e as r,f as Z,aU as H,o as d,n as k,w as s,j as o,t as f,a as e,k as i,l as m,s as Y,c as z,F as $,p as aa,ax as ea,q as x,A as la,O as ta,Z as ia,_ as na,Q as oa,D as sa,G as pa,R as ra,J as da,K as ca}from"./index-mcOGIq4g.js";import{_ as ma}from"./CommonMenu-CxUjeIT-.js";import{E as ua}from"./el-empty-Bl_qCsZJ.js";import{_ as ga}from"./index.vue_vue_type_script_setup_true_lang-DcNux-x9.js";import{_ as ya}from"./dn-BqCJhieo.js";import{C as A}from"./index-JEsRnusb.js";import{C as fa}from"./index-uX09ldTR.js";import{_ as va}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-BHQCcaX3.js";import"./el-card-FPJq94NZ.js";import"./NavTree-CcS5UKLK.js";import"./index-BFNvSS9e.js";const v=_=>(da("data-v-e9d9fb39"),_=_(),ca(),_),ha={class:"navInfo"},ka={style:{"font-size":"14px","margin-top":"45px","margin-left":"20px"}},xa=v(()=>o("div",null,[o("span",null,"\u7528\u80FD\u6700\u5927\u673A\u67DC\uFF1A")],-1)),_a=v(()=>o("span",null,"\u6628\u65E5\uFF1A",-1)),ba=v(()=>o("span",null,"\u4E0A\u5468\uFF1A",-1)),Ea=v(()=>o("span",null,"\u4E0A\u6708\uFF1A",-1)),qa=v(()=>o("div",{class:"line"},null,-1)),za={style:{"margin-left":"-30px"}},wa={key:0,class:"matrixContainer"},Ca={class:"content"},Na={class:"info",style:{"margin-left":"-10px"}},Wa=v(()=>o("img",{class:"count_img",alt:"",src:ya},null,-1)),Sa={class:"room"},Ma=["onClick"],Fa=va(O({__name:"index",setup(_){const{push:P}=Q();r(),r(),r(),r(),r(),r();const N=r("\u65E0\u6570\u636E"),W=r("\u65E0\u6570\u636E"),S=r("\u65E0\u6570\u636E"),w=r(!1),M=r(!0),F=r([]),h=r([]),u=r(0),G=r([]),b=r(0),t=Z({timeGranularity:void 0,company:void 0,pageNo:1,pageSize:24,pageTotal:0}),E=r([24,36,48,96]),C=p=>{t.timeGranularity=p,c(!0)},c=async(p=!1)=>{w.value=!0,p&&(t.pageNo=1);try{const a=await fa.getEqPage({pageNo:t.pageNo,pageSize:t.pageSize,cabinetIds:M.value?null:G.value,runStatus:[],timeGranularity:t.timeGranularity,company:t.company});a.list&&(h.value=a.list.map(n=>{const g=n.roomName||"";return{roomName:g,cabinetName:n.cabinetName,roomId:n.roomId,id:n.id,local:g+"-"+n.cabinetName,company:n.company,yesterdayEq:n.yesterdayEq?n.yesterdayEq.toFixed(1):"0.0",lastWeekEq:n.lastWeekEq?n.lastWeekEq.toFixed(1):"0.0",lastMonthEq:n.lastMonthEq?n.lastMonthEq.toFixed(1):"0.0"}}),t.pageTotal=a.total)}finally{w.value=!1}},V=()=>{t.company=void 0,t.timeGranularity=void 0,c(!0)},I=p=>{u.value!=p&&(u.value=p,t.pageSize=p==0?24:15,c(!0))},D=p=>{M.value=!1;const a=[];p.forEach(n=>{n.type==3&&a.push(n.id)}),G.value=a,c(!0)},T=p=>{P({path:"/cabinet/cab/energyDetail",state:p})};return H(()=>{(async()=>{const p=await A.getRoomMenuAll({});F.value=p})(),c(),(async()=>{try{const p=await A.getEqMax();p&&p.forEach(a=>{a.type==0?N.value=a.location:a.type==1?W.value=a.location:a.type==2&&(S.value=a.location)})}finally{}})()}),(p,a)=>{const n=la,g=ta,L=ia,q=na,R=oa,U=ga,y=sa,X=pa,j=ua,B=ma,J=ra;return d(),k(B,{dataList:e(F),onCheck:D,navTitle:"\u673A\u67DC\u7528\u80FD"},{NavInfo:s(()=>[o("div",ha,[o("div",ka,[xa,o("div",null,[_a,o("span",null,f(e(N)),1)]),o("div",null,[ba,o("span",null,f(e(W)),1)]),o("div",null,[Ea,o("span",null,f(e(S)),1)])]),qa])]),ActionBar:s(()=>[i(R,{class:"-mb-15px",model:e(t),inline:!0,"label-width":"90px"},{default:s(()=>[o("div",za,[i(g,{label:"\u7528\u80FD\u6392\u5E8F","label-width":"100px"},{default:s(()=>[i(n,{onClick:a[0]||(a[0]=l=>C("yesterday"))},{default:s(()=>[m(" \u6628\u65E5 ")]),_:1}),i(n,{onClick:a[1]||(a[1]=l=>C("lastWeek"))},{default:s(()=>[m(" \u4E0A\u5468 ")]),_:1}),i(n,{onClick:a[2]||(a[2]=l=>C("lastMonth"))},{default:s(()=>[m(" \u4E0A\u6708 ")]),_:1})]),_:1}),i(g,{label:"\u516C\u53F8\u540D\u79F0",prop:"username",style:{"margin-left":"50px"}},{default:s(()=>[i(L,{modelValue:e(t).company,"onUpdate:modelValue":a[3]||(a[3]=l=>e(t).company=l),placeholder:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0",clearable:"",class:"!w-160px",height:"35"},null,8,["modelValue"])]),_:1}),i(g,null,{default:s(()=>[i(n,{style:{"margin-left":"12px"},onClick:a[4]||(a[4]=l=>c(!0))},{default:s(()=>[i(q,{icon:"ep:search"}),m("\u641C\u7D22")]),_:1}),i(n,{onClick:V,style:{width:"70px"}},{default:s(()=>[i(q,{icon:"ep:refresh",class:"mr-5px"}),m(" \u91CD\u7F6E")]),_:1})]),_:1})]),i(g,{style:{"margin-left":"auto"}},{default:s(()=>[i(n,{onClick:a[5]||(a[5]=l=>{E.value=[24,36,48,96],e(t).pageSize=24,I(0),b.value=0}),type:e(u)?"":"primary"},{default:s(()=>[i(q,{icon:"ep:grid",style:{"margin-right":"8px"}}),m("\u9635\u5217\u6A21\u5F0F")]),_:1},8,["type"]),i(n,{onClick:a[6]||(a[6]=l=>{E.value=[15,25,30,50,100],e(t).pageSize=15,I(1),b.value=1}),type:e(u)?"primary":""},{default:s(()=>[i(q,{icon:"ep:expand",style:{"margin-right":"8px"}}),m("\u8868\u683C\u6A21\u5F0F")]),_:1},8,["type"])]),_:1})]),_:1},8,["model"])]),Content:s(()=>[Y((d(),z("div",null,[e(u)==0&&e(h).length>0?(d(),z("div",wa,[(d(!0),z($,null,aa(e(h),l=>(d(),z("div",{class:"item",key:l.key},[o("div",Ca,[o("div",Na,[o("div",null,"\u6628\u65E5\uFF1A"+f(l.yesterdayEq)+"kW\xB7h",1),o("div",null,"\u4E0A\u5468\uFF1A"+f(l.lastWeekEq)+"kW\xB7h",1),o("div",null,"\u4E0A\u6708\uFF1A"+f(l.lastMonthEq)+"kW\xB7h",1)]),Wa]),o("div",Sa,f(l.local),1),o("button",{class:"detail",onClick:ea(K=>T(l),["prevent"])},"\u8BE6\u60C5",8,Ma)]))),128))])):x("",!0),e(b)==0?(d(),k(U,{key:1,total:e(t).pageTotal,"page-size-arr":e(E),page:e(t).pageNo,"onUpdate:page":a[7]||(a[7]=l=>e(t).pageNo=l),limit:e(t).pageSize,"onUpdate:limit":a[8]||(a[8]=l=>e(t).pageSize=l),onPagination:a[9]||(a[9]=l=>c(!1))},null,8,["total","page-size-arr","page","limit"])):x("",!0),e(u)==1?(d(),k(X,{key:2,style:{width:"100%"},data:e(h),class:"matrixContainer"},{default:s(()=>[i(y,{type:"index",width:"100",label:"\u5E8F\u53F7",align:"center"}),i(y,{label:"\u4F4D\u7F6E","min-width":"110",align:"center",prop:"local"}),i(y,{label:"\u516C\u53F8","min-width":"110",align:"center",prop:"company"}),i(y,{label:"\u6628\u65E5\u7528\u80FD(kW\xB7h)","min-width":"110",align:"center",prop:"yesterdayEq"}),i(y,{label:"\u4E0A\u5468\u7528\u80FD(kW\xB7h)","min-width":"110",align:"center",prop:"lastWeekEq"}),i(y,{label:"\u4E0A\u6708\u7528\u80FD(kW\xB7h)","min-width":"110",align:"center",prop:"lastMonthEq"}),i(y,{label:"\u64CD\u4F5C",align:"center"},{default:s(l=>[i(n,{link:"",type:"primary",onClick:K=>T(l.row),style:{"background-color":"#409EFF",color:"#fff",border:"none",width:"65px",height:"30px"}},{default:s(()=>[m(" \u8BBE\u5907\u8BE6\u60C5 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):x("",!0),e(b)==1?(d(),k(U,{key:3,total:e(t).pageTotal,"page-size-arr":e(E),page:e(t).pageNo,"onUpdate:page":a[10]||(a[10]=l=>e(t).pageNo=l),limit:e(t).pageSize,"onUpdate:limit":a[11]||(a[11]=l=>e(t).pageSize=l),onPagination:a[12]||(a[12]=l=>c(!1))},null,8,["total","page-size-arr","page","limit"])):x("",!0),e(h).length==0&&e(u)==0?(d(),k(j,{key:4,description:"\u6682\u65E0\u6570\u636E","image-size":300})):x("",!0)])),[[J,e(w)]])]),_:1},8,["dataList"])}}}),[["__scopeId","data-v-e9d9fb39"]]);export{Fa as default};
