import{r as u,x as P,f as D,dH as S,ce as T,ah as E}from"./index-mcOGIq4g.js";import{e as w,t as Y,f as H}from"./tree-Cts6wVCK.js";import{b as F,a as I,g as x}from"./dict-Cu4dALpk.js";import{_ as A}from"./DictTag.vue_vue_type_script_lang-BqAWFSW1.js";const M=async s=>await u.get({url:"/system/mail-account/page",params:s}),N=async s=>await u.get({url:"/system/mail-account/get?id="+s}),_=async s=>await u.post({url:"/system/mail-account/create",data:s}),j=async s=>await u.put({url:"/system/mail-account/update",data:s}),k=async s=>await u.delete({url:"/system/mail-account/delete?id="+s}),q=async()=>u.get({url:"/system/mail-account/simple-list"}),{t:g}=P(),z=s=>{const o=D({searchSchema:[],tableColumns:[],formSchema:[],detailSchema:[]}),t=B(s,o);o.searchSchema=t||[];const l=G(s);o.tableColumns=l||[];const a=J(s,o);o.formSchema=a;const i=K(s);return o.detailSchema=i,{allSchemas:o}},B=(s,o)=>{const t=[],l=[];w(s,a=>{var i,m,d,p;if(a!=null&&a.isSearch||(i=a.search)!=null&&i.show){let b=((m=a==null?void 0:a.search)==null?void 0:m.component)||"Input";const f=[];let h={};if(a.dictType){const n={label:"\u5168\u90E8",value:""};f.push(n),F(a.dictType).forEach(c=>{f.push(c)}),h={options:f},(d=a.search)!=null&&d.component||(b="Select")}const e=S({component:b,...a.search,field:a.field,label:((p=a.search)==null?void 0:p.label)||a.label},{componentProps:h});e.api&&l.push(async()=>{var c;const n=await e.api();if(n){const r=T(o.searchSchema,y=>y.field===e.field);r!==-1&&(o.searchSchema[r].componentProps.options=v(n,(c=e.componentProps.optionsAlias)==null?void 0:c.labelField))}}),delete e.show,t.push(e)}});for(const a of l)a();return t},G=s=>{const o=Y(s,{conversion:t=>{var l;if((t==null?void 0:t.isTable)!==!1&&((l=t==null?void 0:t.table)==null?void 0:l.show)!==!1)return!t.formatter&&t.dictType&&(t.formatter=(a,i,m)=>E(A,{type:t.dictType,value:m})),{...t.table,...t}}});return H(o,t=>(t.children===void 0&&delete t.children,!!t.field))},J=(s,o)=>{const t=[],l=[];w(s,a=>{var i,m,d,p,b;if((a==null?void 0:a.isForm)!==!1&&((i=a==null?void 0:a.form)==null?void 0:i.show)!==!1){let f=((m=a==null?void 0:a.form)==null?void 0:m.component)||"Input",h="";(d=a.form)!=null&&d.value?h=(p=a.form)==null?void 0:p.value:f==="InputNumber"&&(h=0);let e={};if(a.dictType){const c=[];a.dictClass&&a.dictClass==="number"?I(a.dictType).forEach(r=>{c.push(r)}):a.dictClass&&a.dictClass==="boolean"?x(a.dictType).forEach(r=>{c.push(r)}):F(a.dictType).forEach(r=>{c.push(r)}),e={options:c},a.form&&a.form.component||(f="Select")}const n=S({component:f,value:h,...a.form,field:a.field,label:((b=a.form)==null?void 0:b.label)||a.label},{componentProps:e});n.api&&l.push(async()=>{var r;const c=await n.api();if(c){const y=T(o.formSchema,C=>C.field===n.field);y!==-1&&(o.formSchema[y].componentProps.options=v(c,(r=n.componentProps.optionsAlias)==null?void 0:r.labelField))}}),delete n.show,t.push(n)}});for(const a of l)a();return t},K=s=>{const o=[];return w(s,t=>{var l,a,i,m,d;if((t==null?void 0:t.isDetail)!==!1&&((l=t.detail)==null?void 0:l.show)!==!1){const p={...t.detail,field:t.field,label:((a=t.detail)==null?void 0:a.label)||t.label};t.dictType&&(p.dictType=t.dictType),((i=t.detail)!=null&&i.dateFormat||t.formatter=="formatDate")&&(p.dateFormat=(m=t==null?void 0:t.detail)!=null&&m.dateFormat?(d=t==null?void 0:t.detail)==null?void 0:d.dateFormat:"YYYY-MM-DD HH:mm:ss"),delete p.show,o.push(p)}}),o},v=(s,o)=>s==null?void 0:s.map(t=>(o?t.labelField=g(t.labelField):t.label=g(t.label),t));export{j as a,M as b,_ as c,k as d,q as e,N as g,z as u};
