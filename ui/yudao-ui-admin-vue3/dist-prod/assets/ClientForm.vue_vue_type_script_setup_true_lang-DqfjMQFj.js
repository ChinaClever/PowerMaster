import{r as h,d as L,x as P,e as y,f as Y,o as r,n as i,w as d,k as t,a as l,l as S,s as j,c as p,F as c,p as m,t as J,m as Q,Z,O as K,az as W,aA as X,b9 as $,S as ee,N as le,Q as ae,A as oe,R as te}from"./index-mcOGIq4g.js";import{_ as de}from"./Dialog.vue_vue_type_style_index_0_lang-BHwm1lq5.js";import{_ as re}from"./UploadImg-Dlb4vCdw.js";import{a as se,D as A,b as ue}from"./dict-Cu4dALpk.js";import{C as q}from"./constants-D0aoFN3l.js";import{u as ie}from"./useMessage-CGTQbR_M.js";const ne=g=>h.get({url:"/system/oauth2-client/page",params:g}),pe=g=>h.delete({url:"/system/oauth2-client/delete?id="+g}),ce=L({name:"SystemOAuth2ClientForm",__name:"ClientForm",emits:["success"],setup(g,{expose:C,emit:G}){const{t:U}=P(),T=ie(),f=y(!1),k=y(""),V=y(!1),I=y(""),o=y({id:void 0,clientId:void 0,secret:void 0,name:void 0,logo:void 0,description:void 0,status:q.ENABLE,accessTokenValiditySeconds:1800,refreshTokenValiditySeconds:43200,redirectUris:[],authorizedGrantTypes:[],scopes:[],autoApproveScopes:[],authorities:[],resourceIds:[],additionalInformation:void 0}),z=Y({clientId:[{required:!0,message:"\u5BA2\u6237\u7AEF\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],secret:[{required:!0,message:"\u5BA2\u6237\u7AEF\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5E94\u7528\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],logo:[{required:!0,message:"\u5E94\u7528\u56FE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessTokenValiditySeconds:[{required:!0,message:"\u8BBF\u95EE\u4EE4\u724C\u7684\u6709\u6548\u671F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],refreshTokenValiditySeconds:[{required:!0,message:"\u5237\u65B0\u4EE4\u724C\u7684\u6709\u6548\u671F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],redirectUris:[{required:!0,message:"\u53EF\u91CD\u5B9A\u5411\u7684 URI \u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],authorizedGrantTypes:[{required:!0,message:"\u6388\u6743\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=y();C({open:async(u,a)=>{if(f.value=!0,k.value=U("action."+u),I.value=u,O(),a){V.value=!0;try{o.value=await(n=>h.get({url:"/system/oauth2-client/get?id="+n}))(a)}finally{V.value=!1}}}});const E=G,N=async()=>{if(_&&await _.value.validate()){V.value=!0;try{const u=o.value;I.value==="create"?(await(a=>h.post({url:"/system/oauth2-client/create",data:a}))(u),T.success(U("common.createSuccess"))):(await(a=>h.put({url:"/system/oauth2-client/update",data:a}))(u),T.success(U("common.updateSuccess"))),f.value=!1,E("success")}finally{V.value=!1}}},O=()=>{var u;o.value={id:void 0,clientId:void 0,secret:void 0,name:void 0,logo:void 0,description:void 0,status:q.ENABLE,accessTokenValiditySeconds:1800,refreshTokenValiditySeconds:43200,redirectUris:[],authorizedGrantTypes:[],scopes:[],autoApproveScopes:[],authorities:[],resourceIds:[],additionalInformation:void 0},(u=_.value)==null||u.resetFields()};return(u,a)=>{const n=Z,s=K,R=re,F=W,M=X,w=$,v=ee,b=le,B=ae,x=oe,D=de,H=te;return r(),i(D,{modelValue:l(f),"onUpdate:modelValue":a[16]||(a[16]=e=>Q(f)?f.value=e:null),title:l(k),"max-height":"500px",scroll:""},{footer:d(()=>[t(x,{disabled:l(V),type:"primary",onClick:N},{default:d(()=>[S("\u786E \u5B9A")]),_:1},8,["disabled"]),t(x,{onClick:a[15]||(a[15]=e=>f.value=!1)},{default:d(()=>[S("\u53D6 \u6D88")]),_:1})]),default:d(()=>[j((r(),i(B,{ref_key:"formRef",ref:_,model:l(o),rules:l(z),"label-width":"160px"},{default:d(()=>[t(s,{label:"\u5BA2\u6237\u7AEF\u7F16\u53F7",prop:"secret"},{default:d(()=>[t(n,{modelValue:l(o).clientId,"onUpdate:modelValue":a[0]||(a[0]=e=>l(o).clientId=e),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7AEF\u7F16\u53F7"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5BA2\u6237\u7AEF\u5BC6\u94A5",prop:"secret"},{default:d(()=>[t(n,{modelValue:l(o).secret,"onUpdate:modelValue":a[1]||(a[1]=e=>l(o).secret=e),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7AEF\u5BC6\u94A5"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5E94\u7528\u540D",prop:"name"},{default:d(()=>[t(n,{modelValue:l(o).name,"onUpdate:modelValue":a[2]||(a[2]=e=>l(o).name=e),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5E94\u7528\u56FE\u6807"},{default:d(()=>[t(R,{modelValue:l(o).logo,"onUpdate:modelValue":a[3]||(a[3]=e=>l(o).logo=e),limit:1},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5E94\u7528\u63CF\u8FF0"},{default:d(()=>[t(n,{modelValue:l(o).description,"onUpdate:modelValue":a[4]||(a[4]=e=>l(o).description=e),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D",type:"textarea"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u72B6\u6001",prop:"status"},{default:d(()=>[t(M,{modelValue:l(o).status,"onUpdate:modelValue":a[5]||(a[5]=e=>l(o).status=e)},{default:d(()=>[(r(!0),p(c,null,m(l(se)(l(A).COMMON_STATUS),e=>(r(),i(F,{key:e.value,label:e.value},{default:d(()=>[S(J(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u8BBF\u95EE\u4EE4\u724C\u7684\u6709\u6548\u671F",prop:"accessTokenValiditySeconds"},{default:d(()=>[t(w,{modelValue:l(o).accessTokenValiditySeconds,"onUpdate:modelValue":a[6]||(a[6]=e=>l(o).accessTokenValiditySeconds=e),placeholder:"\u5355\u4F4D\uFF1A\u79D2"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5237\u65B0\u4EE4\u724C\u7684\u6709\u6548\u671F",prop:"refreshTokenValiditySeconds"},{default:d(()=>[t(w,{modelValue:l(o).refreshTokenValiditySeconds,"onUpdate:modelValue":a[7]||(a[7]=e=>l(o).refreshTokenValiditySeconds=e),placeholder:"\u5355\u4F4D\uFF1A\u79D2"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u6388\u6743\u7C7B\u578B",prop:"authorizedGrantTypes"},{default:d(()=>[t(b,{modelValue:l(o).authorizedGrantTypes,"onUpdate:modelValue":a[8]||(a[8]=e=>l(o).authorizedGrantTypes=e),filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u7C7B\u578B",style:{width:"500px"}},{default:d(()=>[(r(!0),p(c,null,m(l(ue)(l(A).SYSTEM_OAUTH2_GRANT_TYPE),e=>(r(),i(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u6388\u6743\u8303\u56F4",prop:"scopes"},{default:d(()=>[t(b,{modelValue:l(o).scopes,"onUpdate:modelValue":a[9]||(a[9]=e=>l(o).scopes=e),filterable:"",multiple:"","allow-create":"",placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u8303\u56F4",style:{width:"500px"}},{default:d(()=>[(r(!0),p(c,null,m(l(o).scopes,e=>(r(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u81EA\u52A8\u6388\u6743\u8303\u56F4",prop:"autoApproveScopes"},{default:d(()=>[t(b,{modelValue:l(o).autoApproveScopes,"onUpdate:modelValue":a[10]||(a[10]=e=>l(o).autoApproveScopes=e),filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u8303\u56F4",style:{width:"500px"}},{default:d(()=>[(r(!0),p(c,null,m(l(o).scopes,e=>(r(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u53EF\u91CD\u5B9A\u5411\u7684 URI \u5730\u5740",prop:"redirectUris"},{default:d(()=>[t(b,{modelValue:l(o).redirectUris,"onUpdate:modelValue":a[11]||(a[11]=e=>l(o).redirectUris=e),"allow-create":"",filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u53EF\u91CD\u5B9A\u5411\u7684 URI \u5730\u5740",style:{width:"500px"}},{default:d(()=>[(r(!0),p(c,null,m(l(o).redirectUris,e=>(r(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u6743\u9650",prop:"authorities"},{default:d(()=>[t(b,{modelValue:l(o).authorities,"onUpdate:modelValue":a[12]||(a[12]=e=>l(o).authorities=e),"allow-create":"",filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u6743\u9650",style:{width:"500px"}},{default:d(()=>[(r(!0),p(c,null,m(l(o).authorities,e=>(r(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u8D44\u6E90",prop:"resourceIds"},{default:d(()=>[t(b,{modelValue:l(o).resourceIds,"onUpdate:modelValue":a[13]||(a[13]=e=>l(o).resourceIds=e),"allow-create":"",filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90",style:{width:"500px"}},{default:d(()=>[(r(!0),p(c,null,m(l(o).resourceIds,e=>(r(),i(v,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u9644\u52A0\u4FE1\u606F",prop:"additionalInformation"},{default:d(()=>[t(n,{modelValue:l(o).additionalInformation,"onUpdate:modelValue":a[14]||(a[14]=e=>l(o).additionalInformation=e),placeholder:"\u8BF7\u8F93\u5165\u9644\u52A0\u4FE1\u606F\uFF0CJSON \u683C\u5F0F\u6570\u636E",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[H,l(V)]])]),_:1},8,["modelValue","title"])}}});export{ce as _,pe as d,ne as g};
