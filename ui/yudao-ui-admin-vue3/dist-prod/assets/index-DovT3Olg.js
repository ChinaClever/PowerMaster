import{_ as ra}from"./CommonMenu-CxUjeIT-.js";import{d as ca,u as da,e as y,f as L,aU as pa,b2 as ua,dc as ma,o as p,n as w,w as n,j as e,t as r,a as t,l as i,k as s,a0 as Z,c as b,F as q,p as G,ax as K,q as V,s as J,I as M,A as va,O as ya,Z as ba,_ as ga,Q as fa,D as ka,G as wa,bX as ha,J as _a,K as xa}from"./index-mcOGIq4g.js";import{E as Ca}from"./el-empty-Bl_qCsZJ.js";import{_ as Sa}from"./index.vue_vue_type_script_setup_true_lang-DcNux-x9.js";import"./liquidFillView-CNGZjD8X.js";import{C as P}from"./index-JEsRnusb.js";import{_ as Aa}from"./LiquidBall.vue_vue_type_script_setup_true_lang-Cxn6zcGw.js";import{_ as Na}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-BHQCcaX3.js";import"./el-card-FPJq94NZ.js";import"./NavTree-CcS5UKLK.js";import"./index-BFNvSS9e.js";import"./Echart.vue_vue_type_script_setup_true_lang-NDPlWfCz.js";import"./installCanvasRenderer-WHaFMoQ9.js";const T=F=>(_a("data-v-1d7c4bed"),F=F(),xa(),F),Ta={class:"navInfo"},za={class:"status"},Va={class:"box"},Fa=T(()=>e("div",{class:"top"},[e("div",{class:"tag empty"}),i("\u7A7A\u8F7D ")],-1)),Ia={class:"value"},Ra={class:"number"},Ba={class:"box"},La=T(()=>e("div",{class:"top"},[e("div",{class:"tag"}),i("<30% ")],-1)),Wa={class:"value"},Ua={class:"number"},Za={class:"box"},qa=T(()=>e("div",{class:"top"},[e("div",{class:"tag normal"}),i("30%~60% ")],-1)),Ka={class:"value"},Pa={class:"number"},Ea={class:"box"},Da=T(()=>e("div",{class:"top",style:{"margin-left":"-10px"}},[e("div",{class:"tag warn"}),i("60%~90% ")],-1)),ja={class:"value"},Ga={class:"number"},Ja={class:"box"},Ma=T(()=>e("div",{class:"top"},[e("div",{class:"tag error"}),i(">90% ")],-1)),Oa={class:"value"},Qa={class:"number"},Xa={class:"box"},Ha=T(()=>e("div",{class:"top"},[e("div"),i("\u5168\u90E8 ")],-1)),Ya={class:"value"},$a={class:"number"},ae=["onClick"],ee=["onClick"],te={class:"loadContainer"},le={class:"content"},se={key:0,class:"info"},oe={key:1,class:"info"},ie={key:2,class:"info"},ne={class:"waterPoloBox"},re={class:"room"},ce={class:"status-container"},de={class:"detail-container"},pe=["onClick"],ue=ca({__name:"index",setup(F){const{push:O}=da(),W=y(!1),Q=y(!0),E=y([]),v=L({LoadRateZero:0,lessThirty:0,greaterThirty:0,greaterSixty:0,greaterNinety:0,total:0}),u=y(0),X=y([]),h=y([]),z=y([24,36,48,96]),c=L({company:void 0,cabinetIds:[],pageNo:1,pageSize:24,pageTotal:0,loadStatus:[]}),_=y(0),I=y(-1),x=y();function H(o,l,d){return d==null?0:parseFloat(d).toFixed(0)}function Y(o,l,d){return d==null?0:parseFloat(d).toFixed(1)}function k(o,l,d){return d==null?0:parseFloat(d).toFixed(3)}L({series:[{type:"liquidFill",data:[.38],label:{fontSize:12,fontWeight:"bold"},radius:"100%",amplitude:2,outline:{show:!1},color:["#3b8bf5"],backgroundStyle:{color:"#fff"}}]});const S=L([{name:"\u7A7A\u8F7D",selected:!0,value:0,cssClass:"btn_empty",activeClass:"btn_empty empty",color:"#aaa"},{name:"\u8D1F\u8F7D\u91CF<30%",selected:!0,value:1,cssClass:"btn_normal",activeClass:"btn_normal normal",color:"#3bbb00"},{name:"30%\u2264\u8D1F\u8F7D\u91CF<60%",selected:!0,value:2,cssClass:"btn_warn",activeClass:"btn_warn warn",color:"#ffc402"},{name:"60%\u2264\u8D1F\u8F7D\u91CF<90%",selected:!0,value:3,cssClass:"btn_error",activeClass:"btn_error error",color:"#fa3333"},{name:"\u8D1F\u8F7D\u91CF>90%",selected:!0,value:4,cssClass:"btn_unbound",activeClass:"btn_unbound unbound",color:"#05ebfc"}]),g=async(o=!1)=>{W.value=!0,o&&(c.pageNo=1);try{const l=await P.getIndexLoadPage(c);aa(),l?(h.value=l.list||[],c.pageTotal=l.total||0):(h.value=[],c.pageTotal=0)}catch{h.value=[],c.pageTotal=0}finally{W.value=!1}},$=()=>{_.value=0,I.value=-1,c.loadStatus=[],g()},f=(o,l)=>typeof o!="number"||isNaN(o)?0:o.toFixed(l),aa=async()=>{const o=await P.getLoadStatus({});v.LoadRateZero=o.LoadRateZero,v.greaterNinety=o.greaterNinety,v.lessThirty=o.lessThirty,v.greaterThirty=o.greaterThirty,v.greaterSixty=o.greaterSixty,v.total=o.total},ea=o=>{Q.value=!1;const l=[];o.forEach(d=>{d.type==3&&l.push(d.id)}),X.value=l,c.cabinetIds=l,g(!0)},D=o=>{_.value=1,I.value=o,c.loadStatus=[o],g()},R=o=>{u.value!=o&&(u.value=o,c.pageSize=o!=2?24:10,g(!0))},j=o=>{const l=o.roomId,d=o.id,A=o.cabinetName,U=o.roomName,C=o.pduBox;O({path:"/cabinet/cab/cabinetPowerLoadDetail",state:{roomName:U,roomId:l,cabinetName:A,cabinet:d,pduBox:C}})};return pa(()=>{(async()=>{const o=await P.getRoomMenuAll({});E.value=o})(),g(),x.value=setInterval(g,5e3)}),ua(()=>{x.value&&(clearInterval(x.value),x.value=null)}),ma(()=>{x.value&&(clearInterval(x.value),x.value=null)}),(o,l)=>{const d=va,A=ya,U=ba,C=ga,ta=fa,m=ka,la=wa,N=ha,sa=Sa,oa=Ca,ia=ra;return p(),w(ia,{onCheck:ea,showSearch:!0,dataList:t(E),navTitle:"\u673A\u67DC\u8D1F\u8377"},{NavInfo:n(()=>[e("div",Ta,[e("div",za,[e("div",Va,[Fa,e("div",Ia,[e("span",Ra,r(t(v).LoadRateZero),1),i("\u4E2A")])]),e("div",Ba,[La,e("div",Wa,[e("span",Ua,r(t(v).lessThirty),1),i("\u4E2A")])]),e("div",Za,[qa,e("div",Ka,[e("span",Pa,r(t(v).greaterThirty),1),i("\u4E2A")])]),e("div",Ea,[Da,e("div",ja,[e("span",Ga,r(t(v).greaterSixty),1),i("\u4E2A")])]),e("div",Ja,[Ma,e("div",Oa,[e("span",Qa,r(t(v).greaterNinety),1),i("\u4E2A")])]),e("div",Xa,[Ha,e("div",Ya,[e("span",$a,r(t(v).total),1),i("\u4E2A")])])])])]),ActionBar:n(()=>[s(ta,{class:"-mb-15px",model:t(c),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:n(()=>[s(A,null,{default:n(()=>[s(d,{class:Z({btnallSelected:t(_)===0,btnallNotSelected:t(_)===1}),type:"button",onClick:$},{default:n(()=>[i("\u5168\u90E8")]),_:1},8,["class"]),(p(!0),b(q,null,G(t(S),(a,B)=>(p(),b(q,{key:B},[t(_)===0?(p(),b("button",{key:0,class:Z([a.activeClass]),onClick:K(na=>D(a.value),["prevent"])},r(a.name),11,ae)):t(_)===1?(p(),b("button",{key:1,class:Z([t(I)===a.value?a.activeClass:a.cssClass]),onClick:K(na=>D(B),["prevent"])},r(a.name),11,ee)):V("",!0)],64))),128))]),_:1}),e("div",null,[s(A,{label:"\u516C\u53F8\u540D\u79F0",prop:"company"},{default:n(()=>[s(U,{modelValue:t(c).company,"onUpdate:modelValue":l[0]||(l[0]=a=>t(c).company=a),placeholder:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0",clearable:"",class:"!w-160px",height:"35"},null,8,["modelValue"])]),_:1}),s(A,null,{default:n(()=>[s(d,{style:{width:"60px"},onClick:l[1]||(l[1]=a=>g(!0))},{default:n(()=>[s(C,{icon:"ep:search"}),i("\u641C\u7D22")]),_:1}),s(d,{onClick:l[2]||(l[2]=a=>(c.company=void 0,_.value=0,I.value=-1,c.loadStatus=[],void g())),style:{width:"50px","margin-left":"-1px"}},{default:n(()=>[i("\u91CD\u7F6E")]),_:1})]),_:1})]),s(A,{style:{"margin-left":"auto"}},{default:n(()=>[s(d,{onClick:l[3]||(l[3]=a=>{z.value=[24,36,48,96],t(c).pageSize=24,R(0)}),type:t(u)==0?"primary":""},{default:n(()=>[s(C,{icon:"ep:grid",style:{"margin-right":"8px"}}),i("\u89C6\u5728\u529F\u7387")]),_:1},8,["type"]),s(d,{onClick:l[4]||(l[4]=a=>{z.value=[15,25,30,50,100],t(c).pageSize=15,R(1)}),type:t(u)==1?"primary":""},{default:n(()=>[s(C,{icon:"ep:grid",style:{"margin-right":"8px"}}),i("\u6709\u529F\u529F\u7387")]),_:1},8,["type"]),s(d,{onClick:l[5]||(l[5]=a=>{z.value=[15,25,30,50,100],t(c).pageSize=15,R(3)}),type:t(u)==3?"primary":""},{default:n(()=>[s(C,{icon:"ep:grid",style:{"margin-right":"8px"}}),i("\u65E0\u529F\u529F\u7387")]),_:1},8,["type"]),s(d,{onClick:l[6]||(l[6]=a=>{z.value=[15,25,30,50,100],t(c).pageSize=15,R(2)}),type:t(u)==2?"primary":""},{default:n(()=>[s(C,{icon:"ep:expand",style:{"margin-right":"8px"}}),i("\u8868\u683C\u6A21\u5F0F")]),_:1},8,["type"])]),_:1})]),_:1},8,["model"])]),Content:n(()=>[J(s(la,{style:{width:"100%"},data:t(h),class:"loadContainer"},{default:n(()=>[s(m,{label:"\u4F4D\u7F6E","min-width":"110",align:"center",prop:"roomName,cabinetName"},{default:n(a=>[i(r(a.row.roomName)+"-"+r(a.row.cabinetName),1)]),_:1}),s(m,{label:"\u8D1F\u8F7D\u7387","min-width":"80",align:"center",prop:"loadFactor",formatter:H}),s(m,{label:"\u7535\u529B\u5BB9\u91CF(kVA)","min-width":"100",align:"center",prop:"powerCapacity",formatter:Y}),s(m,{label:"\u603B\u89C6\u5728\u529F\u7387(kVA)","min-width":"110",align:"center",prop:"apparentTotal",formatter:k}),s(m,{label:"A\u8DEF\u89C6\u5728\u529F\u7387(kVA)","min-width":"120",align:"center",prop:"powApparentb",formatter:k}),s(m,{label:"B\u8DEF\u89C6\u5728\u529F\u7387(kVA)","min-width":"120",align:"center",prop:"powApparenta",formatter:k}),s(m,{label:"\u603B\u6709\u529F\u529F\u7387(kW)","min-width":"110",align:"center",prop:"activeTotal",formatter:k}),s(m,{label:"A\u8DEF\u6709\u529F\u529F\u7387(kW)","min-width":"120",align:"center",prop:"powActivea",formatter:k}),s(m,{label:"B\u8DEF\u6709\u529F\u529F\u7387(kW)","min-width":"120",align:"center",prop:"powActiveb",formatter:k}),s(m,{label:"A\u8DEF\u65E0\u529F\u529F\u7387(kVar)","min-width":"120",align:"center",prop:"powReactivea",formatter:k}),s(m,{label:"B\u8DEF\u65E0\u529F\u529F\u7387(kVar)","min-width":"120",align:"center",prop:"powReactiveb",formatter:k}),s(m,{label:"\u66F4\u65B0\u65F6\u95F4","min-width":"110",align:"center",prop:"dataUpdateTime"}),s(m,{label:"\u64CD\u4F5C","min-width":"90",align:"center"},{default:n(a=>[s(d,{link:"",type:"primary",onClick:B=>j(a.row),style:{"background-color":"#409EFF",color:"#fff",border:"none",width:"65px",height:"30px"}},{default:n(()=>[i(" \u8BBE\u5907\u8BE6\u60C5 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),[[M,t(u)==2]]),J(e("div",te,[(p(!0),b(q,null,G(t(h),a=>(p(),b("div",{class:"loadItem",key:a.key},[e("div",le,[t(u)==0?(p(),b("div",se,[e("div",null,"\u603B\u89C6\u5728\u529F\u7387\uFF1A"+r(f(a.apparentTotal,3)||"0.000")+"KVA",1),e("div",null,"A\u8DEF\u89C6\u5728\u529F\u7387\uFF1A"+r(f(a.powApparenta,3)||"0.000")+"KVA",1),e("div",null,"B\u8DEF\u89C6\u5728\u529F\u7387\uFF1A"+r(f(a.powApparentb,3)||"0.000")+"KVA",1)])):t(u)==1?(p(),b("div",oe,[e("div",null,"\u603B\u6709\u529F\u529F\u7387\uFF1A"+r(f(a.activeTotal,3)||"0.000")+"kW",1),e("div",null,"A\u8DEF\u6709\u529F\u529F\u7387\uFF1A"+r(f(a.powActivea,3)||"0.000")+"kW",1),e("div",null,"B\u8DEF\u6709\u529F\u529F\u7387\uFF1A"+r(f(a.powActiveb,3)||"0.000")+"kW",1)])):t(u)==3?(p(),b("div",ie,[e("div",null,"\u603B\u65E0\u529F\u529F\u7387\uFF1A"+r(f(a.powReactiveTotal,3)||"0.000")+"kVar",1),e("div",null,"A\u8DEF\u65E0\u529F\u529F\u7387\uFF1A"+r(f(a.powReactivea,3)||"0.000")+"kVar",1),e("div",null,"B\u8DEF\u65E0\u529F\u529F\u7387\uFF1A"+r(f(a.powReactiveb,3)||"0.000")+"kVar",1)])):V("",!0),e("div",ne,[s(Aa,{precent:a.loadFactor||0},null,8,["precent"])])]),e("div",re,r(a.roomName+"-"+a.cabinetName),1),e("div",ce,[a.loadStatus==0?(p(),w(N,{key:0,class:"status",type:"info"},{default:n(()=>[i(r(t(S)[0].name),1)]),_:1})):a.loadStatus==1?(p(),w(N,{key:1,class:"status",type:"success"},{default:n(()=>[i(r(t(S)[1].name.slice(3,10)),1)]),_:1})):a.loadStatus==2?(p(),w(N,{key:2,class:"status",type:"primary"},{default:n(()=>[i(r(t(S)[2].name.slice(7,11)),1)]),_:1})):a.loadStatus==3?(p(),w(N,{key:3,class:"status",type:"warning"},{default:n(()=>[i(r(t(S)[3].name.slice(7,11)),1)]),_:1})):a.loadStatus==4?(p(),w(N,{key:4,class:"status",type:"danger"},{default:n(()=>[i(r(t(S)[4].name.slice(3,10)),1)]),_:1})):a.loadStatus==5?(p(),w(N,{key:5,class:"status",type:"info"},{default:n(()=>[i("\u79BB\u7EBF")]),_:1})):V("",!0)]),e("div",de,[a.loadStatus!==5&&a.loadStatus!==null?(p(),b("button",{key:0,class:"detail",onClick:K(B=>j(a),["prevent"])},"\u8BE6\u60C5",8,pe)):V("",!0)])]))),128))],512),[[M,(t(u)==0||t(u)==1||t(u)==3)&&t(h).length>0]]),s(sa,{total:t(c).pageTotal,page:t(c).pageNo,"onUpdate:page":l[7]||(l[7]=a=>t(c).pageNo=a),limit:t(c).pageSize,"onUpdate:limit":l[8]||(l[8]=a=>t(c).pageSize=a),"page-size-arr":t(z),onPagination:l[9]||(l[9]=a=>g(!1))},null,8,["total","page","limit","page-size-arr"]),t(h).length!=0||t(u)==2||t(W)?V("",!0):(p(),w(oa,{key:0,description:"\u6682\u65E0\u6570\u636E","image-size":300}))]),_:1},8,["dataList"])}}}),me=Na(ue,[["__scopeId","data-v-1d7c4bed"]]);export{me as default};
