import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-BHwm1lq5.js";import{d as S,f as N,e as b,g as T,h as U,i as q,o as i,c as m,k as n,w as l,j as F,l as c,a as t,n as C,q as u,ax as L,F as O,p as W,a0 as Z,t as aa,v as ea,m as ta,bX as sa,A as la,_ as na,D as ia,G as da,b9 as ua,O as oa,Q as ma}from"./index-mcOGIq4g.js";import{E as ra}from"./el-card-FPJq94NZ.js";import{d as ca}from"./vuedraggable.umd-DnsY9z5D.js";import{_ as pa}from"./layoutForm.vue_vue_type_script_setup_true_lang-CJ6Uq1U4.js";import{_ as va}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./useMessage-CGTQbR_M.js";const fa={class:"toolbar"},ga=va(S({__name:"MachineLayout",setup(ha){const k=N({row:10,col:10}),f=b(!1),r=b(!1),w=b(),R={name:"MachineFill",pull:!0,put:!1},A={name:"MachineBlank",pull:!1,put:!0},s=b({left:"0px",top:"0px",show:!1,lndexX:0,lndexY:0}),I=()=>{f.value=!0},Q=e=>{e.preventDefault();const a=e.currentTarget.getBoundingClientRect(),h=e.clientX-Math.ceil(a.left)+1,o=e.clientY-Math.ceil(a.top)+1,y=e.target.id?e.target.id:e.target.parentNode.id,_=y.split("-")[1],x=y.split("-")[0];y&&(s.value={left:h+"px",top:o+"px",show:!0,lndexX:_,lndexY:x})},M=T(()=>{const e=s.value.lndexX,a=s.value.lndexY;return!(p[a][g[e]].length>0)}),H=()=>{},J=()=>{},P=()=>{w.value.open("add"),s.value.show=!1},V=()=>{const e=s.value.lndexY,a=g[s.value.lndexX];w.value.open("edit",{...p[e][a][0]}),s.value.show=!1},X=()=>{const e=s.value.lndexY,a=g[s.value.lndexX];p[e][a].splice(0,1),s.value.show=!1},D=e=>{const a=s.value.lndexY,h=g[s.value.lndexX];p[a][h].splice(0,1,e)},p=N([{A:[{name:"a1",id:1,status:1}],B:[{name:"b1",id:2,status:1}],C:[],D:[{name:"d1",id:3,status:1}],E:[],F:[{name:"f1",id:4,status:1}],G:[{name:"g1",id:5,status:0}],H:[{name:"h1",id:6,status:0}],I:[],J:[{name:"j1",id:8,status:1}],K:[],L:[],M:[{name:"m1",id:9,status:1}],N:[{name:"n1",id:10,status:1}],O:[{name:"o1",id:20,status:1}],P:[],Q:[],R:[]},{A:[{name:"a2",id:11,status:1}],B:[{name:"b2",id:22,status:1}],C:[],D:[{name:"d2",id:23,status:1}],E:[],F:[{name:"f2",id:24,status:1}],G:[{name:"g2",id:25,status:1}],H:[{name:"h2",id:26,status:1}],I:[],J:[{name:"j2",id:27,status:0}],K:[],L:[],M:[{name:"m2",id:28,status:0}],N:[{name:"n2",id:29,status:1}],O:[{name:"o2",id:30,status:1}],P:[],Q:[],R:[]},{A:[{name:"a3",id:31,status:1}],B:[{name:"b3",id:32,status:1}],C:[],D:[{name:"d3",id:33,status:1}],E:[],F:[{name:"f3",id:34,status:1}],G:[{name:"g3",id:35,status:1}],H:[{name:"h3",id:36,status:1}],I:[],J:[{name:"j3",id:37,status:1}],K:[],L:[],M:[],N:[{name:"n3",id:39,status:1}],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[{name:"d4",id:41,status:1}],E:[{name:"e4",id:42,status:1}],F:[{name:"f4",id:43,status:1}],G:[{name:"g4",id:44,status:1}],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[{name:"a5",id:51,status:0}],B:[{name:"b5",id:52,status:0}],C:[{name:"c5",id:53,status:1}],D:[{name:"d5",id:54,status:1}],E:[{name:"e5",id:55,status:1}],F:[],G:[],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[],E:[],F:[{name:"f6",id:56,status:1}],G:[{name:"g6",id:57,status:1}],H:[{name:"h6",id:59,status:1}],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]},{A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],I:[],J:[],K:[],L:[],M:[],N:[],O:[],P:[],Q:[],R:[]}]),g=Object.keys(p[0]);return U(()=>{document.addEventListener("mousedown",e=>{const a=e.target;e.button==0&&s.value.show&&a.className!="menu_item"&&(s.value.show=!1)})}),q(()=>{document.removeEventListener("mousedown",()=>{})}),(e,a)=>{const h=sa,o=la,y=na,_=ra,x=ia,Y=da,B=ua,G=oa,j=ma,$=z;return i(),m(O,null,[n(_,{style:{"margin-top":"-5px","margin-bottom":"10px"}},{default:l(()=>[F("div",fa,[n(h,{class:"tag",size:"large"},{default:l(()=>[c("\u673A\u623F1")]),_:1}),F("div",null,[t(r)?u("",!0):(i(),C(o,{key:0,onClick:a[0]||(a[0]=d=>r.value=!0),type:"primary"},{default:l(()=>[c("\u7F16\u8F91")]),_:1})),t(r)?(i(),C(o,{key:1,onClick:a[1]||(a[1]=d=>r.value=!1),plain:"",type:"primary"},{default:l(()=>[c("\u53D6\u6D88")]),_:1})):u("",!0),t(r)?(i(),C(o,{key:2,plain:"",type:"primary"},{default:l(()=>[n(y,{size:16,icon:"ep:setting",style:{"margin-right":"5px"},onClick:I}),c("\u8BBE\u7F6E")]),_:1})):u("",!0),t(r)?(i(),C(o,{key:3,onClick:e.handleSubmit,plain:"",type:"primary"},{default:l(()=>[c("\u4FDD\u5B58")]),_:1},8,["onClick"])):u("",!0)])])]),_:1}),n(_,null,{default:l(()=>[F("div",{class:"dragContainer",onContextmenu:L(Q,["right"])},[t(r)?u("",!0):(i(),m("div",{key:0,class:"mask",onClick:a[2]||(a[2]=L(()=>{},["prevent"]))})),n(Y,{class:"dragTable",data:t(p),border:"",style:{width:"100%"},"row-style":{background:"revert"}},{default:l(()=>[n(x,{fixed:"",type:"index",width:"80",align:"center",resizable:!1}),(i(!0),m(O,null,W(t(g),(d,K)=>(i(),C(x,{key:K,label:d,width:"100",align:"center",resizable:!1},{default:l(E=>[n(t(ca),{id:`${E.$index}-${K}`,class:"dragTd",list:E.row[d],itemKey:v=>v.id,tag:"div",group:E.row[d].length>0?R:A,animation:"100",onStart:H,onEnd:L(J,["prevent"])},{item:l(({element:v})=>[v&&v.name?(i(),m("div",{key:0,class:Z(v.status==1?"normalDrag":"warnDrag")},aa(v.name),3)):u("",!0)]),_:2},1032,["id","list","itemKey","group"])]),_:2},1032,["label"]))),128))]),_:1},8,["data"]),t(s).show?(i(),m("div",{key:1,class:"menu",style:ea({left:`${t(s).left}`,top:`${t(s).top}`})},[t(M)?(i(),m("div",{key:0,class:"menu_item",onClick:P},"\u65B0\u589E")):u("",!0),t(M)?u("",!0):(i(),m("div",{key:1,class:"menu_item",onClick:V},"\u7F16\u8F91")),t(M)?u("",!0):(i(),m("div",{key:2,class:"menu_item",onClick:X},"\u5220\u9664"))],4)):u("",!0)],32)]),_:1}),n(pa,{ref_key:"machineForm",ref:w,onSuccess:D},null,512),n($,{modelValue:t(f),"onUpdate:modelValue":a[6]||(a[6]=d=>ta(f)?f.value=d:null),title:"\u8BBE\u7F6E\u623F\u95F4\u7684\u884C\u5217\u6570",width:"30%"},{footer:l(()=>[n(o,{onClick:a[5]||(a[5]=d=>f.value=!1)},{default:l(()=>[c("\u53D6 \u6D88")]),_:1}),n(o,{type:"primary",onClick:e.submitForm},{default:l(()=>[c("\u786E \u5B9A")]),_:1},8,["onClick"])]),default:l(()=>[n(j,null,{default:l(()=>[n(G,{label:"\u884C\u6570","label-width":"80"},{default:l(()=>[n(B,{modelValue:t(k).row,"onUpdate:modelValue":a[3]||(a[3]=d=>t(k).row=d),min:1,max:50,onChange:D,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),n(G,{label:"\u5217\u6570","label-width":"80"},{default:l(()=>[n(B,{modelValue:t(k).col,"onUpdate:modelValue":a[4]||(a[4]=d=>t(k).col=d),min:1,max:50,onChange:D,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-bb3d0706"]]);export{ga as default};
