import{d as H,e as u,u as W,a5 as Y,g as ee,a as l,f as ae,aj as le,h as te,s as oe,I as ne,o as j,n as ie,w as a,k as e,V as se,l as p,t as x,j as E,c as re,p as de,F as pe,x as ce,a6 as ue,aa as fe,ab as me,ac as ge,ad as he,a8 as _e,O as we,E as ye,Z as xe,ae as be,z as ve,y as Fe,Q as ke,al as Ve,_ as Ce}from"./index-mcOGIq4g.js";import{_ as Le}from"./Verify-xY3AT-eq.js";import{_ as Re}from"./XButton-zTH-RG3W.js";import{E as je}from"./el-link-Bpo5D1Qv.js";import{_ as Ee}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-CCF9NEtS.js";import{u as b}from"./useIcon-p6YtqOQ1.js";import{u as Ie,L as h,a as Me}from"./useLogin-BGuj3iei.js";import{u as ze}from"./useMessage-CGTQbR_M.js";import{r as I}from"./formRules-CpfMmool.js";import{_ as Se}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-Di4T52Sc.js";const Oe={class:"w-[100%] flex justify-between"},Pe={class:"w-[100%] flex justify-between"},Ue=Se(H({name:"LoginForm",__name:"LoginForm",setup(Qe){const{t:r}=ce(),M=ze();b({icon:"ep:house"});const z=b({icon:"ep:avatar"}),S=b({icon:"ep:lock"}),v=u(),{validForm:O}=Me(v),{setLoginState:_,getLoginState:P}=Ie(),{currentRoute:U,push:Q}=W(),T=Y(),c=u(""),m=u(!1),F=u(),G=u("blockPuzzle"),$=ee(()=>l(P)===h.LOGIN),q={username:[I],password:[I]},o=ae({isShowPassword:!1,captchaEnable:"false",loginForm:{username:"admin",password:"admin123",captchaVerification:"",rememberMe:!0}}),A=[{icon:"ant-design:wechat-filled",type:30},{icon:"ant-design:dingtalk-circle-filled",type:20},{icon:"ant-design:github-filled",type:0},{icon:"ant-design:alipay-circle-filled",type:0}],k=async()=>{o.captchaEnable==="false"?await C({}):F.value.show()},V=u(),C=async n=>{m.value=!0;try{if(!await O())return;o.loginForm.captchaVerification=n.captchaVerification;const t=await fe(o.loginForm);if(!t)return;V.value=me.service({lock:!0,text:"\u6B63\u5728\u52A0\u8F7D\u7CFB\u7EDF\u4E2D...",background:"rgba(0, 0, 0, 0.7)"}),o.loginForm.rememberMe?ge(o.loginForm):he(),_e(t),c.value||(c.value="/"),c.value.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):Q({path:c.value||T.addRouters[0].path})}finally{m.value=!1,V.value.close()}};return le(()=>U.value,n=>{var t;c.value=(t=n==null?void 0:n.query)==null?void 0:t.redirect},{immediate:!0}),te(()=>{(()=>{const n=ue();n&&(o.loginForm={...o.loginForm,username:n.username?n.username:o.loginForm.username,password:n.password?n.password:o.loginForm.password,rememberMe:n.rememberMe})})()}),(n,t)=>{const d=we,i=ye,L=xe,B=be,f=je,w=ve,g=Re,D=Le,R=Fe,J=Ce,K=ke;return oe((j(),ie(K,{ref_key:"formLogin",ref:v,model:l(o).loginForm,rules:q,class:"login-form","label-position":"top","label-width":"120px",size:"large"},{default:a(()=>[e(w,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:a(()=>[e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:a(()=>[e(d,null,{default:a(()=>[e(Ee,{style:{width:"100%"}})]),_:1})]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:a(()=>[e(d,{prop:"username"},{default:a(()=>[e(L,{modelValue:l(o).loginForm.username,"onUpdate:modelValue":t[0]||(t[0]=s=>l(o).loginForm.username=s),placeholder:l(r)("login.usernamePlaceholder"),"prefix-icon":l(z)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:a(()=>[e(d,{prop:"password"},{default:a(()=>[e(L,{modelValue:l(o).loginForm.password,"onUpdate:modelValue":t[1]||(t[1]=s=>l(o).loginForm.password=s),placeholder:l(r)("login.passwordPlaceholder"),"prefix-icon":l(S),"show-password":"",type:"password",onKeyup:t[2]||(t[2]=se(s=>k(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:a(()=>[e(d,null,{default:a(()=>[e(w,{justify:"space-between",style:{width:"100%"}},{default:a(()=>[e(i,{span:6},{default:a(()=>[e(B,{modelValue:l(o).loginForm.rememberMe,"onUpdate:modelValue":t[3]||(t[3]=s=>l(o).loginForm.rememberMe=s)},{default:a(()=>[p(x(l(r)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),e(i,{offset:6,span:12},{default:a(()=>[e(f,{style:{float:"right"},type:"primary"},{default:a(()=>[p(x(l(r)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:a(()=>[e(d,null,{default:a(()=>[e(g,{loading:l(m),title:l(r)("login.login"),class:"w-[100%]",type:"primary",onClick:t[4]||(t[4]=s=>k())},null,8,["loading","title"])]),_:1})]),_:1}),e(D,{ref_key:"verify",ref:F,captchaType:l(G),imgSize:{width:"400px",height:"200px"},mode:"pop",onSuccess:C},null,8,["captchaType"]),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:a(()=>[e(d,null,{default:a(()=>[e(w,{gutter:5,justify:"space-between",style:{width:"100%"}},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(g,{title:l(r)("login.btnMobile"),class:"w-[100%]",onClick:t[5]||(t[5]=s=>l(_)(l(h).MOBILE))},null,8,["title"])]),_:1}),e(i,{span:8},{default:a(()=>[e(g,{title:l(r)("login.btnQRCode"),class:"w-[100%]",onClick:t[6]||(t[6]=s=>l(_)(l(h).QR_CODE))},null,8,["title"])]),_:1}),e(i,{span:8},{default:a(()=>[e(g,{title:l(r)("login.btnRegister"),class:"w-[100%]",onClick:t[7]||(t[7]=s=>l(_)(l(h).REGISTER))},null,8,["title"])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{"content-position":"center"},{default:a(()=>[p(x(l(r)("login.otherLogin")),1)]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:a(()=>[e(d,null,{default:a(()=>[E("div",Oe,[(j(),re(pe,null,de(A,(s,N)=>e(J,{key:N,icon:s.icon,size:30,class:"anticon cursor-pointer",color:"#999",onClick:Te=>(async y=>{if(y===0)M.error("\u6B64\u65B9\u5F0F\u672A\u914D\u7F6E");else{m.value=!0;const X=location.origin+"/social-login?"+encodeURIComponent(`type=${y}&redirect=${c.value||"/"}`),Z=await Ve(y,encodeURIComponent(X));window.location.href=Z}})(s.type)},null,8,["icon","onClick"])),64))])]),_:1})]),_:1}),e(R,{"content-position":"center"},{default:a(()=>[p("\u840C\u65B0\u5FC5\u8BFB")]),_:1}),e(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:a(()=>[e(d,null,{default:a(()=>[E("div",Pe,[e(f,{href:"https://doc.iocoder.cn/",target:"_blank"},{default:a(()=>[p("\u{1F4DA}\u5F00\u53D1\u6307\u5357")]),_:1}),e(f,{href:"https://doc.iocoder.cn/video/",target:"_blank"},{default:a(()=>[p("\u{1F525}\u89C6\u9891\u6559\u7A0B")]),_:1}),e(f,{href:"https://www.iocoder.cn/Interview/good-collection/",target:"_blank"},{default:a(()=>[p(" \u26A1\u9762\u8BD5\u624B\u518C ")]),_:1}),e(f,{href:"http://static.yudao.iocoder.cn/mp/Aix9975.jpeg",target:"_blank"},{default:a(()=>[p(" \u{1F91D}\u5916\u5305\u54A8\u8BE2 ")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[ne,l($)]])}}}),[["__scopeId","data-v-9b4575e0"]]);export{Ue as default};
