import{r as K,d as na,u as oa,e as r,f as O,aU as ca,o as p,n as U,w as c,j as e,t as o,a as l,l as d,k as i,a0 as F,c as u,F as T,p as P,ax as V,q as y,s as da,v as S,O as pa,Z as ra,_ as ua,A as ma,Q as va,D as ya,G as ga,R as fa,J as ba,K as ha}from"./index-mcOGIq4g.js";import{_ as xa}from"./CommonMenu-CxUjeIT-.js";import{E as Na}from"./el-empty-Bl_qCsZJ.js";import{_ as ka}from"./index.vue_vue_type_script_setup_true_lang-DcNux-x9.js";import{C as Sa}from"./index-JEsRnusb.js";import{_ as _a}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-BHQCcaX3.js";import"./el-card-FPJq94NZ.js";import"./NavTree-CcS5UKLK.js";import"./index-BFNvSS9e.js";const Ca=async m=>await K.post({url:"/cabinet/capacity/page",data:m}),wa=async m=>await K.get({url:"/cabinet/capacity/statistics",params:m}),x=m=>(ba("data-v-30d75ead"),m=m(),ha(),m),Ra={class:"navInfo"},za={class:"status"},Ia={class:"box"},Ua=x(()=>e("div",{class:"top"},[e("div",{class:"tag"}),d("100% ")],-1)),Fa={class:"value"},Ta={class:"number"},Va={class:"box"},Aa=x(()=>e("div",{class:"top"},[e("div",{class:"tag normal"}),d(">50% ")],-1)),Ea={class:"value"},Ha={class:"number"},La={class:"box"},Da=x(()=>e("div",{class:"top",style:{"margin-left":"-10px"}},[e("div",{class:"tag warn"}),d("30%~50% ")],-1)),ja={class:"value"},Ma={class:"number"},qa={class:"box"},Ba=x(()=>e("div",{class:"top"},[e("div",{class:"tag error"}),d("<30% ")],-1)),Ga={class:"value"},Ja={class:"number"},Ka={class:"box"},Oa=x(()=>e("div",{class:"top"},[e("div"),d("\u5168\u90E8 ")],-1)),Pa={class:"value"},Qa={class:"number"},Za=["onClick"],Wa=["onClick"],Xa={key:0,class:"matrixContainer"},Ya={class:"content"},$a={class:"info"},ae={class:"shapeContainer"},ee={class:"shape"},le=[x(()=>e("div",{style:{position:"absolute",top:"55px",left:"5px"}},"\u5269\u4F59\u91CF",-1))],se=x(()=>e("div",{class:"bottom"},null,-1)),te={class:"room"},ie={style:{position:"absolute",width:"70px",height:"30px",top:"5px",right:"5px"}},ne=["onClick"],oe=na({__name:"index",setup(m){const{push:Q}=oa(),g=r(0),w=r(!1),N=r([]),A=r([]),E=r(!0),H=r([]),s=O({company:void 0,pageNo:1,pageSize:24,pageTotal:0,startNum:void 0,endNum:void 0}),R=r([24,36,48,96]),f=r(0),_=r(-1),z=O([{name:"\u5269\u4F59\u91CF100%",selected:!0,value:0,cssClass:"btn_full",activeClass:"btn_full full",color:"#42ee5f",startNum:100,endNum:100},{name:"\u5269\u4F59\u91CF>50%",selected:!0,value:1,cssClass:"btn_normal",activeClass:"btn_normal normal",color:"#ffc402",startNum:50,endNum:99.99},{name:"30%<\u5269\u4F59\u91CF<50%",selected:!0,value:2,cssClass:"btn_warn",activeClass:"btn_warn warn",color:"#fa3333",startNum:30,endNum:49.99},{name:"\u5269\u4F59\u91CF<30%",selected:!0,value:3,cssClass:"btn_error",activeClass:"btn_error error",startNum:0,endNum:29.99}]),L=r(0),D=r(0),j=r(0),M=r(0),q=r(0),v=async(n=!1)=>{w.value=!0,n&&(s.pageNo=1);try{const t=await Ca({pageNo:s.pageNo,pageSize:s.pageSize,company:s.company,cabinetIds:E.value?null:H.value,startNum:s.startNum,endNum:s.endNum,roomId:null});t.list&&(N.value=t.list,s.pageTotal=t.total)}finally{w.value=!1}},B=n=>{f.value=1,_.value=n,s.startNum=z[n].startNum,s.endNum=z[n].endNum,v()},Z=()=>{f.value=0,_.value=-1,s.startNum=void 0,s.endNum=void 0,v()},W=n=>{E.value=!1;const t=[];n.forEach(b=>{b.type==3&&t.push(b.id)}),H.value=t,v(!0)},X=()=>{f.value=0,_.value=-1,s.company=void 0,s.startNum=void 0,s.endNum=void 0,v()},G=n=>{g.value!=n&&(g.value=n,s.pageSize=n==0?24:10,v(!0))},J=(n,t)=>{Q({path:"/cabinet/cab/screen",state:{id:n,roomId:t}})};return ca(async()=>{await(async()=>{const n=await Sa.getRoomMenuAll({});A.value=n})(),await v(),await(async()=>{const n=await wa();L.value=n.thirty,D.value=n.fifty,j.value=n.ninetyNine,M.value=n.oneHundred,q.value=n.total})()}),(n,t)=>{const b=pa,Y=ra,C=ua,k=ma,$=va,h=ya,aa=ga,ea=ka,la=Na,sa=xa,ta=fa;return p(),U(sa,{dataList:l(A),onCheck:W,navTitle:"\u673A\u67DC\u5BB9\u91CF"},{NavInfo:c(()=>[e("div",Ra,[e("div",za,[e("div",Ia,[Ua,e("div",Fa,[e("span",Ta,o(l(M)),1),d("\u4E2A")])]),e("div",Va,[Aa,e("div",Ea,[e("span",Ha,o(l(j)),1),d("\u4E2A")])]),e("div",La,[Da,e("div",ja,[e("span",Ma,o(l(D)),1),d("\u4E2A")])]),e("div",qa,[Ba,e("div",Ga,[e("span",Ja,o(l(L)),1),d("\u4E2A")])]),e("div",Ka,[Oa,e("div",Pa,[e("span",Qa,o(l(q)),1),d("\u4E2A")])])])])]),ActionBar:c(()=>[i($,{class:"-mb-15px",model:l(s),inline:!0,"label-width":"68px"},{default:c(()=>[i(b,{style:{"margin-left":"5px"}},{default:c(()=>[e("button",{class:F({btnallSelected:l(f)===0,btnallNotSelected:l(f)===1}),type:"button",onClick:Z}," \u5168\u90E8 ",2),(p(!0),u(T,null,P(l(z),(a,I)=>(p(),u(T,{key:I},[l(f)===0?(p(),u("button",{key:0,class:F([a.activeClass]),onClick:V(ia=>B(a.value),["prevent"])},o(a.name),11,Za)):l(f)===1?(p(),u("button",{key:1,class:F([l(_)===a.value?a.activeClass:a.cssClass]),onClick:V(ia=>B(a.value),["prevent"])},o(a.name),11,Wa)):y("",!0)],64))),128))]),_:1}),e("div",null,[i(b,{label:"\u516C\u53F8\u540D\u79F0",prop:"company"},{default:c(()=>[i(Y,{modelValue:l(s).company,"onUpdate:modelValue":t[0]||(t[0]=a=>l(s).company=a),placeholder:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0",clearable:"",class:"!w-160px",height:"35"},null,8,["modelValue"])]),_:1}),i(b,null,{default:c(()=>[i(k,{style:{"margin-left":"12px"},onClick:t[1]||(t[1]=a=>v(!0))},{default:c(()=>[i(C,{icon:"ep:search"}),d("\u641C\u7D22")]),_:1}),i(k,{onClick:X},{default:c(()=>[i(C,{icon:"ep:refresh",class:"mr-5px"}),d(" \u91CD\u7F6E")]),_:1})]),_:1})]),i(b,{style:{"margin-left":"auto"}},{default:c(()=>[i(k,{onClick:t[2]||(t[2]=a=>{R.value=[24,36,48,96],l(s).pageSize=24,G(0)}),type:l(g)?"":"primary"},{default:c(()=>[i(C,{icon:"ep:grid",style:{"margin-right":"8px"}}),d("\u9635\u5217\u6A21\u5F0F")]),_:1},8,["type"]),i(k,{onClick:t[3]||(t[3]=a=>{R.value=[15,25,30,50,100],l(s).pageSize=15,G(1)}),type:l(g)?"primary":""},{default:c(()=>[i(C,{icon:"ep:expand",style:{"margin-right":"8px"}}),d("\u8868\u683C\u6A21\u5F0F")]),_:1},8,["type"])]),_:1})]),_:1},8,["model"])]),Content:c(()=>[da((p(),u("div",null,[l(g)==0&&l(N).length>0?(p(),u("div",Xa,[(p(!0),u(T,null,P(l(N),a=>(p(),u("div",{class:"item",key:a.id},[e("div",Ya,[e("div",$a,[e("div",null,"\u5DF2\u7528\u7A7A\u95F4\uFF1A"+o(a.usedSpace)+"U",1),e("div",null,"\u7A7A\u95F4\u5BB9\u91CF\uFF1A"+o(a.cabinetHeight)+"U",1),e("div",null,"\u8BBE\u5907\u6570\u91CF\uFF1A"+o(a.rackNum),1)]),e("div",ae,[e("div",ee,[e("div",{style:S([{position:"relative"},{flex:a.usedSpace}])},le,4),a.usedSpaceRate==100?(p(),u("div",{key:0,class:"fill",style:S({flex:a.usedSpaceRate})},o(a.usedSpaceRate)+"%",5)):y("",!0),a.usedSpaceRate<100&&a.usedSpaceRate>=50?(p(),u("div",{key:1,class:"normal",style:S({flex:a.usedSpaceRate})},o(a.usedSpaceRate)+"%",5)):y("",!0),a.usedSpaceRate<50&&a.usedSpaceRate>=30?(p(),u("div",{key:2,class:"fill",style:S({flex:a.usedSpaceRate})},o(a.usedSpaceRate)+"%",5)):y("",!0),a.usedSpaceRate<30&&a.usedSpaceRate>=0?(p(),u("div",{key:3,class:"fill",style:S({flex:a.usedSpaceRate})},o(a.usedSpaceRate)+"%",5)):y("",!0)]),se])]),e("div",te,o(a.roomName)+"-"+o(a.name),1),e("div",ie,"\u5269\u4F59\u91CF"+o(a.usedSpaceRate)+"%",1),e("button",{class:"detail",onClick:V(I=>J(a.id,a.roomId),["prevent"])},"\u8BE6\u60C5",8,ne)]))),128))])):y("",!0),l(g)==1?(p(),U(aa,{key:1,style:{width:"100%",height:"calc(100vh - 320px)"},data:l(N)},{default:c(()=>[i(h,{type:"index",width:"100",label:"\u5E8F\u53F7",align:"center"}),i(h,{label:"\u4F4D\u7F6E","min-width":"110",align:"center",prop:"local"},{default:c(a=>[d(o(a.row.roomName)+"-"+o(a.row.name),1)]),_:1}),i(h,{label:"\u516C\u53F8","min-width":"110",align:"center",prop:"company"}),i(h,{label:"\u8BBE\u5907\u6570\u91CF","min-width":"110",align:"center",prop:"rackNum"}),i(h,{label:"\u672A\u7528\u7A7A\u95F4(U)","min-width":"110",align:"center",prop:"freeSpace"}),i(h,{label:"\u5DF2\u7528\u7A7A\u95F4(U)","min-width":"110",align:"center",prop:"usedSpace"}),i(h,{label:"\u64CD\u4F5C",align:"center"},{default:c(a=>[i(k,{link:"",type:"primary",onClick:I=>J(a.row.roomId,a.row.id),style:{"background-color":"#409EFF",color:"#fff",border:"none",width:"65px",height:"30px"}},{default:c(()=>[d(" \u8BBE\u5907\u8BE6\u60C5 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):y("",!0),i(ea,{total:l(s).pageTotal,"page-size-arr":l(R),page:l(s).pageNo,"onUpdate:page":t[4]||(t[4]=a=>l(s).pageNo=a),limit:l(s).pageSize,"onUpdate:limit":t[5]||(t[5]=a=>l(s).pageSize=a),onPagination:t[6]||(t[6]=a=>v(!1))},null,8,["total","page-size-arr","page","limit"]),l(N).length==0&&l(g)==0?(p(),U(la,{key:2,description:"\u6682\u65E0\u6570\u636E","image-size":300})):y("",!0)])),[[ta,l(w)]])]),_:1},8,["dataList"])}}}),ce=_a(oe,[["__scopeId","data-v-30d75ead"]]);export{ce as default};
