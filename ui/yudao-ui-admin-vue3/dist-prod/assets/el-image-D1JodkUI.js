import{aB as W,aG as z,bl as X,aF as Z,d as A,bj as ee,aC as ae,aO as le,dk as se,e as c,g as u,bz as f,aj as te,h as oe,o as n,c as d,aD as E,j as T,t as ie,a,a0 as g,F as $,aT as ne,q as y,n as re,w as ce,v as ue,b0 as de,ao as ve,dl as pe,aI as fe,dm as ye,cD as D,dn as me,dp as ge,aN as we}from"./index-mcOGIq4g.js";import{E as he}from"./el-image-viewer-o-mf1rAT.js";const be=W({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:z([String,Object])},previewSrcList:{type:z(Array),default:()=>X([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:z(String)}}),Se={load:o=>o instanceof Event,error:o=>o instanceof Event,switch:o=>Z(o),close:()=>!0,show:()=>!0},ke=["src","loading","crossorigin"],xe={key:0},ze=A({name:"ElImage",inheritAttrs:!1}),Ee=we(de(A({...ze,props:be,emits:Se,setup(o,{emit:v}){const l=o;let C="";const{t:F}=ee(),i=ae("image"),_=le(),M=se(),w=c(),p=c(!1),r=c(!0),h=c(!1),m=c(),t=c(),P=f&&"loading"in HTMLImageElement.prototype;let b,S;const R=u(()=>[i.e("inner"),k.value&&i.e("preview"),r.value&&i.is("loading")]),q=u(()=>_.style),Y=u(()=>{const{fit:e}=l;return f&&e?{objectFit:e}:{}}),k=u(()=>{const{previewSrcList:e}=l;return Array.isArray(e)&&e.length>0}),G=u(()=>{const{previewSrcList:e,initialIndex:s}=l;let j=s;return s>e.length-1&&(j=0),j}),I=u(()=>l.loading!=="eager"&&(!P&&l.loading==="lazy"||l.lazy)),x=()=>{f&&(r.value=!0,p.value=!1,w.value=l.src)};function H(e){r.value=!1,p.value=!1,v("load",e)}function K(e){r.value=!1,p.value=!0,v("error",e)}function B(){me(m.value,t.value)&&(x(),O())}const L=ge(B,200,!0);async function N(){var e;if(!f)return;await ve();const{scrollContainer:s}=l;pe(s)?t.value=s:fe(s)&&s!==""?t.value=(e=document.querySelector(s))!=null?e:void 0:m.value&&(t.value=ye(m.value)),t.value&&(b=D(t,"scroll",L),setTimeout(()=>B(),100))}function O(){f&&t.value&&L&&(b==null||b(),t.value=void 0)}function J(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function Q(){k.value&&(S=D("wheel",J,{passive:!1}),C=document.body.style.overflow,document.body.style.overflow="hidden",h.value=!0,v("show"))}function U(){S==null||S(),document.body.style.overflow=C,h.value=!1,v("close")}function V(e){v("switch",e)}return te(()=>l.src,()=>{I.value?(r.value=!0,p.value=!1,O(),N()):x()}),oe(()=>{I.value?N():x()}),(e,s)=>(n(),d("div",{ref_key:"container",ref:m,class:g([a(i).b(),e.$attrs.class]),style:ue(a(q))},[p.value?E(e.$slots,"error",{key:0},()=>[T("div",{class:g(a(i).e("error"))},ie(a(F)("el.image.error")),3)]):(n(),d($,{key:1},[w.value!==void 0?(n(),d("img",ne({key:0},a(M),{src:w.value,loading:e.loading,style:a(Y),class:a(R),crossorigin:e.crossorigin,onClick:Q,onLoad:H,onError:K}),null,16,ke)):y("v-if",!0),r.value?(n(),d("div",{key:1,class:g(a(i).e("wrapper"))},[E(e.$slots,"placeholder",{},()=>[T("div",{class:g(a(i).e("placeholder"))},null,2)])],2)):y("v-if",!0)],64)),a(k)?(n(),d($,{key:2},[h.value?(n(),re(a(he),{key:0,"z-index":e.zIndex,"initial-index":a(G),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:U,onSwitch:V},{default:ce(()=>[e.$slots.viewer?(n(),d("div",xe,[E(e.$slots,"viewer")])):y("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):y("v-if",!0)],64)):y("v-if",!0)],6))}}),[["__file","image.vue"]]));export{Ee as E};
