import{d as A,x as F,e as u,o as M,n as R,w as r,k as i,a as t,l as y,s as S,m as b,A as g,R as C}from"./index-mcOGIq4g.js";import{_ as j}from"./Dialog.vue_vue_type_style_index_0_lang-BHwm1lq5.js";import{_ as E}from"./Form-5oiF4EUX.js";import{g as U,c as q,a as z}from"./useCrudSchemas-BEKbr6_C.js";import{r as B,a as D}from"./account.data-NznLacHv.js";import{u as G}from"./useMessage-CGTQbR_M.js";const H=A({name:"SystemMailAccountForm",__name:"MailAccountForm",emits:["success"],setup(I,{expose:_,emit:w}){const{t:c}=F(),n=G(),e=u(!1),f=u(""),s=u(!1),d=u(""),o=u();_({open:async(l,a)=>{if(e.value=!0,f.value=c("action."+l),d.value=l,a){s.value=!0;try{const m=await U(a);o.value.setValues(m)}finally{s.value=!1}}}});const k=w,V=async()=>{if(o&&await o.value.getElFormRef().validate()){s.value=!0;try{const l=o.value.formModel;d.value==="create"?(await q(l),n.success(c("common.createSuccess"))):(await z(l),n.success(c("common.updateSuccess"))),e.value=!1,k("success")}finally{s.value=!1}}};return(l,a)=>{const m=E,p=g,h=j,x=C;return M(),R(h,{modelValue:t(e),"onUpdate:modelValue":a[1]||(a[1]=v=>b(e)?e.value=v:null),title:t(f)},{footer:r(()=>[i(p,{disabled:t(s),type:"primary",onClick:V},{default:r(()=>[y("\u786E \u5B9A")]),_:1},8,["disabled"]),i(p,{onClick:a[0]||(a[0]=v=>e.value=!1)},{default:r(()=>[y("\u53D6 \u6D88")]),_:1})]),default:r(()=>[S(i(m,{ref_key:"formRef",ref:o,rules:t(B),schema:t(D).formSchema},null,8,["rules","schema"]),[[x,t(s)]])]),_:1},8,["modelValue","title"])}}});export{H as _};
