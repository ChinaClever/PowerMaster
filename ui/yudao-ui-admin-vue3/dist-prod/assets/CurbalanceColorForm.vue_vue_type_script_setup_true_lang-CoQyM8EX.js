import{r as v,d as j,x as A,e as m,f as D,o as _,n as x,w as s,k as t,a as r,l as c,s as P,m as Q,j as V,Z,O as z,Q as B,A as G,R as H}from"./index-mcOGIq4g.js";import{_ as I}from"./Dialog.vue_vue_type_style_index_0_lang-BHwm1lq5.js";import{u as J}from"./useMessage-CGTQbR_M.js";const y={getCurbalanceColorPage:async l=>await v.get({url:"/bus/curbalance-color/page",params:l}),getCurbalanceColor:async()=>await v.get({url:"/bus/curbalance-color/get"}),createCurbalanceColor:async l=>await v.post({url:"/bus/curbalance-color/create",data:l}),updateCurbalanceColor:async l=>await v.put({url:"/bus/curbalance-color/update",data:l}),deleteCurbalanceColor:async l=>await v.delete({url:"/bus/curbalance-color/delete?id="+l}),exportCurbalanceColor:async l=>await v.download({url:"/bus/curbalance-color/export-excel",params:l})},K=V("div",{style:{"background-color":"#3bbb00","margin-right":"20px"}},"\u7EFF\u8272\u7684\u8303\u56F4",-1),L=V("div",{style:{"background-color":"#ffc402","margin-right":"20px"}},"\u9EC4\u8272\u7684\u8303\u56F4",-1),M=V("div",{style:{"background-color":"#fa3333","margin-right":"20px"}},"\u7EA2\u8272\u7684\u8303\u56F4",-1),N=j({name:"CurbalanceColorForm",__name:"CurbalanceColorForm",emits:["success"],setup(l,{expose:O,emit:k}){const{t:f}=A(),F=J(),g=m(!1),T=m(""),p=m(!1),C=m(""),e=m({id:void 0,rangeOne:void 0,rangeTwo:void 0,rangeThree:void 0,rangeFour:void 0}),b=(o,a,d)=>{if(e.value.rangeOne&&e.value.rangeTwo&&e.value.rangeThree&&e.value.rangeFour){const i=[parseFloat(e.value.rangeOne),parseFloat(e.value.rangeTwo),parseFloat(e.value.rangeThree),parseFloat(e.value.rangeFour)],w=["\u7B2C\u4E00\u7A7A","\u7B2C\u4E8C\u7A7A","\u7B2C\u4E09\u7A7A","\u7B2C\u56DB\u7A7A"];for(let n=0;n<i.length-1;n++)if(i[n]>=i[n+1])return d(new Error(`${w[n]} \u5FC5\u987B\u5C0F\u4E8E ${w[n+1]}`));d()}else d(new Error("\u8BF7\u586B\u5199\u6240\u6709\u8303\u56F4"))},U=D({rangeOne:[{validator:b,required:!0,trigger:"blur"}],rangeTwo:[{validator:b,required:!0,trigger:"blur"}],rangeThree:[{validator:b,required:!0,trigger:"blur"}],rangeFour:[{validator:b,required:!0,trigger:"blur"}]}),h=m();O({open:async o=>{g.value=!0,T.value=f("action."+o),C.value=o,R(),p.value=!0;try{var a=await y.getCurbalanceColor();a!=null&&(e.value=a,C.value="update"),e.value}finally{p.value=!1}}});const q=k,E=async()=>{await h.value.validate(),p.value=!0;try{const o=e.value;C.value==="create"?(await y.createCurbalanceColor(o),F.success(f("common.createSuccess"))):(await y.updateCurbalanceColor(o),F.success(f("common.updateSuccess"))),g.value=!1,q("success",e.value)}finally{p.value=!1}},R=()=>{var o;e.value={id:void 0,rangeOne:void 0,rangeTwo:void 0,rangeThree:void 0,rangeFour:void 0},(o=h.value)==null||o.resetFields()};return(o,a)=>{const d=Z,i=z,w=B,n=G,S=I,$=H;return _(),x(S,{title:r(T),modelValue:r(g),"onUpdate:modelValue":a[5]||(a[5]=u=>Q(g)?g.value=u:null)},{footer:s(()=>[t(n,{onClick:E,type:"primary",disabled:r(p)},{default:s(()=>[c("\u786E \u5B9A")]),_:1},8,["disabled"]),t(n,{onClick:a[4]||(a[4]=u=>g.value=!1)},{default:s(()=>[c("\u53D6 \u6D88")]),_:1})]),default:s(()=>[P((_(),x(w,{ref_key:"formRef",ref:h,model:r(e),rules:r(U),"label-width":"100px"},{default:s(()=>[t(i,{prop:"rangeOne"},{default:s(()=>[K,c(" \u5C0F\u4E8E"),t(d,{style:{width:"11.3%"},type:"number",modelValue:r(e).rangeOne,"onUpdate:modelValue":a[0]||(a[0]=u=>r(e).rangeOne=u),placeholder:"\u8BF7\u8F93\u5165\u7B2C\u4E00\u4E2A\u5C0F\u4E8E\u7684\u8303\u56F4"},null,8,["modelValue"]),c("% ")]),_:1}),t(i,{prop:"rangeTwo"},{default:s(()=>[L,t(d,{style:{width:"11.3%"},type:"number",modelValue:r(e).rangeTwo,"onUpdate:modelValue":a[1]||(a[1]=u=>r(e).rangeTwo=u),placeholder:"\u8BF7\u8F93\u5165\u7B2C\u4E8C\u4E2A\u8303\u56F4\u7684\u6700\u5C0F\u503C"},null,8,["modelValue"]),c("%- "),t(d,{style:{width:"11.3%"},type:"number",modelValue:r(e).rangeThree,"onUpdate:modelValue":a[2]||(a[2]=u=>r(e).rangeThree=u),placeholder:"\u8BF7\u8F93\u5165\u7B2C\u4E8C\u4E2A\u8303\u56F4\u7684\u6700\u5927\u503C"},null,8,["modelValue"]),c("% ")]),_:1}),t(i,{prop:"rangeFour"},{default:s(()=>[M,c(" \u5927\u4E8E"),t(d,{style:{width:"11.3%"},type:"number",modelValue:r(e).rangeFour,"onUpdate:modelValue":a[3]||(a[3]=u=>r(e).rangeFour=u),placeholder:"\u8BF7\u8F93\u5165\u7B2C\u4E09\u4E2A\u5927\u4E8E\u7684\u8303\u56F4"},null,8,["modelValue"]),c("% ")]),_:1})]),_:1},8,["model","rules"])),[[$,r(p)]])]),_:1},8,["title","modelValue"])}}});export{y as C,N as _};
