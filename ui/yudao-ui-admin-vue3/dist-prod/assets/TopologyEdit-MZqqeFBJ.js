import{d as S,e as b,h as B,f as g,o as s,c as m,j as c,F as I,p as y,t as u,k as _,w as C,a0 as x,a as E,ax as D,ao as $}from"./index-mcOGIq4g.js";import{n as W}from"./jsplumb.browser-ui.es-D8lVyB7K.js";import{d as j}from"./vuedraggable.umd-DnsY9z5D.js";import{_ as w}from"./_plugin-vue_export-helper-BCo6x5W8.js";const K={style:{display:"flex","justify-content":"center"}},F={class:"portLeft"},P=["id"],T=["id"],q={class:"portRight"},z=["id"],A=w(S({__name:"TopologyEdit",setup(G){const f=b();let e=null;const v=d=>{},L=d=>{if(d.oldIndex==d.newIndex)return!1;const i=e==null?void 0:e.connections;let t=[];i==null||i.forEach(n=>{t.push({sourceId:n.sourceId,targetId:n.targetId})}),e==null||e.deleteEveryConnection(),$(()=>{t.forEach((n,a)=>{e==null||e.connect({source:document.getElementById(n.sourceId),target:document.getElementById(n.targetId),anchor:["Right","Left"]})})})};B(()=>{(()=>{e=W({container:f.value});const d={source:!0,target:!0,endpoint:{type:"Dot",options:{radius:2,fillStyle:"rgba(0, 0, 0, 0)"}}},i={strokeWidth:2,stroke:l.length>10?"rgba(0, 0, 0, 0)":"#000",outlineWidth:13,outlineStroke:"rgba(0, 0, 0, 0)"},t={...i,stroke:"#000"};e.bind("beforeDrop",n=>n.sourceId.slice(0,5)!=n.targetId.slice(0,5)),l.forEach(n=>{const a=document.getElementById(`frame${n.id}`);e==null||e.addEndpoint(a,{...d,anchor:"Left"}),e==null||e.addEndpoint(a,{...d,anchor:"Right"})}),p.forEach(n=>{const a=document.getElementById(`portLeft${n.id}`);if(e==null||e.addEndpoint(a,{...d,anchor:"Right"}),!n.targetId)return;const r=document.getElementById(`frame${n.targetId}`);let o=e==null?void 0:e.connect({source:a,target:r,endpoint:{type:"Dot",options:{radius:2,fillStyle:"rgba(0, 0, 0, 0)"}},anchors:["Right","Left"],paintStyle:i});r.addEventListener("mouseover",k=>{o&&(e==null||e.deleteConnection(o)),o=e==null?void 0:e.connect({source:a,target:r,endpoint:{type:"Dot",options:{radius:2,fillStyle:"rgba(0, 0, 0, 0)"}},anchors:["Right","Left"],paintStyle:{strokeWidth:2,stroke:"red",outlineWidth:13,outlineStroke:"rgba(0, 0, 0, 0)"}})}),r.addEventListener("mouseout",k=>{o&&(e==null||e.deleteConnection(o))})}),h.forEach(n=>{const a=document.getElementById(`portRight${n.id}`);if(e==null||e.addEndpoint(a,{...d,anchor:"Left"}),!n.targetId)return;const r=document.getElementById(`frame${n.targetId}`),o=e==null?void 0:e.connect({source:r,target:a,anchors:["Right","Left"],endpoint:{type:"Dot",options:{radius:2,fillStyle:"rgba(0, 0, 0, 0)"}},paintStyle:i});o&&l.length>5&&(o.hoverPaintStyle=t)})})()});const p=g([{id:101,name:"\u7AEF\u53E31",targetId:201},{id:102,name:"\u7AEF\u53E32",targetId:202},{id:103,name:"\u7AEF\u53E33",targetId:203},{id:104,name:"\u7AEF\u53E34",targetId:204},{id:105,name:"\u7AEF\u53E31",targetId:null},{id:106,name:"\u7AEF\u53E32",targetId:null},{id:107,name:"\u7AEF\u53E33",targetId:null},{id:108,name:"\u7AEF\u53E34",targetId:null}]),h=g([{id:301,name:"\u7AEF\u53E31",targetId:201},{id:302,name:"\u7AEF\u53E32",targetId:202},{id:303,name:"\u7AEF\u53E33",targetId:203},{id:304,name:"\u7AEF\u53E34",targetId:204}]);let l=g([{id:201,name:"1"},{id:202,name:"2"},{id:203,name:"3"},{id:204,name:"4"},{id:2042,name:"5"},{id:2043,name:"6"},{id:2044,name:"7"},{id:2045,name:"8"},{id:2046,name:"9"},{id:2012,name:"10"},{id:2014,name:"11"},{id:2013,name:"12"},{id:2011,name:"13"},{id:2015,name:"14"},{id:2016,name:"15"},{id:2017,name:"16"},{id:2018,name:"17"},{id:2019,name:"18"},{id:2010,name:"19"},{id:20211,name:"20"},{id:20210,name:"21"},{id:20212,name:"22"},{id:20213,name:"23"},{id:20214,name:"24"},{id:20215,name:"25"},{id:20216,name:"26"},{id:20217,name:"27"},{id:20218,name:"28"},{id:20219,name:"29"},{id:202567,name:"30"},{id:2022942,name:"31"},{id:2023242,name:"32"},{id:2022342,name:"33"},{id:202131,name:"34"},{id:202123,name:"35"},{id:2021231,name:"36"},{id:2024235,name:"37"},{id:202364,name:"38"},{id:202634,name:"39"},{id:202135,name:"40"},{id:202124,name:"41"},{id:2021234,name:"42"}]);return(d,i)=>(s(),m("div",K,[c("div",{ref_key:"frameContainer",ref:f,class:"frameContainer",style:{position:"relative"}},[c("div",F,[(s(!0),m(I,null,y(p,t=>(s(),m("div",{class:"port",key:t.id,id:"portLeft"+t.id},u(t.name),9,P))),128))]),_(E(j),{class:"frameList",list:E(l),itemKey:t=>t.id,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"100",onStart:v,onEnd:D(L,["prevent"])},{item:C(({element:t})=>[c("div",{class:x(t.targetId?"frame active":"frame"),id:"frame"+t.id},u(t.name),11,T)]),_:1},8,["list","itemKey"]),c("div",q,[(s(!0),m(I,null,y(h,t=>(s(),m("div",{class:"port",key:t.id,id:"portRight"+t.id},u(t.name),9,z))),128))])],512)]))}}),[["__scopeId","data-v-c7520145"]]);export{A as default};
