import{d as j,u as G,e as g,f as B,o as m,n as N,w as n,j as a,t as p,a as l,l as o,k as t,s as J,c as h,F as K,p as M,ax as Q,q as C,Z as W,O as Z,_ as $,A as H,Q as X,D as Y,G as aa,R as la,J as ea,K as ta}from"./index-mcOGIq4g.js";import{_ as ia}from"./CommonMenu-CxUjeIT-.js";import{E as sa}from"./el-empty-Bl_qCsZJ.js";import{_ as na}from"./index.vue_vue_type_script_setup_true_lang-DcNux-x9.js";import{C as O}from"./index-JEsRnusb.js";import{_ as oa}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-BHQCcaX3.js";import"./el-card-FPJq94NZ.js";import"./NavTree-CcS5UKLK.js";import"./index-BFNvSS9e.js";const f=y=>(ea("data-v-a33be346"),y=y(),ta(),y),pa={class:"navInfo"},ra=f(()=>a("div",{class:"line"},null,-1)),ca={class:"status"},da={class:"box"},ua=f(()=>a("div",{class:"top"},[a("div",{class:"tag"}),o("\u672A\u7ED1\u5B9A ")],-1)),va={class:"value"},ma={class:"number"},ga={class:"box"},fa=f(()=>a("div",{class:"top"},[a("div",{class:"tag empty"}),o("\u5F00\u673A ")],-1)),wa={class:"value"},ya={class:"number"},ba={class:"box"},ha=f(()=>a("div",{class:"top"},[a("div",{class:"tag warn"}),o("\u5173\u673A ")],-1)),ka={class:"value"},_a={class:"number"},xa={class:"box"},Aa=f(()=>a("div",{class:"top"},[a("div",{class:"tag error"}),o("\u603B\u8BA1 ")],-1)),Na={class:"value"},Ca={class:"number"},Oa=f(()=>a("div",{class:"line"},null,-1)),Sa={key:0,class:"matrixContainer"},za={class:"content"},Ra={class:"power"},Ta={class:"info"},Ia={class:"room"},Ba=["onClick"],Da=oa(j({__name:"index",setup(y){const{push:D}=G(),k=g(!1),v=g(0),w=g([]),S=g([]),z=g(!0),R=g([]),s=B({company:void 0,pageNo:1,pageSize:24,pageTotal:1}),u=B({unbound:0,powerOn:0,powerOff:0,totalAll:0}),b=async(r=!1)=>{k.value=!0,r&&(s.pageNo=1);try{const e=await O.getRackPage({pageNo:s.pageNo,pageSize:s.pageSize,company:s.company,rackIds:z.value?null:R.value});e.list&&(w.value=e.list,s.pageTotal=e.total),(async()=>{const c=await O.getRackStatistics();u.unbound=c.unbound,u.powerOn=c.powerOn,u.powerOff=c.powerOff,u.totalAll=c.total})()}finally{k.value=!1}},T=r=>{v.value!=r&&(v.value=r,s.pageSize=r==0?24:10)},F=r=>{z.value=!1;const e=[];r.forEach(c=>{c.type==5&&e.push(c.id)}),R.value=e,b(!0)};return(async()=>{const r=await O.getRackMenuAll({});S.value=r})(),b(),(r,e)=>{const c=W,_=Z,x=$,A=H,U=X,d=Y,V=aa,q=na,E=sa,L=ia,P=la;return m(),N(L,{onCheck:F,showSearch:!0,dataList:l(S),navTitle:"\u673A\u67B6\u8BBE\u5907"},{NavInfo:n(()=>[a("div",pa,[ra,a("div",ca,[a("div",da,[ua,a("div",va,[a("span",ma,p(l(u).unbound),1),o("\u4E2A")])]),a("div",ga,[fa,a("div",wa,[a("span",ya,p(l(u).powerOn),1),o("\u4E2A")])]),a("div",ba,[ha,a("div",ka,[a("span",_a,p(l(u).powerOff),1),o("\u4E2A")])]),a("div",xa,[Aa,a("div",Na,[a("span",Ca,p(l(u).totalAll),1),o("\u4E2A")])])]),Oa])]),ActionBar:n(()=>[t(U,{class:"-mb-15px",model:l(s),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:n(()=>[a("div",null,[t(_,{label:"\u516C\u53F8\u540D\u79F0",prop:"username"},{default:n(()=>[t(c,{modelValue:l(s).company,"onUpdate:modelValue":e[0]||(e[0]=i=>l(s).company=i),placeholder:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0",clearable:"",class:"!w-160px",height:"35"},null,8,["modelValue"])]),_:1}),t(_,null,{default:n(()=>[t(A,{style:{"margin-left":"12px"},onClick:e[1]||(e[1]=i=>b(!0))},{default:n(()=>[t(x,{icon:"ep:search"}),o("\u641C\u7D22")]),_:1})]),_:1})]),t(_,{style:{"margin-left":"auto"}},{default:n(()=>[t(A,{onClick:e[2]||(e[2]=i=>T(0)),type:l(v)?"":"primary"},{default:n(()=>[t(x,{icon:"ep:grid",style:{"margin-right":"8px"}}),o("\u9635\u5217\u6A21\u5F0F")]),_:1},8,["type"]),t(A,{onClick:e[3]||(e[3]=i=>T(1)),type:l(v)?"primary":""},{default:n(()=>[t(x,{icon:"ep:expand",style:{"margin-right":"8px"}}),o("\u8868\u683C\u6A21\u5F0F")]),_:1},8,["type"])]),_:1})]),_:1},8,["model"])]),Content:n(()=>[J((m(),h("div",null,[l(v)==0&&l(w).length>0?(m(),h("div",Sa,[(m(!0),h(K,null,M(l(w),i=>(m(),h("div",{class:"item",key:i.key},[a("div",za,[a("div",Ra,"\u529F\u7387\uFF1A"+p(i.powActive||0)+"kW",1),a("div",Ta,[a("div",null,"\u540D\u79F0\uFF1A"+p(i.rackName),1),a("div",null,"\u578B\u53F7\uFF1A"+p(i.rackType),1),a("div",null,"A\u8DEF\u7535\u6D41\uFF1A"+p(i.cura||0)+"A",1),a("div",null,"B\u8DEF\u7535\u6D41\uFF1A"+p(i.curb||0)+"A",1)])]),a("div",Ia,p(i.local),1),a("button",{class:"detail",onClick:Q(Fa=>{return I=i.id,void D({path:"/u/frameDeviceDetail",state:{id:I}});var I},["prevent"])},"\u8BE6\u60C5",8,Ba)]))),128))])):C("",!0),l(v)==1?(m(),N(V,{key:1,style:{width:"100%",height:"calc(100vh - 320px)"},data:l(w)},{default:n(()=>[t(d,{label:"\u7F16\u53F7",align:"center",prop:"tableId",width:"80px"},{default:n(({$index:i})=>[o(p(i+1+(l(s).pageNo-1)*l(s).pageSize),1)]),_:1}),t(d,{label:"\u4F4D\u7F6E","min-width":"110",align:"center",prop:"local"}),t(d,{label:"\u8BBE\u5907\u540D","min-width":"110",align:"center",prop:"rackName"}),t(d,{label:"\u8BBE\u5907\u578B\u53F7","min-width":"110",align:"center",prop:"rackType"}),t(d,{label:"A\u8DEF\u7535\u6D41","min-width":"110",align:"center",prop:"cura"}),t(d,{label:"B\u8DEF\u7535\u6D41","min-width":"110",align:"center",prop:"curb"}),t(d,{label:"\u6709\u529F\u529F\u7387","min-width":"110",align:"center",prop:"powActive"}),t(d,{label:"\u65E0\u529F\u529F\u7387","min-width":"110",align:"center",prop:"powReactive"}),t(d,{label:"\u529F\u7387\u56E0\u7D20","min-width":"110",align:"center",prop:"powerFactor"})]),_:1},8,["data"])):C("",!0),t(q,{total:l(s).pageTotal,page:l(s).pageNo,"onUpdate:page":e[4]||(e[4]=i=>l(s).pageNo=i),limit:l(s).pageSize,"onUpdate:limit":e[5]||(e[5]=i=>l(s).pageSize=i),onPagination:e[6]||(e[6]=i=>b(!1))},null,8,["total","page","limit"]),l(w).length==0&&l(v)==0?(m(),N(E,{key:2,description:"\u6682\u65E0\u6570\u636E","image-size":300})):C("",!0)])),[[P,l(k)]])]),_:1},8,["dataList"])}}}),[["__scopeId","data-v-a33be346"]]);export{Da as default};
