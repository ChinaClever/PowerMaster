import{_ as S}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BHQCcaX3.js";import{r as T,d as W,f as z,e as f,aj as K,o as e,c as u,k,w as N,j as n,a,l as L,F as v,p as r,n as M,t,q as p,S as E,N as G,O as H,Q as X,A as Y,J as Z,K as $}from"./index-mcOGIq4g.js";import{M as aa}from"./index-CN_W-U9Z.js";import{_ as la}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-FPJq94NZ.js";const ea=async I=>await T.post({url:"/bus/topology",data:I}),y=I=>(Z("data-v-f366ffb4"),I=I(),$(),I),ia={class:"flex justify-between"},ta=y(()=>n("span",{class:"line"},null,-1)),ua={class:"btns"},sa={class:"topologyContainer"},na={class:"loadA"},oa={key:0,class:"box"},da=y(()=>n("div",{class:"title"},"A\u8DEF\u59CB\u7AEF\u7BB1",-1)),ma={key:0},va={key:1},ca={key:1,class:"box-empty"},ra=y(()=>n("div",{class:"line"},null,-1)),xa={class:"boxList"},ba=y(()=>n("div",{class:"layer"},null,-1)),pa={key:0,class:"stage"},_a={key:1,class:"box"},fa={class:"title"},ya={key:0},ka={key:2,class:"boxconnect"},Na={class:"title"},Ba=y(()=>n("div",{class:"tip"},"A\u8DEF",-1)),Ia={class:"loadB"},wa={key:0,class:"box boxB"},ga=y(()=>n("div",{class:"title"},"B\u8DEF\u59CB\u7AEF\u7BB1",-1)),Ca={key:0},Fa={key:1},Da={key:1,class:"box-empty boxB"},Aa=y(()=>n("div",{class:"line"},null,-1)),Va={class:"boxList"},ha={key:0},La={key:0,class:"box"},ja={class:"title"},Pa={key:1,class:"boxconnect"},Ua={class:"title"},qa={key:2,class:"stage"},Ja=y(()=>n("div",{class:"layer"},null,-1)),Ka=y(()=>n("div",{class:"tip"},"B\u8DEF",-1)),Ma=W({__name:"index",setup(I){var j,P;const c=z({cabinetColumnId:(j=history==null?void 0:history.state)==null?void 0:j.id,cabinetroomId:(P=history==null?void 0:history.state)==null?void 0:P.roomId}),w=f([]),B=f([]),s=[{name:"\u7535\u6D41",value:0,unit:"A",unitName:"I",paramBox:"cur_value",paramBus:"cur_value",fixNum:2},{name:"\u7535\u538B",value:1,unit:"V",unitName:"U",paramBox:"vol_value",paramBus:"vol_value",fixNum:1},{name:"\u6709\u529F\u529F\u7387",value:2,unit:"kW",unitName:"P",paramBox:"pow_active",paramBus:"pow_value",fixNum:3},{name:"\u65E0\u529F\u529F\u7387",value:3,unit:"kVar",unitName:"P",paramBox:"pow_reactive",paramBus:"pow_reactive",fixNum:3},{name:"\u89C6\u5728\u529F\u7387",value:4,unit:"kVA",unitName:"P",paramBox:"pow_apparent",paramBus:"pow_apparent",fixNum:3},{name:"\u529F\u7387\u56E0\u7D20",value:5,unit:"",unitName:"P",paramBox:"power_factor",paramBus:"power_factor",fixNum:2},{name:"\u6E29\u5EA6",value:6,unit:"\xB0C",unitName:"T",paramBox:"tem_value",paramBus:"tem_value",fixNum:2}],_=["a","b","c","d"],l=f(0),D=f([]),A=f([]),C=f([]),F=f({}),V=f([]),h=f({}),O=()=>{let b=null;c.cabinetroomId?b=w.value.find(o=>o.roomId==c.cabinetroomId):(c.cabinetroomId=w.value[0].roomId,b=w.value[0]),B.value=b.aisleList||[],!c.cabinetColumnId&&B.value&&(c.cabinetColumnId=B.value[0].id)};return K(()=>c.cabinetroomId,b=>{if(b){const o=w.value.find(g=>g.roomId==b);B.value=o.aisleList||[],B.value.find(g=>g.id==c.cabinetColumnId)||(c.cabinetColumnId=B.value[0].id)}}),K(()=>c.cabinetColumnId,b=>{(async()=>{const o=await ea({id:c.cabinetColumnId});o.length>0?(C.value=o[0].busData?o[0].busData.bus_data.line_item_list:null,F.value=o[1].busData?o[1].busData.bus_data.line_item_list:null,V.value=o[0].busData?o[0].busData.env_item_list:null,h.value=o[1].busData?o[1].busData.env_item_list:null,D.value=o[0].boxDataList,A.value=o[1].boxDataList):(C.value=[],F.value=[],V.value=[],h.value=[],D.value=[],A.value=[])})()}),(async()=>{const b=await aa.getAisleList({});b&&b.length&&(w.value=b,O())})(),(b,o)=>{const g=E,U=G,q=H,Q=X,R=Y,J=S;return e(),u(v,null,[k(J,null,{default:N(()=>[n("div",ia,[k(Q,{class:"-mb-15px topForm",model:a(c),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:N(()=>[k(q,{label:"",prop:"jf"},{default:N(()=>[L(" \u673A\u623F\uFF1A"),k(U,{modelValue:a(c).cabinetroomId,"onUpdate:modelValue":o[0]||(o[0]=i=>a(c).cabinetroomId=i),placeholder:"\u8BF7\u9009\u62E9",class:"!w-100px"},{default:N(()=>[(e(!0),u(v,null,r(a(w),i=>(e(),M(g,{key:i.roomId,label:i.roomName,value:i.roomId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),ta,k(q,{label:"",prop:"jg"},{default:N(()=>[L(" \u67DC\u5217\uFF1A"),k(U,{modelValue:a(c).cabinetColumnId,"onUpdate:modelValue":o[1]||(o[1]=i=>a(c).cabinetColumnId=i),placeholder:"\u8BF7\u9009\u62E9",class:"!w-100px"},{default:N(()=>[(e(!0),u(v,null,r(a(B),i=>(e(),M(g,{key:i.id,label:i.name,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),n("div",ua,[(e(),u(v,null,r(s,i=>k(R,{key:i.value,onClick:d=>{return x=i.value,void(l.value=x);var x},type:"primary",plain:a(l)!=i.value},{default:N(()=>[L(t(i.name),1)]),_:2},1032,["onClick","plain"])),64))])])]),_:1}),k(J,null,{default:N(()=>[n("div",sa,[n("div",na,[a(C)?(e(),u("div",oa,[da,a(l)==6?(e(),u("div",ma,[(e(!0),u(v,null,r(a(V)[s[a(l)].paramBus],(i,d)=>(e(),u("div",{class:"info",key:d},[n("div",null,t(s[a(l)].unitName)+t(_[d]),1),n("div",null,t(i.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128))])):a(l)!=6?(e(),u("div",va,[(e(!0),u(v,null,r(a(C)[s[a(l)].paramBus],(i,d)=>(e(),u("div",{class:"info",key:d},[n("div",null,t(s[a(l)].unitName)+t(_[d]),1),n("div",null,t(i.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128))])):p("",!0)])):(e(),u("div",ca)),ra,n("div",xa,[(e(!0),u(v,null,r(a(D).filter(i=>i.data!==void 0),(i,d)=>(e(),u("div",{class:"boxItem",key:d},[ba,i.data.box_data.box_cfg.box_type==0?(e(),u("div",pa)):p("",!0),i.data.box_data.box_cfg.box_type==0?(e(),u("div",_a,[n("div",fa,"A"+t(d+1)+"#\u63D2\u63A5\u7BB1",1),i.data?(e(),u("div",ya,[a(l)!=6?(e(!0),u(v,{key:0},r(i.data.box_data.line_item_list[s[a(l)].paramBox],(x,m)=>(e(),u("div",{class:"info",key:m},[n("div",null,t(s[a(l)].unitName)+t(_[m]),1),n("div",null,t(x.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128)):(e(!0),u(v,{key:1},r(i.data.env_item_list[s[a(l)].paramBox],(x,m)=>(e(),u("div",{class:"info",key:m},[n("div",null,t(s[a(l)].unitName)+t(_[m]),1),n("div",null,t(x.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128))])):p("",!0)])):p("",!0),i.data.box_data.box_cfg.box_type==1?(e(),u("div",ka,[n("div",Na,"A"+t(d+1)+"#\u8FDE\u63A5\u5668",1),a(l)==6?(e(!0),u(v,{key:0},r(i.data.env_item_list[s[a(l)].paramBox],(x,m)=>(e(),u("div",{class:"info",key:m},[n("div",null,t(s[a(l)].unitName)+t(_[m]),1),n("div",null,t(x.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128)):p("",!0)])):p("",!0)]))),128)),Ba])]),n("div",Ia,[a(F)?(e(),u("div",wa,[ga,a(l)==6?(e(),u("div",Ca,[(e(!0),u(v,null,r(a(h)[s[a(l)].paramBus],(i,d)=>(e(),u("div",{class:"info",key:d},[n("div",null,t(s[a(l)].unitName)+t(_[d]),1),n("div",null,t(i.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128))])):a(l)!=6?(e(),u("div",Fa,[(e(!0),u(v,null,r(a(F)[s[a(l)].paramBus],(i,d)=>(e(),u("div",{class:"info",key:d},[n("div",null,t(s[a(l)].unitName)+t(_[d]),1),n("div",null,t(i.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128))])):p("",!0)])):(e(),u("div",Da)),Aa,n("div",Va,[(e(!0),u(v,null,r(a(A).filter(i=>i.data!==void 0),(i,d)=>(e(),u("div",{class:"boxItem",key:d},[i&&i.data?(e(),u("div",ha,[i.data.box_data.box_cfg.box_type==0?(e(),u("div",La,[n("div",ja,"B"+t(d+1)+"#\u63D2\u63A5\u7BB1",1),a(l)!=6?(e(!0),u(v,{key:0},r(i.data.box_data.line_item_list[s[a(l)].paramBox],(x,m)=>(e(),u("div",{class:"info",key:m},[n("div",null,t(s[a(l)].unitName)+t(_[m]),1),n("div",null,t(x.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128)):(e(!0),u(v,{key:1},r(i.data.env_item_list[s[a(l)].paramBox],(x,m)=>(e(),u("div",{class:"info",key:m},[n("div",null,t(s[a(l)].unitName)+t(_[m]),1),n("div",null,t(x.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128))])):p("",!0)])):p("",!0),i.data.box_data.box_cfg.box_type==1?(e(),u("div",Pa,[n("div",Ua,"B"+t(d+1)+"#\u8FDE\u63A5\u5668",1),a(l)==6?(e(!0),u(v,{key:0},r(i.data.env_item_list[s[a(l)].paramBox],(x,m)=>(e(),u("div",{class:"info",key:m},[n("div",null,t(s[a(l)].unitName)+t(_[m]),1),n("div",null,t(x.toFixed(s[a(l)].fixNum))+t(s[a(l)].unit),1)]))),128)):p("",!0)])):p("",!0),i.data.box_data.box_cfg.box_type==0?(e(),u("div",qa)):p("",!0),Ja]))),128)),Ka])])])]),_:1})],64)}}}),Oa=la(Ma,[["__scopeId","data-v-f366ffb4"]]);export{Oa as default};
