import{d as B,e as c,aj as m,o as v,c as x,k as h,w as A,a as d,m as N,q as S,j,dd as V,_ as F,Z as I}from"./index-mcOGIq4g.js";import{_ as K}from"./_plugin-vue_export-helper-BCo6x5W8.js";const R={class:"container"},T={key:0,class:"head-container"},U={class:"tree-container",style:{"margin-left":"-20px",height:"500px",width:"calc(100% + 40px)","overflow-x":"auto","white-space":"nowrap"}},Z=K(B({__name:"NavTree",props:{dataList:Array,showSearch:Boolean,isAccordion:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!0},lazy:{type:Boolean,default:!1},load:{type:Function,required:!1},placeholder:{type:String,default:"\u8BF7\u8F93\u5165",required:!1}},emits:["node-click","check"],setup(n,{expose:w,emit:b}){const p=b,t=n,_={children:"children",label:"name"},g=c([]),o=c(""),s=c(),i=c([]),u=c([]),C=(e,l)=>!e||l.name.includes(e)||l.unique.includes(e),L=async e=>{p("node-click",e)},q=async(e,l)=>{var a;p("check",(a=s.value)==null?void 0:a.getCheckedNodes())};function f(){if(o.value==null||o.value=="")return i.value=t.dataList,void(u.value=[]);let e=[];for(let l in t.dataList){let a=y(t.dataList[l]);a!=null&&e.push(a)}i.value=e;for(let l in e)k(e[l])}function k(e){if(e!=null&&e.children!=null&&e.children.length!=0){u.value.push(e.id);for(let l in e.children)k(e.children[l])}}function y(e){if(e==null)return null;if(e.children==null||e.children.length==0)return e.name.includes(o.value)?{...e}:null;{let l=[];for(let a in e.children){let r=y(e.children[a]);r!=null&&l.push(r)}return l.length>0?{...e,children:l}:null}}return m(o,()=>{f()}),m(()=>t.dataList,e=>{i.value=e}),w({initCheck:e=>{s.value.setCheckedKeys(e)}}),f(),(e,l)=>{const a=F,r=I;return v(),x("div",R,[n.showSearch?(v(),x("div",T,[h(r,{modelValue:d(o),"onUpdate:modelValue":l[0]||(l[0]=z=>N(o)?o.value=z:null),class:"mb-20px",clearable:"",placeholder:n.placeholder},{prefix:A(()=>[h(a,{icon:"ep:search"})]),_:1},8,["modelValue","placeholder"])])):S("",!0),j("div",U,[h(d(V),{ref_key:"treeRef",ref:s,data:d(i),props:_,accordion:n.isAccordion,"filter-node-method":C,"show-checkbox":n.showCheckbox,lazy:n.lazy,load:n.load,"node-key":"id","default-checked-keys":d(g),"default-expanded-keys":d(u),onNodeClick:L,onCheck:q,style:{"min-width":"200px",display:"inline-block","white-space":"nowrap"}},null,8,["data","accordion","show-checkbox","lazy","load","default-checked-keys","default-expanded-keys"])])])}}}),[["__scopeId","data-v-1af6c7bb"]]);export{Z as _};
