import{d as C,af as s,c3 as S,e as B,co as I,o,c as i,k as n,w as $,a as l,a0 as j,j as p,aD as b,aS as D,F as E,t as f,q as r,ax as U,x as M,_ as W}from"./index-mcOGIq4g.js";import{c as F}from"./index-cPSk8mI0.js";import{u as L}from"./useUpload-BmAWkJ_f.js";import{u as R}from"./useMessage-CGTQbR_M.js";import{_ as A}from"./_plugin-vue_export-helper-BCo6x5W8.js";const G={class:"upload-box"},H=["src"],J={key:0},K={key:0},N={key:0},O={key:1,class:"upload-empty"},P={class:"el-upload__tip"},Q=A(C({name:"UploadImg",__name:"UploadImg",props:{modelValue:s.string.def(""),drag:s.bool.def(!0),disabled:s.bool.def(!1),fileSize:s.number.def(5),fileType:s.array.def(["image/jpeg","image/png","image/gif"]),height:s.string.def("150px"),width:s.string.def("150px"),borderradius:s.string.def("8px"),showDelete:s.bool.def(!0),showBtnText:s.bool.def(!0)},emits:["update:modelValue"],setup(e,{emit:v}){S(a=>({"598824f8":e.width,"7a72c929":e.height,"3d82be40":e.borderradius}));const u=e,{t:m}=M(),c=R(),g=B("id-"+I()),h=v,k=()=>{h("update:modelValue","")},{uploadUrl:w,httpRequest:x}=L(),_=()=>{const a=document.querySelector(`#${g.value} .el-upload__input`);a&&a.dispatchEvent(new MouseEvent("click"))},T=a=>{const t=a.size/1024/1024<u.fileSize,d=u.fileType;return d.includes(a.type)||c.notifyWarning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01"),t||c.notifyWarning(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${u.fileSize}M\uFF01`),d.includes(a.type)&&t},V=a=>{c.success("\u4E0A\u4F20\u6210\u529F"),h("update:modelValue",a.data)},z=()=>{c.notifyError("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01")};return(a,t)=>{const d=W,q=D;return o(),i("div",G,[n(q,{id:l(g),accept:e.fileType.join(","),action:l(w),"before-upload":T,class:j(["upload",e.drag?"no-border":""]),drag:e.drag,multiple:!1,"on-error":z,"on-success":V,"show-file-list":!1,"http-request":l(x)},{default:$(()=>[e.modelValue?(o(),i(E,{key:0},[p("img",{src:e.modelValue,class:"upload-image"},null,8,H),p("div",{class:"upload-handle",onClick:t[1]||(t[1]=U(()=>{},["stop"]))},[e.disabled?r("",!0):(o(),i("div",{key:0,class:"handle-icon",onClick:_},[n(d,{icon:"ep:edit"}),e.showBtnText?(o(),i("span",J,f(l(m)("action.edit")),1)):r("",!0)])),p("div",{class:"handle-icon",onClick:t[0]||(t[0]=X=>{return y=e.modelValue,void F({zIndex:9999999,urlList:[y]});var y})},[n(d,{icon:"ep:zoom-in"}),e.showBtnText?(o(),i("span",K,f(l(m)("action.detail")),1)):r("",!0)]),e.showDelete&&!e.disabled?(o(),i("div",{key:1,class:"handle-icon",onClick:k},[n(d,{icon:"ep:delete"}),e.showBtnText?(o(),i("span",N,f(l(m)("action.del")),1)):r("",!0)])):r("",!0)])],64)):(o(),i("div",O,[b(a.$slots,"empty",{},()=>[n(d,{icon:"ep:plus"})],!0)]))]),_:3},8,["id","accept","action","class","drag","http-request"]),p("div",P,[b(a.$slots,"tip",{},void 0,!0)])])}}}),[["__scopeId","data-v-7786dca0"]]);export{Q as _};
