import{d as B,dq as H,x as I,e as c,f as J,h as X,U as Y,o as n,c as T,k as e,w as a,a as o,V as $,F as g,p as ee,n as d,l as i,s as m,q as ae,ao as le,dr as q,Z as oe,O as te,S as se,N as re,_ as ne,A as ie,Q as pe,D as ue,G as ce,R as de}from"./index-mcOGIq4g.js";import{_ as me}from"./DictTag.vue_vue_type_script_lang-BqAWFSW1.js";import{_ as fe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BHQCcaX3.js";import{_ as _e}from"./index-kf-imsI2.js";import{a as ye,D as A}from"./dict-Cu4dALpk.js";import{h as we}from"./tree-Cts6wVCK.js";import{b as he,d as ve}from"./index-BrAk6oq9.js";import{_ as ke}from"./MenuForm.vue_vue_type_script_setup_true_lang-Dewk890-.js";import{u as be}from"./useMessage-CGTQbR_M.js";import"./color-DXkOL5Tu.js";import"./el-card-FPJq94NZ.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./Dialog.vue_vue_type_style_index_0_lang-BHwm1lq5.js";import"./index-BFNvSS9e.js";import"./el-tree-select-CP2w2htY.js";import"./constants-D0aoFN3l.js";const Ce=B({name:"SystemMenu",__name:"index",setup(xe){const{wsCache:O}=H(),{t:E}=I(),h=be(),v=c(!0),U=c([]),p=J({name:void 0,status:void 0}),V=c(),k=c(!1),b=c(!0),f=async()=>{v.value=!0;try{const _=await he(p);U.value=we(_)}finally{v.value=!1}},C=()=>{f()},F=()=>{V.value.resetFields(),C()},R=c(),x=(_,t,y)=>{R.value.open(_,t,y)},z=()=>{b.value=!1,k.value=!k.value,le(()=>{b.value=!0})},D=async()=>{try{await h.confirm("\u5373\u5C06\u66F4\u65B0\u7F13\u5B58\u5237\u65B0\u6D4F\u89C8\u5668\uFF01","\u5237\u65B0\u83DC\u5355\u7F13\u5B58"),O.delete(q.USER),O.delete(q.ROLE_ROUTERS),location.reload()}catch{}};return X(()=>{f()}),(_,t)=>{const y=_e,G=oe,S=te,K=se,L=re,u=ne,s=ie,P=pe,M=fe,r=ue,Q=me,W=ce,w=Y("hasPermi"),Z=de;return n(),T(g,null,[e(y,{title:"\u529F\u80FD\u6743\u9650",url:"https://doc.iocoder.cn/resource-permission"}),e(y,{title:"\u83DC\u5355\u8DEF\u7531",url:"https://doc.iocoder.cn/vue3/route/"}),e(M,null,{default:a(()=>[e(P,{ref_key:"queryFormRef",ref:V,inline:!0,model:o(p),class:"-mb-15px","label-width":"68px"},{default:a(()=>[e(S,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:a(()=>[e(G,{modelValue:o(p).name,"onUpdate:modelValue":t[0]||(t[0]=l=>o(p).name=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",onKeyup:$(C,["enter"])},null,8,["modelValue"])]),_:1}),e(S,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[e(L,{modelValue:o(p).status,"onUpdate:modelValue":t[1]||(t[1]=l=>o(p).status=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u83DC\u5355\u72B6\u6001"},{default:a(()=>[(n(!0),T(g,null,ee(o(ye)(o(A).COMMON_STATUS),l=>(n(),d(K,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(S,null,{default:a(()=>[e(s,{onClick:C},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:search"}),i(" \u641C\u7D22 ")]),_:1}),e(s,{onClick:F},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:refresh"}),i(" \u91CD\u7F6E ")]),_:1}),m((n(),d(s,{plain:"",type:"primary",onClick:t[2]||(t[2]=l=>x("create"))},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:plus"}),i(" \u65B0\u589E ")]),_:1})),[[w,["system:menu:create"]]]),e(s,{plain:"",type:"danger",onClick:z},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:sort"}),i(" \u5C55\u5F00/\u6298\u53E0 ")]),_:1}),e(s,{plain:"",onClick:D},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:refresh"}),i(" \u5237\u65B0\u83DC\u5355\u7F13\u5B58 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(M,null,{default:a(()=>[o(b)?m((n(),d(W,{key:0,data:o(U),"default-expand-all":o(k),"row-key":"id"},{default:a(()=>[e(r,{"show-overflow-tooltip":!0,label:"\u83DC\u5355\u540D\u79F0",prop:"name",width:"250"}),e(r,{align:"center",label:"\u56FE\u6807",prop:"icon",width:"100"},{default:a(l=>[e(u,{icon:l.row.icon},null,8,["icon"])]),_:1}),e(r,{label:"\u6392\u5E8F",prop:"sort",width:"60"}),e(r,{"show-overflow-tooltip":!0,label:"\u6743\u9650\u6807\u8BC6",prop:"permission"}),e(r,{"show-overflow-tooltip":!0,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"}),e(r,{"show-overflow-tooltip":!0,label:"\u7EC4\u4EF6\u540D\u79F0",prop:"componentName"}),e(r,{label:"\u72B6\u6001",prop:"status",width:"80"},{default:a(l=>[e(Q,{type:o(A).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",label:"\u64CD\u4F5C"},{default:a(l=>[m((n(),d(s,{link:"",type:"primary",onClick:N=>x("update",l.row.id)},{default:a(()=>[i(" \u4FEE\u6539 ")]),_:2},1032,["onClick"])),[[w,["system:menu:update"]]]),m((n(),d(s,{link:"",type:"primary",onClick:N=>x("create",void 0,l.row.id)},{default:a(()=>[i(" \u65B0\u589E ")]),_:2},1032,["onClick"])),[[w,["system:menu:create"]]]),m((n(),d(s,{link:"",type:"danger",onClick:N=>(async j=>{try{await h.delConfirm(),await ve(j),h.success(E("common.delSuccess")),await f()}catch{}})(l.row.id)},{default:a(()=>[i(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[w,["system:menu:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[Z,o(v)]]):ae("",!0)]),_:1}),e(ke,{ref_key:"formRef",ref:R,onSuccess:f},null,512)],64)}}});export{Ce as default};
