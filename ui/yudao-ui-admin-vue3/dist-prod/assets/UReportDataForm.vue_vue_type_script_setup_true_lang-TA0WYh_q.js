import{r as m,d as N,x as T,e as p,f as Q,o as v,n as _,w as o,k as r,a,l as k,s as Z,c as j,F as E,p as Y,m as z,Z as B,O as G,S as H,N as I,Q as J,A as K,R as L}from"./index-mcOGIq4g.js";import{_ as P}from"./Dialog.vue_vue_type_style_index_0_lang-BHwm1lq5.js";import{_ as W}from"./style.css_vue_type_style_index_0_src_true_lang-gbUSVHtw.js";import{a as X,D as $}from"./dict-Cu4dALpk.js";import{u as ee}from"./useMessage-CGTQbR_M.js";const ae=async u=>await m.get({url:"/report/ureport-data/page",params:u}),le=async u=>await m.delete({url:"/report/ureport-data/delete?id="+u}),te=async u=>await m.download({url:"/report/ureport-data/export-excel",params:u}),oe=N({__name:"UReportDataForm",emits:["success"],setup(u,{expose:h,emit:x}){const{t:f}=T(),V=ee(),d=p(!1),g=p(""),n=p(!1),w=p(""),t=p({id:void 0,name:void 0,status:void 0,content:void 0,remark:void 0}),U=Q({name:[{required:!0,message:"\u6587\u4EF6\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),y=p();h({open:async(s,e)=>{if(d.value=!0,g.value=f("action."+s),w.value=s,C(),e){n.value=!0;try{t.value=await(async i=>await m.get({url:"/report/ureport-data/get?id="+i}))(e)}finally{n.value=!1}}}});const S=x,F=async()=>{await y.value.validate(),n.value=!0;try{const s=t.value;w.value==="create"?(await(async e=>await m.post({url:"/report/ureport-data/create",data:e}))(s),V.success(f("common.createSuccess"))):(await(async e=>await m.put({url:"/report/ureport-data/update",data:e}))(s),V.success(f("common.updateSuccess"))),d.value=!1,S("success")}finally{n.value=!1}},C=()=>{var s;t.value={id:void 0,name:void 0,status:void 0,content:void 0,remark:void 0},(s=y.value)==null||s.resetFields()};return(s,e)=>{const i=B,c=G,M=H,q=I,D=W,O=J,b=K,R=P,A=L;return v(),_(R,{title:a(g),modelValue:a(d),"onUpdate:modelValue":e[5]||(e[5]=l=>z(d)?d.value=l:null)},{footer:o(()=>[r(b,{onClick:F,type:"primary",disabled:a(n)},{default:o(()=>[k("\u786E \u5B9A")]),_:1},8,["disabled"]),r(b,{onClick:e[4]||(e[4]=l=>d.value=!1)},{default:o(()=>[k("\u53D6 \u6D88")]),_:1})]),default:o(()=>[Z((v(),_(O,{ref_key:"formRef",ref:y,model:a(t),rules:a(U),"label-width":"100px"},{default:o(()=>[r(c,{label:"\u6587\u4EF6\u540D\u79F0",prop:"name"},{default:o(()=>[r(i,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).name=l),placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D\u79F0"},null,8,["modelValue"])]),_:1}),r(c,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[r(q,{modelValue:a(t).status,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).status=l),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001"},{default:o(()=>[(v(!0),j(E,null,Y(a(X)(a($).COMMON_STATUS),l=>(v(),_(M,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(c,{label:"\u6587\u4EF6\u5185\u5BB9",prop:"content"},{default:o(()=>[r(D,{modelValue:a(t).content,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).content=l),height:"150px"},null,8,["modelValue"])]),_:1}),r(c,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[r(i,{modelValue:a(t).remark,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[A,a(n)]])]),_:1},8,["title","modelValue"])}}});export{oe as _,le as d,te as e,ae as g};
